{
  "remediation_agent_assignments": {
    "metadata": {
      "total_tasks": 358,
      "total_agents": 12,
      "azure_vm": "azureuser@172.191.51.49",
      "execution_mode": "parallel_with_dependencies",
      "estimated_time": "30-35 hours",
      "created": "2025-12-04"
    },
    "phase_1_critical": {
      "agent_team_1_xss_protection": {
        "agent_type": "autonomous-coder",
        "agent_count": 3,
        "parallel_execution": true,
        "tasks": {
          "agent_1a": {
            "name": "XSS_DangerousHTML_Fixer",
            "priority": "CRITICAL",
            "assignment": [
              {
                "task_id": "1.1",
                "file": "src/components/ui/chart.tsx",
                "line": 139,
                "action": "Fix dangerouslySetInnerHTML with sanitizeHtml()",
                "prompt": "Fix XSS vulnerability in chart.tsx line 139:\n1. Import: import { sanitizeHtml } from '@/utils/xss-sanitizer'\n2. Wrap dangerouslySetInnerHTML content with sanitizeHtml()\n3. Test with XSS payload: <script>alert('XSS')</script>\n4. Verify syntax highlighting still works",
                "estimated_time": "30min",
                "verification": "Test with malicious theme values"
              },
              {
                "task_id": "1.2",
                "file": "src/components/documents/viewer/CodeViewer.tsx",
                "line": 255,
                "action": "Fix dangerouslySetInnerHTML with sanitizeHtml()",
                "prompt": "Fix XSS in CodeViewer.tsx line 255:\n1. Import sanitizeHtml\n2. Replace: dangerouslySetInnerHTML={{ __html: sanitizeHtml(highlightCode(line) || '&nbsp;') }}\n3. Test code viewer with script tags\n4. Ensure syntax highlighting preserved",
                "estimated_time": "30min",
                "verification": "Test with <script> tags in code snippets"
              }
            ]
          },
          "agent_1b": {
            "name": "XSS_Form_Components_1_15",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "1.3", "file": "src/components/modules/fleet/FleetDashboard/components/FleetFiltersPanel.tsx"},
              {"task_id": "1.4", "file": "src/components/modules/assets/AssetManagement.tsx"},
              {"task_id": "1.5", "file": "src/components/modules/analytics/DataWorkbench.tsx"},
              {"task_id": "1.6", "file": "src/components/shared/FilterPanel.tsx"},
              {"task_id": "1.7", "file": "src/components/shared/FilterBar.tsx"},
              {"task_id": "1.8", "file": "src/components/shared/FileUpload.tsx"},
              {"task_id": "1.9", "file": "src/components/shared/EnhancedDataTable.tsx"},
              {"task_id": "1.10", "file": "src/components/scheduling/VehicleReservationModal.tsx"},
              {"task_id": "1.11", "file": "src/components/modules/tools/TrafficCameras.tsx"},
              {"task_id": "1.12", "file": "src/components/modules/tools/RecurringScheduleDialog.tsx"},
              {"task_id": "1.13", "file": "src/components/modules/tools/ReceiptProcessing.tsx"},
              {"task_id": "1.14", "file": "src/components/modules/tools/MileageReimbursement.tsx"},
              {"task_id": "1.15", "file": "src/components/modules/tools/CustomFormBuilder.tsx"},
              {"task_id": "1.16", "file": "src/components/modules/tools/AIAssistant.tsx"},
              {"task_id": "1.17", "file": "src/components/modules/procurement/VendorManagement.tsx"}
            ],
            "action_template": "Add XSS protection: 1) Import sanitizeUserInput 2) Wrap all input handlers 3) Test with XSS payload",
            "estimated_time": "2.5h"
          },
          "agent_1c": {
            "name": "XSS_Form_Components_16_32",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "1.18", "file": "src/components/modules/procurement/PurchaseOrders.tsx"},
              {"task_id": "1.19", "file": "src/components/modules/procurement/PartsInventory.tsx"},
              {"task_id": "1.20", "file": "src/components/modules/procurement/Invoices.tsx"},
              {"task_id": "1.21", "file": "src/components/modules/procurement/InventoryManagement.tsx"},
              {"task_id": "1.22", "file": "src/components/modules/personal-use/PersonalUsePolicyConfig.tsx"},
              {"task_id": "1.23", "file": "src/components/modules/operations/TaskManagement.tsx"},
              {"task_id": "1.24", "file": "src/components/modules/operations/RouteManagement.tsx"},
              {"task_id": "1.25", "file": "src/components/modules/operations/GeofenceManagement.tsx"},
              {"task_id": "1.26", "file": "src/components/modules/operations/EnhancedTaskManagement.tsx"}
            ],
            "action_template": "Add XSS protection: 1) Import sanitizeUserInput 2) Wrap all input handlers 3) Test with XSS payload",
            "estimated_time": "2.5h"
          }
        }
      },
      "agent_team_2_csrf_protection": {
        "agent_type": "autonomous-coder",
        "agent_count": 4,
        "parallel_execution": true,
        "tasks": {
          "agent_2a": {
            "name": "CSRF_Auth_Routes",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "2.1", "file": "api/src/routes/auth.ts", "routes": 4},
              {"task_id": "2.2", "file": "api/src/routes/permissions.routes.ts", "routes": 4},
              {"task_id": "2.3", "file": "api/src/routes/session-revocation.ts", "routes": 1}
            ],
            "action": "Add csrfProtection middleware to all POST/PUT/DELETE/PATCH",
            "estimated_time": "1h"
          },
          "agent_2b": {
            "name": "CSRF_Core_Entities",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "2.4-2.10", "files": [
                "api/src/routes/vehicles.ts",
                "api/src/routes/vehicle-assignments.routes.ts",
                "api/src/routes/vehicle-identification.routes.ts",
                "api/src/routes/drivers.ts",
                "api/src/routes/driver-scorecard.routes.ts"
              ]},
              {"routes_count": 25}
            ],
            "action": "Add CSRF protection to vehicle and driver routes",
            "estimated_time": "2h"
          },
          "agent_2c": {
            "name": "CSRF_Maintenance_Procurement",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "2.11-2.25", "files": [
                "api/src/routes/maintenance.ts",
                "api/src/routes/maintenance-schedules.ts",
                "api/src/routes/work-orders.ts",
                "api/src/routes/inspections.ts",
                "api/src/routes/purchase-orders.ts",
                "api/src/routes/invoices.ts",
                "api/src/routes/vendors.ts",
                "api/src/routes/parts.ts"
              ]},
              {"routes_count": 30}
            ],
            "action": "Add CSRF protection to maintenance and procurement routes",
            "estimated_time": "2.5h"
          },
          "agent_2d": {
            "name": "CSRF_Remaining_Routes",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "2.26-2.188", "description": "All remaining 163 route files"},
              {"routes_count": 500}
            ],
            "action": "Add CSRF protection to all remaining routes",
            "estimated_time": "12h"
          }
        }
      },
      "agent_team_3_sql_injection": {
        "agent_type": "autonomous-coder",
        "agent_count": 2,
        "parallel_execution": true,
        "tasks": {
          "agent_3a": {
            "name": "SQL_Injection_Fixer_1_22",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "3.1", "file": "api/src/routes/drill-through/drill-through.routes.ts", "line": 290},
              {"task_id": "3.2", "file": "api/src/routes/communications.enhanced.ts", "line": 109},
              {"task_id": "3.3", "file": "api/src/routes/vehicles.enhanced.ts", "line": 102},
              {"task_id": "3.4", "file": "api/src/routes/annual-reauthorization.routes.enhanced.ts", "line": 100},
              {"task_id": "3.5", "file": "api/src/routes/vehicle-assignments.routes.enhanced.ts", "line": 153},
              {"task_id": "3.6-3.22", "description": "16 more files with $${paramIndex} pattern"}
            ],
            "action": "Fix SQL injection by using explicit parameter indices",
            "pattern": "Replace $${paramIndex} with explicit calculation",
            "estimated_time": "1.5h"
          },
          "agent_3b": {
            "name": "SQL_Injection_Fixer_23_45",
            "priority": "CRITICAL",
            "assignment": [
              {"task_id": "3.23-3.45", "description": "Remaining 23 SQL injection vulnerabilities"}
            ],
            "action": "Fix SQL injection by using explicit parameter indices",
            "estimated_time": "1.5h"
          }
        }
      }
    },
    "phase_2_high_priority": {
      "agent_team_4_tenant_isolation": {
        "agent_type": "autonomous-coder",
        "agent_count": 2,
        "parallel_execution": true,
        "tasks": {
          "agent_4a": {
            "name": "Tenant_Isolation_Audit_1_20",
            "priority": "HIGH",
            "assignment": [
              {"task_id": "4.1-4.20", "files": [
                "api/src/routes/vehicles.ts",
                "api/src/routes/drivers.ts",
                "api/src/routes/maintenance.ts",
                "api/src/routes/documents.ts",
                "api/src/routes/fuel-transactions.ts"
              ]},
              {"description": "Plus 15 more critical route files"}
            ],
            "action": "Add tenant_id WHERE clause to ALL queries",
            "estimated_time": "5h"
          },
          "agent_4b": {
            "name": "Tenant_Isolation_Audit_21_40",
            "priority": "HIGH",
            "assignment": [
              {"task_id": "4.21-4.40", "description": "Remaining 20 route files with queries"}
            ],
            "action": "Add tenant_id WHERE clause to ALL queries",
            "estimated_time": "5h"
          }
        }
      },
      "agent_team_5_repositories": {
        "agent_type": "autonomous-coder",
        "agent_count": 3,
        "parallel_execution": true,
        "tasks": {
          "agent_5a": {
            "name": "Repository_Creator_1_8",
            "priority": "HIGH",
            "assignment": [
              {"task_id": "5.1", "entity": "Fuel", "table": "fuel_transactions"},
              {"task_id": "5.2", "entity": "Incident", "table": "incidents"},
              {"task_id": "5.3", "entity": "Part", "table": "parts"},
              {"task_id": "5.4", "entity": "Invoice", "table": "invoices"},
              {"task_id": "5.5", "entity": "PurchaseOrder", "table": "purchase_orders"},
              {"task_id": "5.6", "entity": "Task", "table": "tasks"},
              {"task_id": "5.7", "entity": "Document", "table": "documents"},
              {"task_id": "5.8", "entity": "Cost", "table": "costs"}
            ],
            "action": "Create repository extending BaseRepository with tenant isolation",
            "estimated_time": "5h"
          },
          "agent_5b": {
            "name": "Repository_Creator_9_16",
            "priority": "HIGH",
            "assignment": [
              {"task_id": "5.9", "entity": "Route", "table": "routes"},
              {"task_id": "5.10", "entity": "Geofence", "table": "geofences"},
              {"task_id": "5.11", "entity": "Facility", "table": "facilities"},
              {"task_id": "5.12", "entity": "Trip", "table": "trips"},
              {"task_id": "5.13", "entity": "Reservation", "table": "reservations"},
              {"task_id": "5.14", "entity": "Alert", "table": "alerts"},
              {"task_id": "5.15", "entity": "Communication", "table": "communications"},
              {"task_id": "5.16", "entity": "Policy", "table": "policies"}
            ],
            "action": "Create repository extending BaseRepository with tenant isolation",
            "estimated_time": "5h"
          },
          "agent_5c": {
            "name": "Repository_Creator_17_23",
            "priority": "HIGH",
            "assignment": [
              {"task_id": "5.17", "entity": "Telemetry", "table": "telemetry"},
              {"task_id": "5.18", "entity": "Deployment", "table": "deployments"},
              {"task_id": "5.19", "entity": "Attachment", "table": "attachments"},
              {"task_id": "5.20", "entity": "Reimbursement", "table": "reimbursement_requests"},
              {"task_id": "5.21", "entity": "ChargingStation", "table": "charging_stations"},
              {"task_id": "5.22", "entity": "ChargingSession", "table": "charging_sessions"},
              {"task_id": "5.23", "entity": "DamageReport", "table": "damage_reports"}
            ],
            "action": "Create repository extending BaseRepository with tenant isolation",
            "estimated_time": "6h"
          }
        }
      }
    },
    "phase_3_verification": {
      "agent_team_6_testing": {
        "agent_type": "autonomous-coder",
        "agent_count": 1,
        "parallel_execution": false,
        "tasks": {
          "agent_6a": {
            "name": "Verification_Testing",
            "priority": "MEDIUM",
            "assignment": [
              {"task_id": "6.1", "test": "Worker Threads", "time": "3h"},
              {"task_id": "6.2", "test": "Redis Caching", "time": "2h"},
              {"task_id": "6.3", "test": "Error Boundaries", "time": "3h"}
            ],
            "action": "Run comprehensive verification tests",
            "estimated_time": "8h"
          }
        }
      }
    },
    "execution_plan": {
      "step_1_setup": {
        "description": "Setup Azure VM environment",
        "actions": [
          "SSH to VM: azureuser@172.191.51.49",
          "Pull latest Fleet code from GitHub",
          "Install dependencies",
          "Setup autonomous agent runtime"
        ]
      },
      "step_2_parallel_phase1": {
        "description": "Run Phase 1 agents in parallel (9 agents)",
        "agents": ["1a", "1b", "1c", "2a", "2b", "2c", "2d", "3a", "3b"],
        "estimated_time": "12-14h",
        "coordination": "Agent 2d waits for 2a-2c to complete"
      },
      "step_3_parallel_phase2": {
        "description": "Run Phase 2 agents in parallel (5 agents)",
        "agents": ["4a", "4b", "5a", "5b", "5c"],
        "estimated_time": "10-12h",
        "dependencies": "Starts after Phase 1 completes"
      },
      "step_4_verification": {
        "description": "Run verification tests",
        "agents": ["6a"],
        "estimated_time": "8h",
        "dependencies": "Starts after Phase 2 completes"
      },
      "step_5_reporting": {
        "description": "Generate final honest completion report",
        "actions": [
          "Run security test suite",
          "Generate coverage report",
          "Create honest completion assessment",
          "Commit all changes to git"
        ]
      }
    },
    "monitoring": {
      "progress_tracking": {
        "dashboard_url": "http://172.191.51.49:8080/remediation-progress",
        "log_files": [
          "/home/azureuser/agent-workspace/logs/agent-*.log",
          "/home/azureuser/agent-workspace/remediation-progress.json"
        ],
        "real_time_updates": "WebSocket on port 8081"
      },
      "alerts": {
        "agent_failure": "Send notification if agent fails 3 times",
        "completion": "Send notification on phase completion",
        "final_report": "Email final report to user"
      }
    }
  }
}
