FROM node:20-alpine

WORKDIR /app

# Install only socket.io (no full package.json)
RUN npm install socket.io@4.8.1

# Copy emulator
COPY dispatch-emulator.js .

EXPOSE 8083

USER node

CMD ["node", "dispatch-emulator.js"]
