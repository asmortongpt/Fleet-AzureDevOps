apiVersion: v1
kind: ConfigMap
metadata:
  name: fleet-config
  namespace: fleet-management
data:
  # Application Configuration
  NODE_ENV: "production"
  LOG_LEVEL: "info"
  PORT: "3000"
  
  # Feature Flags - Controlled by Customer Module Selection
  ENABLE_GIS_MAPPING: "true"
  ENABLE_ROUTE_OPTIMIZATION: "true"
  ENABLE_VIDEO_TELEMATICS: "true"
  ENABLE_EV_CHARGING: "true"
  ENABLE_POLICY_ENGINE: "true"
  ENABLE_AI_ASSISTANT: "true"
  
  # Multi-Tenant Configuration
  MULTI_TENANT_ENABLED: "true"
  TENANT_ISOLATION_MODE: "row-level"
  
  # Security Configuration
  SESSION_TIMEOUT: "1800"
  MFA_REQUIRED: "false"
  PASSWORD_MIN_LENGTH: "12"
  PASSWORD_ROTATION_DAYS: "90"
  
  # Database Configuration
  DB_HOST: "fleet-postgres-service"
  DB_PORT: "5432"
  DB_NAME: "fleetdb"
  DB_POOL_SIZE: "20"
  DB_SSL_MODE: "require"
  
  # Redis Configuration
  REDIS_HOST: "fleet-redis-service"
  REDIS_PORT: "6379"
  REDIS_TTL: "3600"
  
  # External APIs
  WEATHER_API_URL: "https://api.weather.gov"
  TRAFFIC_API_ENABLED: "true"
  
  # Performance
  MAX_REQUEST_SIZE: "50mb"
  REQUEST_TIMEOUT: "30000"
  RATE_LIMIT_WINDOW: "900000"
  RATE_LIMIT_MAX: "100"
  
  # Monitoring
  METRICS_ENABLED: "true"
  METRICS_PORT: "9090"
  HEALTH_CHECK_PATH: "/health"
  
  # Azure Configuration
  AZURE_REGION: "eastus"
  AZURE_STORAGE_ACCOUNT: "fleetmanagementstorage"
  
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: module-config
  namespace: fleet-management
data:
  modules.json: |
    {
      "enabledModules": {
        "core": true,
        "gis-mapping": true,
        "advanced-routing": true,
        "telematics": true,
        "video-telematics": true,
        "ev-charging": true,
        "maintenance": true,
        "procurement": true,
        "safety-compliance": true,
        "policy-automation": true,
        "communications": true,
        "financial": true,
        "analytics": true
      },
      "moduleRoutes": {
        "core": ["/", "/dashboard", "/gps-tracking", "/people", "/garage", "/fuel", "/workbench"],
        "gis-mapping": ["/gis-map", "/map-layers", "/geofences"],
        "advanced-routing": ["/route-optimization", "/routes"],
        "telematics": ["/vehicle-telemetry"],
        "video-telematics": ["/video-telematics"],
        "ev-charging": ["/ev-charging"],
        "maintenance": ["/predictive-maintenance", "/maintenance-scheduling"],
        "procurement": ["/vendor-management", "/parts-inventory", "/purchase-orders", "/invoices"],
        "safety-compliance": ["/osha-forms", "/form-builder"],
        "policy-automation": ["/policy-engine"],
        "communications": ["/ai-assistant", "/teams-integration", "/email-center", "/communication-log"],
        "financial": ["/receipt-processing", "/mileage"],
        "analytics": ["/comprehensive", "/driver-mgmt"]
      }
    }
