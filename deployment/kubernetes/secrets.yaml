apiVersion: v1
kind: Secret
metadata:
  name: fleet-secrets
  namespace: fleet-management
type: Opaque
stringData:
  # Database Credentials (Base64 encoded in production)
  DB_USERNAME: "fleetadmin"
  DB_PASSWORD: "CHANGE_ME_IN_PRODUCTION"
  
  # Redis Password
  REDIS_PASSWORD: "CHANGE_ME_IN_PRODUCTION"
  
  # JWT Secrets
  JWT_SECRET: "CHANGE_ME_IN_PRODUCTION_USE_STRONG_SECRET"
  JWT_REFRESH_SECRET: "CHANGE_ME_IN_PRODUCTION_USE_STRONG_SECRET"
  
  # Encryption Keys
  ENCRYPTION_KEY: "CHANGE_ME_32_CHARACTER_KEY_12345"
  ENCRYPTION_IV: "CHANGE_ME_16_CHARS"
  
  # External API Keys
  SMARTCAR_CLIENT_ID: "CHANGE_ME_SMARTCAR_CLIENT_ID"
  SMARTCAR_CLIENT_SECRET: "CHANGE_ME_SMARTCAR_SECRET"
  SMARTCAR_REDIRECT_URI: "https://fleet.example.com/api/smartcar/callback"
  
  MICROSOFT_GRAPH_CLIENT_ID: "CHANGE_ME_MS_CLIENT_ID"
  MICROSOFT_GRAPH_CLIENT_SECRET: "CHANGE_ME_MS_SECRET"
  MICROSOFT_GRAPH_TENANT_ID: "CHANGE_ME_MS_TENANT_ID"
  
  GOOGLE_MAPS_API_KEY: "CHANGE_ME_GOOGLE_MAPS_KEY"
  HERE_MAPS_API_KEY: "CHANGE_ME_HERE_MAPS_KEY"
  
  # Azure Storage
  AZURE_STORAGE_CONNECTION_STRING: "CHANGE_ME_AZURE_CONNECTION_STRING"
  AZURE_STORAGE_CONTAINER_NAME: "fleet-uploads"
  
  # Email Service (SendGrid/SMTP)
  EMAIL_SERVICE_API_KEY: "CHANGE_ME_EMAIL_API_KEY"
  EMAIL_FROM_ADDRESS: "noreply@fleet.example.com"
  
  # SMS Service (Twilio)
  TWILIO_ACCOUNT_SID: "CHANGE_ME_TWILIO_SID"
  TWILIO_AUTH_TOKEN: "CHANGE_ME_TWILIO_TOKEN"
  TWILIO_PHONE_NUMBER: "+1234567890"
  
  # Monitoring & Logging
  DATADOG_API_KEY: "CHANGE_ME_DATADOG_KEY"
  SENTRY_DSN: "CHANGE_ME_SENTRY_DSN"
  
---
# Azure Key Vault Secret Provider Class (Recommended for Production)
apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: fleet-azure-keyvault
  namespace: fleet-management
spec:
  provider: azure
  parameters:
    usePodIdentity: "false"
    useVMManagedIdentity: "true"
    userAssignedIdentityID: ""
    keyvaultName: "fleet-keyvault"
    cloudName: ""
    objects: |
      array:
        - |
          objectName: db-password
          objectType: secret
          objectVersion: ""
        - |
          objectName: jwt-secret
          objectType: secret
          objectVersion: ""
        - |
          objectName: encryption-key
          objectType: secret
          objectVersion: ""
        - |
          objectName: smartcar-client-secret
          objectType: secret
          objectVersion: ""
    tenantId: "YOUR_AZURE_TENANT_ID"
  secretObjects:
    - secretName: fleet-keyvault-secrets
      type: Opaque
      data:
        - objectName: db-password
          key: DB_PASSWORD
        - objectName: jwt-secret
          key: JWT_SECRET
        - objectName: encryption-key
          key: ENCRYPTION_KEY
        - objectName: smartcar-client-secret
          key: SMARTCAR_CLIENT_SECRET
