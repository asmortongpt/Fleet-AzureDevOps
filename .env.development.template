# ============================================================================
# Fleet Application - Development Environment Configuration
# ============================================================================
# Last Updated: November 12, 2025
# Key Vault: fleet-secrets-dev-437bc9
# ============================================================================

# Environment
NODE_ENV=development
ENVIRONMENT=development

# ============================================================================
# Azure Key Vault Configuration
# ============================================================================
# The application will automatically fetch secrets from this vault
AZURE_KEY_VAULT_URI=https://fleet-secrets-dev-437bc9.vault.azure.net/

# Azure Authentication (for Key Vault access)
AZURE_CLIENT_ID=80fe6628-1dc4-41fe-894f-919b12ecc994
AZURE_TENANT_ID=0ec14b81-7b82-45ee-8f3d-cbc31ced5347
# Note: AZURE_CLIENT_SECRET should be set via environment variable, not committed

# ============================================================================
# Database Configuration (localhost for local development)
# ============================================================================
# These values override Key Vault for local development
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=fleet_dev

# Admin User (for migrations and schema changes only)
DB_ADMIN_USER=postgres
DB_ADMIN_PASSWORD=DevPassword123!
DB_ADMIN_POOL_SIZE=5

# Web App User (default for application operations - recommended)
DB_WEBAPP_USER=fleet_webapp_user
DB_WEBAPP_PASSWORD=DevWebAppPassword123!
DB_WEBAPP_POOL_SIZE=20

# Read-Only User (optional - for reporting and analytics)
DB_READONLY_USER=fleet_readonly_user
DB_READONLY_PASSWORD=DevReadOnlyPassword123!
DB_READONLY_POOL_SIZE=10

# Legacy - backward compatibility (uses admin credentials)
DATABASE_USER=postgres
DATABASE_PASSWORD=DevPassword123!

# Database Connection Settings
DB_SSL_ENABLED=false
DB_LOG_QUERIES=true
DB_HEALTH_CHECK_INTERVAL=60000

# ============================================================================
# Redis Configuration (localhost for local development)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=DevRedisPassword123!

# ============================================================================
# Application Configuration
# ============================================================================
PORT=3000
API_BASE_URL=http://localhost:3000/api
FRONTEND_URL=http://localhost:5173

# CORS (allow localhost for development)
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# ============================================================================
# Feature Flags (Development)
# ============================================================================
ENABLE_DEBUG_LOGGING=true
ENABLE_HOT_RELOAD=true
ENABLE_MOCK_DATA=true
ENABLE_API_DOCS=true

# ============================================================================
# Azure Maps (Development Key)
# ============================================================================
AZURE_MAPS_KEY=560t3GIDj2PBsHx1wDcgQ67VK6d6wgkdcHK0rTmTRhYUQzFizj4SJQQJ99BKACYeBjFbS4kUAAAgAZMP7TCI

# ============================================================================
# Azure OpenAI (Development Endpoint)
# ============================================================================
AZURE_OPENAI_ENDPOINT=https://fleet-openai-dev.openai.azure.com
# AZURE_OPENAI_KEY will be fetched from Key Vault

# ============================================================================
# Email Configuration (Development - uses Ethereal for testing)
# ============================================================================
SMTP_HOST=smtp.ethereal.email
SMTP_PORT=587
SMTP_USER=development@fleet.test
# SMTP_PASSWORD will be fetched from Key Vault or use test account

# ============================================================================
# Monitoring & Logging
# ============================================================================
LOG_LEVEL=debug
ENABLE_SENTRY=false
ENABLE_APP_INSIGHTS=false

# ============================================================================
# Security Settings (Relaxed for Development)
# ============================================================================
SESSION_DURATION=7d
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=30d
REQUIRE_2FA=false
RATE_LIMIT_ENABLED=false

# ============================================================================
# Notes for Local Development
# ============================================================================
# 1. Copy this file to .env.development (not tracked by git)
# 2. Update AZURE_CLIENT_SECRET with your service principal secret
# 3. Ensure PostgreSQL and Redis are running locally:
#    - PostgreSQL: docker run -p 5432:5432 -e POSTGRES_PASSWORD=DevPassword123! postgres:15
#    - Redis: docker run -p 6379:6379 redis:7
# 4. Run migrations: npm run migrate:dev
# 5. Start application: npm run dev
