import{r as e,j as s,bH as t,bI as a,bJ as r,bK as n,C as i,b8 as l,aP as o,bL as d,ao as c,br as m,ar as x,aK as u,b5 as h,ba as f,at as p,y as g,ah as b,as as j,bM as v,ab as N,bt as w,aJ as y,z as T,R as C}from"./react-core-hQu9tqS1.js";import{P as S}from"./ProfessionalFleetMap-DPQoniTv.js";import{p as k,h as A,S as L,B as E,u as P,I as M,q as I}from"./index-BDwglPMF.js";import{S as O,a as R,b as D,c as F,d as z}from"./sheet-B4c1gADU.js";import{u as _}from"./useDispatchSocket-C_8Ly_Ll.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./MaintenanceRequestDialog-Rxhi54iS.js";import"./index-savvei9t.js";import"./label-C9sYRYKW.js";import"./ui-radix-C-X5Qx_8.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./select-Bmd3s7f4.js";import"./ui-menus--48tEbqQ.js";import"./ui-dialogs-C2yTnBPV.js";import"./textarea-BOBjqKNu.js";import"./GoogleMap-BAYip6gy.js";import"./switch-9MiV1CpI.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";const U=({open:l,onOpenChange:o})=>{const[d,c]=e.useState(null),[m,x]=e.useState(!1),[u,h]=e.useState(!1),[f,p]=e.useState([]),g=_({channelId:d||void 0,autoConnect:l,onEmergencyAlert:e=>{},onTransmission:e=>{}}),b=function(s={}){const{onAudioChunk:t,onTransmissionStart:a,onTransmissionEnd:r,chunkInterval:n=100,enableKeyboardShortcut:i=!0}=s,[l,o]=e.useState({isTransmitting:!1,isPTTActive:!1,audioLevel:0,error:null}),d=e.useRef(null),c=e.useRef(null),m=e.useRef([]),x=e.useRef(null),u=e.useRef(null),h=e.useRef(null),f=e.useRef(null),p=e.useCallback(e=>{try{return x.current&&"closed"!==x.current.state&&x.current.close(),x.current=new AudioContext,u.current=x.current.createAnalyser(),u.current.fftSize=2048,u.current.smoothingTimeConstant=.8,x.current.createMediaStreamSource(e).connect(u.current),!0}catch(s){return k.error("[usePTT] Failed to initialize audio analysis:",s),!1}},[]),g=e.useCallback(()=>{if(!u.current||!l.isTransmitting)return void o(e=>({...e,audioLevel:0}));const e=new Uint8Array(u.current.frequencyBinCount);u.current.getByteFrequencyData(e);const s=e.reduce((e,s)=>e+s,0)/e.length,t=Math.min(s/128,1);o(e=>({...e,audioLevel:t})),h.current=requestAnimationFrame(g)},[l.isTransmitting]);e.useEffect(()=>(l.isTransmitting&&g(),()=>{null!==h.current&&(cancelAnimationFrame(h.current),h.current=null)}),[l.isTransmitting,g]);const b=e.useCallback(async()=>{if(!l.isTransmitting)try{o(e=>({...e,isPTTActive:!0,error:null}));const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:48e3}});if(d.current=e,!p(e))throw new Error("Failed to initialize audio analysis");const s=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm",r=new MediaRecorder(e,{mimeType:s});c.current=r,m.current=[];const i=`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;f.current=i,r.ondataavailable=e=>{if(e.data&&e.data.size>0&&(m.current.push(e.data),t)){const s=new FileReader;s.onloadend=()=>{const e=s.result.split(",")[1]||"";t(e)},s.readAsDataURL(e.data)}},r.start(n),o(e=>({...e,isTransmitting:!0})),a?.(i),k.debug("[usePTT] Transmission started:",i)}catch(e){k.error("[usePTT] Failed to start PTT:",e),o(s=>({...s,isPTTActive:!1,error:e instanceof Error?e.message:"Failed to access microphone"})),d.current&&(d.current.getTracks().forEach(e=>e.stop()),d.current=null)}},[l.isTransmitting,n,t,a,p]),j=e.useCallback(async()=>{if(l.isTransmitting)try{k.debug("[usePTT] Stopping transmission"),o(e=>({...e,isPTTActive:!1})),c.current&&"inactive"!==c.current.state&&c.current.stop(),d.current&&(d.current.getTracks().forEach(e=>e.stop()),d.current=null),x.current&&"closed"!==x.current.state&&(await x.current.close(),x.current=null);const e=new Blob(m.current,{type:c.current?.mimeType||"audio/webm"});r?.(e),o(e=>({...e,isTransmitting:!1,audioLevel:0})),k.debug("[usePTT] Transmission ended")}catch(e){k.error("[usePTT] Error stopping PTT:",e),o(s=>({...s,isTransmitting:!1,isPTTActive:!1,audioLevel:0,error:e instanceof Error?e.message:"Failed to stop transmission"}))}finally{f.current=null,m.current=[]}},[l.isTransmitting,r]),v=e.useCallback(()=>{l.isTransmitting?j():b()},[l.isTransmitting,b,j]);return e.useEffect(()=>{if(!i)return;const e=e=>{"Space"!==e.code||l.isTransmitting||e.target!==document.body||(e.preventDefault(),b())},s=e=>{"Space"===e.code&&l.isTransmitting&&(e.preventDefault(),j())};return document.addEventListener("keydown",e),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)}},[i,l.isTransmitting,b,j]),e.useEffect(()=>()=>{l.isTransmitting&&j()},[l.isTransmitting,j]),e.useEffect(()=>{if(l.error){const e=setTimeout(()=>{o(e=>({...e,error:null}))},5e3);return()=>clearTimeout(e)}return()=>{}},[l.error]),{...l,startPTT:b,stopPTT:j,togglePTT:v,currentTransmissionId:f.current}}({onAudioChunk:e=>{b.currentTransmissionId&&g.sendAudioChunk(e,b.currentTransmissionId)},onTransmissionStart:()=>{},onTransmissionEnd:e=>{if(b.currentTransmissionId){const s=new FileReader;s.onloadend=()=>{const e=s.result.split(",")[1];g.endTransmission(b.currentTransmissionId,e)},s.readAsDataURL(e)}},enableKeyboardShortcut:l});return e.useEffect(()=>{p([{id:"ch-1",name:"Operations Main",status:"ACTIVE",frequency:"450.025"},{id:"ch-2",name:"Maintenance",status:"ACTIVE",frequency:"451.100"},{id:"ch-3",name:"Security",status:"BUSY",frequency:"452.325"},{id:"ch-4",name:"Logistics",status:"ACTIVE",frequency:"453.550"}]),c("ch-1")},[]),s.jsx(O,{open:l,onOpenChange:o,children:s.jsxs(R,{className:"w-[400px] sm:w-[480px] flex flex-col p-0 text-foreground border-l glass-panel border-white/10",side:"right",style:{backgroundColor:"transparent"},children:[s.jsxs(D,{className:"p-6 border-b border-white/10 bg-black/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(F,{className:"text-xl font-semibold flex items-center gap-2 text-white",children:[s.jsx(t,{className:"w-6 h-6 text-emerald-400",weight:"fill"}),"Dispatch Radio"]}),s.jsx("div",{className:"w-3 h-3 rounded-full "+(g.isConnected?"bg-green-500 animate-pulse":"bg-red-500")})]}),s.jsx(z,{children:"Live PTT communication and fleet alerts."})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"p-6 flex flex-col items-center gap-4 border-b bg-card",children:[s.jsx("div",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:f.find(e=>e.id===d)?.name||"Select Channel"}),s.jsxs(A,{className:`h-24 w-full rounded-2xl relative overflow-hidden transition-all duration-300 flex flex-col items-center justify-center gap-2 ${b.isTransmitting||u?"bg-red-500/20 border-red-500/50 text-red-500 shadow-[0_0_30px_rgba(239,68,68,0.3)]":"bg-emerald-500/10 border-emerald-500/20 text-emerald-500 hover:bg-emerald-500/20 hover:border-emerald-500/40"} border-2`,onMouseDown:()=>{h(!0),b.startPTT()},onMouseUp:()=>{h(!1),b.stopPTT()},onMouseLeave:()=>{h(!1),b.stopPTT()},onTouchStart:()=>{h(!0),b.startPTT()},onTouchEnd:()=>{h(!1),b.stopPTT()},disabled:!d,children:[(b.isTransmitting||u)&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center gap-1 opacity-50",children:[...Array(12)].map((e,t)=>s.jsx("div",{className:"w-1.5 bg-red-500 h-4 rounded-full animate-waveform",style:{animationDelay:.05*t+"s"}},t))}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx(a,{className:"w-8 h-8 mb-1 "+(b.isTransmitting||u?"animate-pulse":""),weight:"fill"}),s.jsx("span",{className:"font-bold tracking-wider font-mono",children:b.isTransmitting||u?"TRANSMITTING":"PUSH TO TALK"})]})]}),s.jsxs(A,{variant:"ghost",size:"sm",onClick:()=>x(!m),className:m?"text-red-500":"text-muted-foreground",children:[s.jsx(m?r:n,{className:"w-4 h-4 mr-2"}),m?"Audio Muted":"Audio Active"]})]}),s.jsxs("div",{className:"flex-1 min-h-0 grid grid-cols-2 divide-x",children:[s.jsxs("div",{className:"flex flex-col bg-muted/5",children:[s.jsx("div",{className:"p-3 text-xs font-semibold text-muted-foreground uppercase bg-muted/10 border-b",children:"Channels"}),s.jsx(L,{className:"flex-1",children:s.jsx("div",{className:"p-2 space-y-1",children:f.map(e=>s.jsxs("button",{onClick:()=>c(e.id),className:`\n                                        w-full text-left p-2 rounded-md text-sm transition-colors flex items-center justify-between\n                                        ${d===e.id?"bg-primary/10 text-primary font-medium":"hover:bg-muted text-muted-foreground"}\n                                    `,children:[s.jsx("span",{children:e.name}),"BUSY"===e.status&&s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"})]},e.id))})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"p-3 text-xs font-semibold text-muted-foreground uppercase bg-muted/10 border-b",children:"Recent Activity"}),s.jsx(L,{className:"flex-1",children:s.jsx("div",{className:"divide-y",children:[1,2,3].map((e,t)=>s.jsxs("div",{className:"p-3 hover:bg-muted/5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-bold",children:"Unit 45"}),s.jsx("span",{className:"text-[10px] text-muted-foreground",children:"10:42 AM"})]}),s.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:'"Arrived at destination. Offloading cargo now."'}),s.jsx("div",{className:"flex items-center gap-1 mt-1",children:s.jsx(E,{variant:"outline",className:"text-[10px] h-4 px-1",children:"Normal"})})]},t))})})]})]})]}),s.jsx("div",{className:"p-4 border-t bg-destructive/5",children:s.jsxs(A,{variant:"destructive",className:"w-full font-bold",size:"lg",children:[s.jsx(i,{className:"w-5 h-5 mr-2"}),"EMERGENCY ALERT"]})})]})})},$=({open:t,onOpenChange:a})=>{const{drivers:r=[],staff:n=[]}=P(),[i,x]=e.useState(""),[u,h]=e.useState("drivers"),f=r.filter(e=>!i||e.name&&e.name.toLowerCase().includes(i.toLowerCase())||e.employeeId&&e.employeeId.toLowerCase().includes(i.toLowerCase())),p=n.filter(e=>!i||e.name&&e.name.toLowerCase().includes(i.toLowerCase())||e.employeeId&&e.employeeId.toLowerCase().includes(i.toLowerCase()));return s.jsx(O,{open:t,onOpenChange:a,children:s.jsxs(R,{className:"w-[400px] sm:w-[540px] flex flex-col p-0 text-foreground glass-panel border-white/10",side:"left",style:{backgroundColor:"transparent"},children:[s.jsxs(D,{className:"p-6 border-b border-white/10 bg-black/20",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(F,{className:"text-xl font-semibold text-white",children:"Team Roster"})}),s.jsx(z,{children:"Manage drivers and fleet staff directly from operations."}),s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{className:"flex bg-muted/50 p-1 rounded-lg",children:[s.jsxs("button",{className:"flex-1 text-sm font-medium py-1.5 px-3 rounded-md transition-all "+("drivers"===u?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),onClick:()=>h("drivers"),children:["Drivers (",r.length,")"]}),s.jsxs("button",{className:"flex-1 text-sm font-medium py-1.5 px-3 rounded-md transition-all "+("staff"===u?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),onClick:()=>h("staff"),children:["Staff (",n.length,")"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(M,{placeholder:`Search ${u}...`,value:i,onChange:e=>x(e.target.value),className:"pl-9"})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:"drivers"===u?0===f.length?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[s.jsx(o,{className:"w-8 h-8 mb-2 opacity-50"}),s.jsx("p",{children:"No drivers found"})]}):f.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors group",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-semibold text-sm",children:e.name?e.name.split(" ").map(e=>e[0]).join("").substring(0,2):"??"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:e.name}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(E,{variant:"outline",className:"h-5 px-1.5",children:e.licenseType||"N/A"}),s.jsxs("span",{className:"flex items-center gap-1 "+("active"===e.status?"text-green-500":"text-gray-500"),children:["â€¢ ",e.status]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[s.jsx(A,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>window.location.href=`tel:${e.phone}`,title:"Call",children:s.jsx(d,{className:"w-4 h-4"})}),s.jsx(A,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>window.location.href=`mailto:${e.email}`,title:"Email",children:s.jsx(c,{className:"w-4 h-4"})})]})]},e.id)):p.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors group",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center font-semibold text-sm",children:e.name?e.name.split(" ").map(e=>e[0]).join("").substring(0,2):"??"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:e.name}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.role}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:e.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[s.jsx(A,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>window.location.href=`tel:${e.phone}`,title:"Call",children:s.jsx(d,{className:"w-4 h-4"})}),s.jsx(A,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>window.location.href=`mailto:${e.email}`,title:"Email",children:s.jsx(c,{className:"w-4 h-4"})})]})]},e.id))}),s.jsx("div",{className:"p-4 border-t bg-muted/10",children:s.jsxs(A,{className:"w-full",variant:"outline",children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"Add New Person"]})})]})})},V=({open:e,onOpenChange:t})=>{const{fuelTransactions:a=[]}=P(),r=a.length>0?a:Array.from({length:10}).map((e,s)=>({id:`tx-${s}`,date:new Date(Date.now()-864e5*s).toISOString(),vehicleNumber:`Unit ${100+s}`,station:s%2==0?"Shell Station 42":"Chevron West",gallons:15+10*Math.random(),pricePerGallon:3.5+Math.random(),totalCost:65+20*Math.random()})),n=r.reduce((e,s)=>e+(s.totalCost||0),0),i=r.reduce((e,s)=>e+(s.gallons||0),0),l=i>0?n/i:0;return s.jsx(O,{open:e,onOpenChange:t,children:s.jsxs(R,{className:"w-[400px] sm:w-[540px] flex flex-col p-0 text-foreground glass-panel border-white/10",side:"right",style:{backgroundColor:"transparent"},children:[s.jsxs(D,{className:"p-6 border-b border-white/10 bg-black/20",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs(F,{className:"text-xl font-semibold flex items-center gap-2 text-white",children:[s.jsx(x,{className:"w-6 h-6 text-emerald-400",weight:"fill"}),"Fuel Intelligence"]})}),s.jsx(z,{children:"Real-time fuel consumption and station analytics."})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto bg-muted/5",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4",children:[s.jsxs("div",{className:"bg-card p-4 rounded-xl border shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-xs font-medium uppercase tracking-wider mb-2",children:[s.jsx(u,{className:"w-4 h-4"})," Total Spend"]}),s.jsxs("div",{className:"text-2xl font-bold font-mono",children:["$",n.toLocaleString(void 0,{maximumFractionDigits:0})]}),s.jsxs("div",{className:"text-xs text-green-500 flex items-center mt-1",children:[s.jsx(h,{className:"w-3 h-3 mr-1"})," +2.4% vs last week"]})]}),s.jsxs("div",{className:"bg-card p-4 rounded-xl border shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-xs font-medium uppercase tracking-wider mb-2",children:[s.jsx(f,{className:"w-4 h-4"})," Volume (Gal)"]}),s.jsx("div",{className:"text-2xl font-bold font-mono",children:Math.round(i).toLocaleString()}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Avg $",l.toFixed(2)," / gal"]})]})]}),s.jsxs("div",{className:"px-4 pb-4",children:[s.jsx("div",{className:"text-sm font-semibold mb-3 px-1",children:"Recent Transactions"}),s.jsx("div",{className:"bg-card rounded-xl border shadow-sm overflow-hidden",children:r.map((e,t)=>s.jsxs("div",{className:"p-3 flex items-center justify-between border-b last:border-0 hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-700",children:s.jsx(x,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-sm",children:e.vehicleNumber}),s.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(p,{className:"w-3 h-3"})," ",e.station]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-mono font-medium text-sm",children:["$",e.totalCost?.toFixed(2)]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.gallons?.toFixed(1)," gal"]})]})]},e.id))})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-3",children:[s.jsxs("h4",{className:"font-semibold text-blue-800 text-sm mb-1 flex items-center gap-2",children:[s.jsx(h,{className:"w-4 h-4"})," Optimization Insight"]}),s.jsx("p",{className:"text-xs text-blue-600",children:'Average fuel price at "Shell Station 42" is $0.15 higher than regional average. Consider redirecting units to "Chevron West".'})]})})]})]})})},K=({open:t,onOpenChange:a})=>{const{vehicles:r=[]}=P(),[n,l]=e.useState("all"),o=r.map(e=>{const s=Math.random()>.8,t=Math.random()>.6;return{id:e.id,vehicleName:e.name,status:s?"overdue":t?"due-soon":"good",lastService:"2023-10-15",nextService:s?"2023-12-01":"2024-02-15",task:"Regular Service B"}}).sort((e,s)=>{const t=e=>"overdue"===e?0:"due-soon"===e?1:2;return t(e.status)-t(s.status)}),d=o.filter(e=>"all"===n||e.status===n);return s.jsx(O,{open:t,onOpenChange:a,children:s.jsxs(R,{className:"w-[400px] sm:w-[540px] flex flex-col p-0 text-foreground glass-panel border-white/10",side:"right",style:{backgroundColor:"transparent"},children:[s.jsxs(D,{className:"p-6 border-b border-white/10 bg-black/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(F,{className:"text-xl font-semibold flex items-center gap-2 text-white",children:[s.jsx(g,{className:"w-6 h-6 text-orange-500",weight:"fill"}),"Maintenance"]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(E,{variant:"destructive",className:"font-mono",children:[o.filter(e=>"overdue"===e.status).length," CRITICAL"]})})]}),s.jsx(z,{children:"Track service schedules and vehicle health."}),s.jsxs("div",{className:"mt-4 flex gap-2 overflow-x-auto pb-2",children:[s.jsx("button",{onClick:()=>l("all"),className:"px-3 py-1 rounded-full text-xs font-medium border transition-colors "+("all"===n?"bg-orange-500 text-white border-orange-500":"bg-background hover:bg-muted text-muted-foreground"),children:"All Tasks"}),s.jsx("button",{onClick:()=>l("overdue"),className:"px-3 py-1 rounded-full text-xs font-medium border transition-colors "+("overdue"===n?"bg-red-500 text-white border-red-500":"bg-background hover:bg-muted text-muted-foreground"),children:"Overdue"}),s.jsx("button",{onClick:()=>l("due-soon"),className:"px-3 py-1 rounded-full text-xs font-medium border transition-colors "+("due-soon"===n?"bg-amber-500 text-white border-amber-500":"bg-background hover:bg-muted text-muted-foreground"),children:"Due Soon"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===d.length?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[s.jsx(b,{className:"w-8 h-8 mb-2 opacity-50 text-green-500"}),s.jsx("p",{children:"All systems operational"})]}):d.map((e,t)=>s.jsxs("div",{className:"flex flex-col p-4 rounded-xl border bg-card hover:bg-accent/50 transition-all group relative overflow-hidden",children:["overdue"===e.status&&s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-red-500"}),"due-soon"===e.status&&s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-amber-500"}),s.jsxs("div",{className:"flex justify-between items-start mb-2 pl-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-sm",children:e.vehicleName}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.task})]}),"overdue"===e.status&&s.jsxs(E,{variant:"destructive",className:"flex items-center gap-1",children:[s.jsx(i,{className:"w-3 h-3"})," Overdue"]}),"due-soon"===e.status&&s.jsxs(E,{variant:"secondary",className:"bg-amber-100 text-amber-800 hover:bg-amber-200",children:[s.jsx(j,{className:"w-3 h-3 mr-1"})," Due Soon"]}),"good"===e.status&&s.jsx(E,{variant:"outline",className:"text-green-600 border-green-200",children:"On Schedule"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2 pl-2 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(v,{className:"w-3 h-3"}),s.jsxs("span",{children:["Last: ",e.lastService]})]}),s.jsxs("div",{className:"font-medium text-foreground",children:["Next: ",e.nextService]})]}),s.jsx("div",{className:"mt-3 pl-2 flex gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:s.jsx(A,{size:"sm",variant:"default",className:"w-full h-7 text-xs",children:"Schedule Service"})})]},t))})]})})},q=({open:t,onOpenChange:a,onVehicleSelect:r})=>{const{vehicles:n=[],addVehicle:i}=P(),[o,d]=e.useState(""),[c,u]=e.useState("all"),h=n.filter(e=>(!o||e.name&&e.name.toLowerCase().includes(o.toLowerCase())||e.id&&e.id.toLowerCase().includes(o.toLowerCase()))&&("all"===c||e.status===c)),f=e=>{switch(e){case"active":return"text-green-500 border-green-200 bg-green-50";case"maintenance":return"text-amber-500 border-amber-200 bg-amber-50";case"inactive":return"text-gray-500 border-gray-200 bg-gray-50";default:return"text-blue-500 border-blue-200 bg-blue-50"}};return s.jsx(O,{open:t,onOpenChange:a,children:s.jsxs(R,{className:"w-[400px] sm:w-[540px] flex flex-col p-0 text-foreground glass-panel border-white/10",side:"left",style:{backgroundColor:"transparent"},children:[s.jsxs(D,{className:"p-6 border-b border-white/10 bg-black/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(F,{className:"text-xl font-semibold flex items-center gap-2 text-white",children:[s.jsx(N,{className:"w-6 h-6 text-emerald-400",weight:"fill"}),"Vehicle Fleet"]}),s.jsxs(E,{variant:"secondary",className:"font-mono",children:[n.length," UNITS"]})]}),s.jsx(z,{children:"Monitor and manage your entire fleet inventory."}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(M,{placeholder:"Search unit #, VIN, or make...",value:o,onChange:e=>d(e.target.value),className:"pl-9"})]}),s.jsx(A,{variant:"outline",size:"icon",children:s.jsx(w,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 noscroll",children:["all","active","maintenance","inactive"].map(e=>s.jsx("button",{onClick:()=>u(e),className:`\n                    px-3 py-1 rounded-full text-xs font-medium border transition-colors whitespace-nowrap\n                    ${c===e?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-muted text-muted-foreground border-border"}\n                  `,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===h.length?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[s.jsx(N,{className:"w-8 h-8 mb-2 opacity-50"}),s.jsx("p",{children:"No vehicles found"})]}):h.map(e=>s.jsxs("div",{className:"flex flex-col p-4 rounded-xl border bg-card hover:bg-accent/50 transition-all cursor-pointer group",onClick:()=>r?.(e),children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-primary",children:s.jsx(N,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-base",children:e.name||e.id}),s.jsxs("div",{className:"text-xs text-muted-foreground font-mono",children:["VIN: ",e.id.toUpperCase()]})]})]}),s.jsx(E,{variant:"outline",className:f(e.status),children:e.status})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(y,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.fuelLevel||0,"% Fuel"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(x,{className:"w-4 h-4"}),s.jsx("span",{children:e.fuelType||"Unknown"})]})]})]},e.id))}),s.jsx("div",{className:"p-4 border-t bg-muted/10",children:s.jsxs(A,{className:"w-full",onClick:()=>i?.({}),children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"Add New Vehicle"]})})]})})},B=({activePanel:a,onPanelSelect:r})=>{const[n,i]=e.useState(null),l=[{id:"fleet",icon:N,label:"Fleet"},{id:"team",icon:T,label:"Team"},{id:"comms",icon:t,label:"Comms"},{id:"service",icon:g,label:"Service"},{id:"fuel",icon:x,label:"Fuel"}];return s.jsx("div",{className:"absolute bottom-12 left-1/2 -translate-x-1/2 z-40",children:s.jsx("div",{className:I("flex items-end gap-2 px-4 py-3 rounded-2xl","bg-slate-950/40 backdrop-blur-xl border border-white/10 shadow-2xl","transition-all duration-300 ease-out"),onMouseLeave:()=>i(null),children:l.map((e,t)=>{const l=n===t,o=null!==n&&1===Math.abs(n-t),d=a===e.id,c=e.icon;return s.jsxs("button",{onClick:()=>r(e.id),onMouseEnter:()=>i(t),className:I("group relative flex flex-col items-center justify-end transition-all duration-300 ease-out origin-bottom",l?"w-20 h-20":o?"w-16 h-16":"w-14 h-14"),children:[s.jsxs("div",{className:I("relative flex items-center justify-center rounded-xl transition-all duration-300","border border-white/5 shadow-lg overflow-hidden",l?"w-16 h-16 bg-white/10":o?"w-14 h-14 bg-white/5":"w-12 h-12 bg-slate-900/50",d&&"bg-emerald-500/20 border-emerald-500/60 shadow-[0_0_20px_rgba(16,185,129,0.4)]"),children:[d&&s.jsx("div",{className:"absolute top-1 right-1 w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse shadow-[0_0_5px_rgba(16,185,129,1)]"}),s.jsx(c,{className:I("transition-all duration-300",l?"w-8 h-8 text-white":"w-6 h-6 text-slate-400",d&&"text-emerald-400"),weight:d?"fill":"regular"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/10 to-transparent opacity-50 pointer-events-none"})]}),s.jsx("span",{className:I("absolute -top-10 px-2 py-1 rounded bg-slate-900/90 border border-white/10 text-xs font-medium text-white shadow-xl backdrop-blur-sm transition-all duration-200",l?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"),children:e.label})]},e.id)})})})},G=()=>{const{vehicles:t=[],facilities:a=[]}=P(),[r,n]=e.useState(null),i="fleet"===r,l="team"===r,o="service"===r,d="comms"===r,c="fuel"===r,[m,x]=e.useState(new Date);return C.useEffect(()=>{const e=setInterval(()=>x(new Date),1e3);return()=>clearInterval(e)},[]),s.jsxs("div",{className:"flex flex-col h-full bg-slate-950 overflow-hidden relative selection:bg-emerald-500/30",children:[s.jsx("div",{className:"absolute inset-0 z-0",children:s.jsx(S,{vehicles:t,facilities:a,height:"100%",onVehicleSelect:e=>{n("fleet")},showLegend:!0,enableRealTime:!0,variant:"immersive"})}),s.jsx("div",{className:"absolute top-4 right-4 z-10 animate-fade-in-down pointer-events-none",children:s.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-md border border-emerald-500/20 shadow-lg p-3 rounded-lg flex flex-col items-end gap-2 pointer-events-auto",children:[s.jsxs("div",{className:"font-mono text-2xl font-light text-white tracking-tighter",children:[m.toLocaleTimeString([],{hour12:!1}),s.jsx("span",{className:"text-xs text-slate-500 ml-1",children:"UTC"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-medium text-emerald-400",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),"ONLINE"]})}),s.jsx("div",{className:"h-6 overflow-hidden flex flex-col justify-end w-32 relative mask-gradient-top border-t border-white/5 pt-1",children:s.jsxs("div",{className:"text-[9px] font-mono text-emerald-500/70 animate-scroll-up space-y-0.5 leading-none text-right",children:[s.jsx("div",{children:"SYS_CHECK_OK"}),s.jsx("div",{children:"LINK_STABLE"}),s.jsx("div",{children:"UPDATING..."}),s.jsx("div",{children:"PACKET_492"}),s.jsx("div",{children:"V_TELEM_OK"}),s.jsx("div",{children:"SYS_CHECK_OK"})]})})]})}),s.jsx(B,{activePanel:r,onPanelSelect:e=>{n(s=>s===e?null:e)}}),s.jsx(q,{open:i,onOpenChange:e=>!e&&n(null)}),s.jsx($,{open:l,onOpenChange:e=>!e&&n(null)}),s.jsx(K,{open:o,onOpenChange:e=>!e&&n(null)}),s.jsx(U,{open:d,onOpenChange:e=>!e&&n(null)}),s.jsx(V,{open:c,onOpenChange:e=>!e&&n(null)})]})};export{G as default};
