function e(){const[e,H]=s.useState([]),[W,U]=s.useState(!0),[G,K]=s.useState(""),[Q,X]=s.useState("all"),[Y,Z]=s.useState("all"),[ee,se]=s.useState(!1),[ie,te]=s.useState(null),[ne,ae]=s.useState(!1),[le,re]=s.useState(!1),[ce,de]=s.useState([]),[oe,he]=s.useState([]),[xe,me]=s.useState({incident_title:"",incident_type:"accident",severity:"medium",incident_date:(new Date).toISOString().split("T")[0],incident_time:"",location:"",description:"",vehicle_id:"",driver_id:"",injuries_reported:!1,property_damage:!1,weather_conditions:"",road_conditions:""}),[je,ue]=s.useState({resolution_notes:"",root_cause:"",preventive_measures:""}),[ve,pe]=s.useState({action_description:"",action_type:"corrective",assigned_to:"",due_date:""});s.useEffect(()=>{ge()},[]);const ge=async()=>{try{U(!0);const e=new URLSearchParams;"all"!==Q&&e.append("severity",Q),"all"!==Y&&e.append("status",Y);const s=await h.get(`/api/incident-management?${e.toString()}`);H(s?.incidents??[])}catch(e){x.error("Error fetching incidents:",e),o.error("Failed to load incidents")}finally{U(!1)}},Ne=async e=>{try{const s=await h.get(`/api/incident-management/${e}`);de(s?.corrective_actions??[]),he(s?.timeline??[])}catch(s){x.error("Error fetching incident details:",s)}},ye=(e||[]).filter(e=>!(!(e.incident_title.toLowerCase().includes(G.toLowerCase())||e.description?.toLowerCase().includes(G.toLowerCase())||e.location?.toLowerCase().includes(G.toLowerCase()))||"all"!==Q&&e.severity!==Q||"all"!==Y&&e.status!==Y)),fe=e.length,_e=(e||[]).filter(e=>"open"===e.status||"investigating"===e.status).length,we=(e||[]).filter(e=>"critical"===e.severity).length,Ce=(e||[]).filter(e=>"resolved"===e.status||"closed"===e.status).length,be=e=>({low:"bg-gray-100 text-gray-700",medium:"bg-blue-100 text-blue-700",high:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"}[e]),Se=e=>({open:"bg-yellow-100 text-yellow-700",investigating:"bg-blue-100 text-blue-700",resolved:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-700"}[e]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Incident Management"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and investigate fleet incidents and safety events"})]}),i.jsxs(m,{open:ee,onOpenChange:se,children:[i.jsx(j,{asChild:!0,children:i.jsxs(u,{children:[i.jsx(t,{className:"w-4 h-4 mr-2"}),"Report Incident"]})}),i.jsxs(v,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(p,{children:[i.jsx(g,{children:"Report New Incident"}),i.jsx(N,{children:"Document an incident for investigation and resolution"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"incident-title",children:"Incident Title *"}),i.jsx(y,{id:"incident-title",value:xe.incident_title,onChange:e=>me({...xe,incident_title:e.target.value}),placeholder:"Vehicle collision on I-95"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"incident-type",children:"Incident Type *"}),i.jsxs(V,{value:xe.incident_type,onValueChange:e=>me({...xe,incident_type:e}),children:[i.jsx(R,{id:"incident-type",children:i.jsx(A,{})}),i.jsxs(O,{children:[i.jsx(P,{value:"accident",children:"Vehicle Accident"}),i.jsx(P,{value:"injury",children:"Employee Injury"}),i.jsx(P,{value:"property_damage",children:"Property Damage"}),i.jsx(P,{value:"near_miss",children:"Near Miss"}),i.jsx(P,{value:"safety_violation",children:"Safety Violation"}),i.jsx(P,{value:"equipment_failure",children:"Equipment Failure"}),i.jsx(P,{value:"environmental",children:"Environmental"}),i.jsx(P,{value:"other",children:"Other"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"severity",children:"Severity *"}),i.jsxs(V,{value:xe.severity,onValueChange:e=>me({...xe,severity:e}),children:[i.jsx(R,{id:"severity",children:i.jsx(A,{})}),i.jsxs(O,{children:[i.jsx(P,{value:"low",children:"Low"}),i.jsx(P,{value:"medium",children:"Medium"}),i.jsx(P,{value:"high",children:"High"}),i.jsx(P,{value:"critical",children:"Critical"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"incident-date",children:"Incident Date *"}),i.jsx(y,{id:"incident-date",type:"date",value:xe.incident_date,onChange:e=>me({...xe,incident_date:e.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"incident-time",children:"Time"}),i.jsx(y,{id:"incident-time",type:"time",value:xe.incident_time,onChange:e=>me({...xe,incident_time:e.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"location",children:"Location"}),i.jsx(y,{id:"location",value:xe.location,onChange:e=>me({...xe,location:e.target.value}),placeholder:"123 Main St, City, State"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"description",children:"Description"}),i.jsx(B,{id:"description",value:xe.description,onChange:e=>me({...xe,description:e.target.value}),placeholder:"Detailed description of what happened...",rows:4})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"vehicle",children:"Vehicle Involved"}),i.jsxs(V,{value:xe.vehicle_id,onValueChange:e=>me({...xe,vehicle_id:e}),children:[i.jsx(R,{id:"vehicle",children:i.jsx(A,{placeholder:"Select vehicle"})}),i.jsxs(O,{children:[i.jsx(P,{value:"vehicle-1",children:"Fleet-001"}),i.jsx(P,{value:"vehicle-2",children:"Fleet-002"}),i.jsx(P,{value:"vehicle-3",children:"Fleet-003"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"driver",children:"Driver Involved"}),i.jsxs(V,{value:xe.driver_id,onValueChange:e=>me({...xe,driver_id:e}),children:[i.jsx(R,{id:"driver",children:i.jsx(A,{placeholder:"Select driver"})}),i.jsxs(O,{children:[i.jsx(P,{value:"driver-1",children:"John Doe"}),i.jsx(P,{value:"driver-2",children:"Jane Smith"}),i.jsx(P,{value:"driver-3",children:"Bob Johnson"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"weather",children:"Weather Conditions"}),i.jsxs(V,{value:xe.weather_conditions,onValueChange:e=>me({...xe,weather_conditions:e}),children:[i.jsx(R,{id:"weather",children:i.jsx(A,{placeholder:"Select weather"})}),i.jsxs(O,{children:[i.jsx(P,{value:"clear",children:"Clear"}),i.jsx(P,{value:"cloudy",children:"Cloudy"}),i.jsx(P,{value:"rain",children:"Rain"}),i.jsx(P,{value:"snow",children:"Snow"}),i.jsx(P,{value:"fog",children:"Fog"}),i.jsx(P,{value:"ice",children:"Ice"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"road",children:"Road Conditions"}),i.jsxs(V,{value:xe.road_conditions,onValueChange:e=>me({...xe,road_conditions:e}),children:[i.jsx(R,{id:"road",children:i.jsx(A,{placeholder:"Select condition"})}),i.jsxs(O,{children:[i.jsx(P,{value:"dry",children:"Dry"}),i.jsx(P,{value:"wet",children:"Wet"}),i.jsx(P,{value:"snow",children:"Snow"}),i.jsx(P,{value:"ice",children:"Ice"}),i.jsx(P,{value:"construction",children:"Construction"})]})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"injuries",checked:xe.injuries_reported,onChange:e=>me({...xe,injuries_reported:e.target.checked}),className:"rounded"}),i.jsx(L,{htmlFor:"injuries",children:"Injuries Reported"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"damage",checked:xe.property_damage,onChange:e=>me({...xe,property_damage:e.target.checked}),className:"rounded"}),i.jsx(L,{htmlFor:"damage",children:"Property Damage"})]})]})]}),i.jsxs(f,{children:[i.jsx(u,{variant:"outline",onClick:()=>se(!1),children:"Cancel"}),i.jsx(u,{onClick:async()=>{if(xe.incident_title&&xe.incident_date)try{const e=await h.post("/api/incident-management",xe);e?.incident&&H(s=>[...s,e.incident]),o.success("Incident reported successfully"),se(!1),me({incident_title:"",incident_type:"accident",severity:"medium",incident_date:(new Date).toISOString().split("T")[0],incident_time:"",location:"",description:"",vehicle_id:"",driver_id:"",injuries_reported:!1,property_damage:!1,weather_conditions:"",road_conditions:""})}catch(e){x.error("Error creating incident:",e),o.error("Failed to report incident")}else o.error("Please fill in required fields")},children:"Report Incident"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs(_,{children:[i.jsx(w,{className:"pb-3",children:i.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Total Incidents"})}),i.jsxs(b,{children:[i.jsx("div",{className:"text-2xl font-bold",children:fe}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i.jsx(n,{className:"w-3 h-3"}),"All time"]})]})]}),i.jsxs(_,{children:[i.jsx(w,{className:"pb-3",children:i.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Open/Investigating"})}),i.jsxs(b,{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_e}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i.jsx(a,{className:"w-3 h-3"}),"Active cases"]})]})]}),i.jsxs(_,{children:[i.jsx(w,{className:"pb-3",children:i.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Critical"})}),i.jsxs(b,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:we}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i.jsx(a,{className:"w-3 h-3",weight:"fill"}),"High priority"]})]})]}),i.jsxs(_,{children:[i.jsx(w,{className:"pb-3",children:i.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Resolved"})}),i.jsxs(b,{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ce}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mt-1",children:[i.jsx(l,{className:"w-3 h-3"}),fe>0?Math.round(Ce/fe*100):0,"% closed"]})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(r,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(y,{placeholder:"Search incidents...",value:G,onChange:e=>K(e.target.value),className:"pl-10"})]}),i.jsxs(V,{value:Q,onValueChange:X,children:[i.jsx(R,{className:"w-48",children:i.jsx(A,{placeholder:"Filter by severity"})}),i.jsxs(O,{children:[i.jsx(P,{value:"all",children:"All Severities"}),i.jsx(P,{value:"critical",children:"Critical"}),i.jsx(P,{value:"high",children:"High"}),i.jsx(P,{value:"medium",children:"Medium"}),i.jsx(P,{value:"low",children:"Low"})]})]}),i.jsxs(V,{value:Y,onValueChange:Z,children:[i.jsx(R,{className:"w-48",children:i.jsx(A,{placeholder:"Filter by status"})}),i.jsxs(O,{children:[i.jsx(P,{value:"all",children:"All Statuses"}),i.jsx(P,{value:"open",children:"Open"}),i.jsx(P,{value:"investigating",children:"Investigating"}),i.jsx(P,{value:"resolved",children:"Resolved"}),i.jsx(P,{value:"closed",children:"Closed"})]})]})]}),i.jsxs(_,{children:[i.jsxs(w,{children:[i.jsxs(C,{children:["Incidents (",ye.length,")"]}),i.jsx(S,{children:"Track and manage all fleet incidents"})]}),i.jsx(b,{children:i.jsxs(E,{children:[i.jsx(M,{children:i.jsxs(z,{children:[i.jsx(J,{children:"Incident"}),i.jsx(J,{children:"Type"}),i.jsx(J,{children:"Date"}),i.jsx(J,{children:"Location"}),i.jsx(J,{children:"Vehicle"}),i.jsx(J,{children:"Severity"}),i.jsx(J,{children:"Status"}),i.jsx(J,{children:"Actions"})]})}),i.jsx($,{children:0===ye.length?i.jsx(z,{children:i.jsx(q,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No incidents found. Report your first incident to track and manage safety events."})}):ye.map(e=>i.jsxs(z,{children:[i.jsx(q,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.incident_title}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Reported by ",e.reported_by_name]})]})}),i.jsx(q,{className:"capitalize",children:e.incident_type.replace("_"," ")}),i.jsxs(q,{children:[i.jsx("div",{className:"text-sm",children:new Date(e.incident_date).toLocaleDateString()}),e.incident_time&&i.jsx("div",{className:"text-xs text-muted-foreground",children:e.incident_time})]}),i.jsx(q,{children:e.location?i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx(c,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"truncate max-w-32",children:e.location})]}):i.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),i.jsx(q,{children:e.vehicle_involved?i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx(d,{className:"w-3 h-3 text-muted-foreground"}),e.vehicle_involved]}):i.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),i.jsx(q,{children:i.jsx(I,{className:be(e.severity),variant:"secondary",children:e.severity})}),i.jsx(q,{children:i.jsx(I,{className:Se(e.status),variant:"secondary",children:e.status})}),i.jsx(q,{children:i.jsx(u,{variant:"ghost",size:"sm",onClick:()=>{te(e),Ne(e.id),ae(!0)},children:"View Details"})})]},e.id))})]})})]}),i.jsx(m,{open:ne,onOpenChange:ae,children:i.jsxs(v,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(p,{children:[i.jsx(g,{children:"Incident Details"}),i.jsx(N,{children:ie?.incident_title})]}),ie&&i.jsxs(D,{defaultValue:"details",className:"w-full",children:[i.jsxs(F,{className:"grid w-full grid-cols-3",children:[i.jsx(k,{value:"details",children:"Details"}),i.jsxs(k,{value:"actions",children:["Actions (",ce.length,")"]}),i.jsxs(k,{value:"timeline",children:["Timeline (",oe.length,")"]})]}),i.jsxs(T,{value:"details",className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Incident Information"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Title:"}),i.jsx("p",{className:"font-medium",children:ie.incident_title})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Type:"}),i.jsx("p",{className:"font-medium capitalize",children:ie.incident_type.replace("_"," ")})]}),ie.description&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Description:"}),i.jsx("p",{className:"font-medium",children:ie.description})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Severity:"}),i.jsx(I,{className:be(ie.severity),variant:"secondary",children:ie.severity})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-muted-foreground",children:"Status:"}),i.jsx(I,{className:Se(ie.status),variant:"secondary",children:ie.status})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Incident Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Date:"}),i.jsxs("p",{className:"font-medium",children:[new Date(ie.incident_date).toLocaleDateString(),ie.incident_time&&` at ${ie.incident_time}`]})]}),ie.location&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Location:"}),i.jsx("p",{className:"font-medium",children:ie.location})]}),ie.vehicle_involved&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Vehicle:"}),i.jsx("p",{className:"font-medium",children:ie.vehicle_involved})]}),ie.driver_name&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Driver:"}),i.jsx("p",{className:"font-medium",children:ie.driver_name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Reported By:"}),i.jsx("p",{className:"font-medium",children:ie.reported_by_name})]})]})]})]}),"closed"!==ie.status&&i.jsx("div",{className:"pt-4",children:i.jsx(u,{onClick:()=>{re(!0),ae(!1)},children:"Close Incident"})})]}),i.jsxs(T,{value:"actions",className:"space-y-4",children:[i.jsx("div",{className:"space-y-4",children:0===ce.length?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No corrective actions yet. Add actions to track resolution."}):ce.map(e=>i.jsxs(_,{children:[i.jsx(w,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(C,{className:"text-sm",children:e.action_description}),i.jsx(I,{variant:"completed"===e.status?"default":"secondary",children:e.status})]})}),i.jsx(b,{className:"text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Type:"}),i.jsx("span",{className:"ml-2 capitalize",children:e.action_type})]}),e.assigned_to_name&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned To:"}),i.jsx("span",{className:"ml-2",children:e.assigned_to_name})]}),e.due_date&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Due:"}),i.jsx("span",{className:"ml-2",children:new Date(e.due_date).toLocaleDateString()})]})]})})]},e.id))}),i.jsxs("div",{className:"pt-4 space-y-2",children:[i.jsx(L,{children:"Add Corrective Action"}),i.jsx(B,{value:ve.action_description,onChange:e=>pe({...ve,action_description:e.target.value}),placeholder:"Describe the corrective action...",rows:3}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs(V,{value:ve.action_type,onValueChange:e=>pe({...ve,action_type:e}),children:[i.jsx(R,{children:i.jsx(A,{})}),i.jsxs(O,{children:[i.jsx(P,{value:"corrective",children:"Corrective"}),i.jsx(P,{value:"preventive",children:"Preventive"}),i.jsx(P,{value:"training",children:"Training"}),i.jsx(P,{value:"policy_update",children:"Policy Update"})]})]}),i.jsx(y,{type:"date",value:ve.due_date,onChange:e=>pe({...ve,due_date:e.target.value}),placeholder:"Due date"})]}),i.jsx(u,{onClick:async()=>{if(ie&&ve.action_description)try{await h.get(`/api/incident-management/${ie.id}/actions`,{method:"POST",body:JSON.stringify(ve)}),Ne(ie.id),pe({action_description:"",action_type:"corrective",assigned_to:"",due_date:""}),o.success("Corrective action added")}catch(e){x.error("Error adding action:",e),o.error("Failed to add action")}else o.error("Please provide action details")},children:"Add Action"})]})]}),i.jsx(T,{value:"timeline",className:"space-y-4",children:i.jsx("div",{className:"space-y-4",children:i.jsx("div",0===oe.length?{className:"text-center text-muted-foreground py-8",children:"No timeline events yet."}:{className:"relative border-l-2 border-muted-foreground/20 pl-6 space-y-4",children:oe.map((e,s)=>i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -left-[27px] top-0 w-4 h-4 rounded-full bg-blue-500 border-2 border-background"}),i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:new Date(e.timestamp).toLocaleString()}),i.jsx("div",{className:"font-medium capitalize",children:e.event_type.replace("_"," ")}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e.description}),e.performed_by_name&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["By ",e.performed_by_name]})]},e.id))})})})]}),i.jsx(f,{children:i.jsx(u,{variant:"outline",onClick:()=>ae(!1),children:"Close"})})]})}),i.jsx(m,{open:le,onOpenChange:re,children:i.jsxs(v,{children:[i.jsxs(p,{children:[i.jsx(g,{children:"Close Incident"}),i.jsx(N,{children:"Provide resolution details to close this incident"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"resolution",children:"Resolution Notes *"}),i.jsx(B,{id:"resolution",value:je.resolution_notes,onChange:e=>ue({...je,resolution_notes:e.target.value}),placeholder:"How was this incident resolved?",rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"root-cause",children:"Root Cause *"}),i.jsx(B,{id:"root-cause",value:je.root_cause,onChange:e=>ue({...je,root_cause:e.target.value}),placeholder:"What caused this incident?",rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(L,{htmlFor:"preventive",children:"Preventive Measures"}),i.jsx(B,{id:"preventive",value:je.preventive_measures,onChange:e=>ue({...je,preventive_measures:e.target.value}),placeholder:"What steps will prevent this from happening again?",rows:3})]})]}),i.jsxs(f,{children:[i.jsx(u,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),i.jsx(u,{onClick:async()=>{if(ie)if(je.resolution_notes&&je.root_cause)try{await h.get(`/api/incident-management/${ie.id}/close`,{method:"POST",body:JSON.stringify(je)}),ge(),re(!1),ae(!1),o.success("Incident closed successfully"),ue({resolution_notes:"",root_cause:"",preventive_measures:""})}catch(e){x.error("Error closing incident:",e),o.error("Failed to close incident")}else o.error("Please provide resolution details and root cause")},children:"Close Incident"})]})]})})]})}import{r as s,j as i,br as t,cU as n,C as a,ah as l,b8 as r,at as c,b4 as d}from"./react-core-hQu9tqS1.js";import{t as o}from"./index-savvei9t.js";import{o as h,p as x,D as m,t as j,h as u,j as v,k as p,l as g,m as N,I as y,n as f,C as _,d as w,e as C,f as b,i as S,B as I,T as D,a as F,b as k,c as T}from"./index-BDwglPMF.js";import{L}from"./label-C9sYRYKW.js";import{S as V,a as R,b as A,c as O,d as P}from"./select-Bmd3s7f4.js";import{T as E,a as M,b as z,c as J,d as $,e as q}from"./table-_lE51wjz.js";import{T as B}from"./textarea-BOBjqKNu.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as IncidentManagement};
