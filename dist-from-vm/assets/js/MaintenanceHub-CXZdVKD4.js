function e({workOrders:e=[],serviceLocations:s=[],onWorkOrderClick:d,onServiceLocationClick:o,height:m="100%"}){const[x,g]=t.useState(null),[f,y]=t.useState(null),[b,C]=t.useState(null),w=t.useMemo(()=>[{id:"WO-001",vehicleId:"V-45",vehicleUnit:"Unit 45",type:"active",description:"Oil change and tire rotation",location:{lat:28.5383,lng:-81.3792,address:"123 Service Way, Orlando, FL"},estimatedCompletion:"2:00 PM"},{id:"WO-002",vehicleId:"V-23",vehicleUnit:"Unit 23",type:"urgent",description:"Brake repair - urgent",location:{lat:28.55,lng:-81.37,address:"456 Repair Blvd, Orlando, FL"},estimatedCompletion:"ASAP"},{id:"WO-003",vehicleId:"V-67",vehicleUnit:"Unit 67",type:"scheduled",description:"Preventive maintenance inspection",location:{lat:28.52,lng:-81.39,address:"789 Fleet St, Orlando, FL"},scheduledDate:"Tomorrow 9:00 AM"}],[]),S=t.useMemo(()=>[{id:"SL-001",name:"Main Service Center",type:"service_center",location:{lat:28.5383,lng:-81.3792,address:"123 Service Way, Orlando, FL"},services:["Oil Change","Tire Service","Brake Repair","Engine Diagnostics"],phone:"(407) 555-0100"},{id:"SL-002",name:"Parts Warehouse North",type:"parts_warehouse",location:{lat:28.56,lng:-81.36,address:"456 Industrial Pkwy, Orlando, FL"},services:["Parts Inventory","Emergency Parts"],phone:"(407) 555-0200"},{id:"SL-003",name:"Certified Vendor - AutoCare",type:"vendor",location:{lat:28.51,lng:-81.4,address:"789 Vendor Lane, Orlando, FL"},services:["Transmission Repair","AC Service","Electrical"],phone:"(407) 555-0300"}],[]),T=e.length>0?e:w,O=s.length>0?s:S,U=t.useMemo(()=>{const e=[...T.map(e=>e.location),...O.map(e=>e.location)];if(0===e.length)return{lat:28.5383,lng:-81.3792};const s=e.reduce((e,s)=>e+s.lat,0)/e.length,t=e.reduce((e,s)=>e+s.lng,0)/e.length;return{lat:s,lng:t}},[T,O]),k=e=>{switch(e){case"urgent":return"#EF4444";case"active":return"#3B82F6";case"scheduled":return"#F59E0B";case"completed":return"#10B981";default:return"#6B7280"}},F=e=>{switch(e){case"service_center":return"ðŸ”§";case"parts_warehouse":return"ðŸ“¦";case"vendor":return"ðŸª";default:return"ðŸ“"}};return i.jsx("div",{style:{height:m,width:"100%"},"data-testid":"maintenance-hub-map",children:i.jsxs(h,{mapContainerStyle:{width:"100%",height:"100%"},center:U,zoom:12,onLoad:e=>C(e),options:{mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0},children:[T.map(e=>i.jsx(u,{position:e.location,onClick:()=>{g(e),y(null)},icon:{path:google.maps.SymbolPath.CIRCLE,scale:10,fillColor:k(e.type),fillOpacity:.9,strokeColor:"#FFFFFF",strokeWeight:2}},e.id)),O.map(e=>i.jsx(u,{position:e.location,onClick:()=>{y(e),g(null)},label:{text:F(e.type),fontSize:"20px"}},e.id)),x&&i.jsx(p,{position:x.location,onCloseClick:()=>g(null),children:i.jsx(j,{className:"border-0 shadow-none",children:i.jsxs(v,{className:"p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"urgent":return i.jsx(c,{className:"w-4 h-4 text-red-500"});case"active":return i.jsx(r,{className:"w-4 h-4 text-blue-500"});case"scheduled":return i.jsx(l,{className:"w-4 h-4 text-amber-500"});case"completed":return i.jsx(n,{className:"w-4 h-4 text-green-500"});default:return i.jsx(r,{className:"w-4 h-4"})}})(x.type),i.jsx("span",{className:"font-semibold text-sm",children:x.id})]}),i.jsx(N,{variant:(e=>{switch(e){case"urgent":return"destructive";case"active":return"default";case"scheduled":return"secondary";default:return"outline"}})(x.type),children:x.type})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:x.vehicleUnit}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:x.description})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[i.jsx(a,{className:"w-3 h-3"}),i.jsx("span",{children:x.location.address})]}),x.estimatedCompletion&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[i.jsx(l,{className:"w-3 h-3"}),i.jsxs("span",{children:["ETA: ",x.estimatedCompletion]})]}),d&&i.jsx("button",{onClick:()=>d(x),className:"w-full mt-2 px-3 py-1.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"View Details"})]})})}),f&&i.jsx(p,{position:f.location,onCloseClick:()=>y(null),children:i.jsx(j,{className:"border-0 shadow-none",children:i.jsxs(v,{className:"p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm",children:f.name}),i.jsx(N,{variant:"outline",className:"mt-1 text-xs",children:f.type.replace("_"," ")})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[i.jsx(a,{className:"w-3 h-3"}),i.jsx("span",{children:f.location.address})]}),f.phone&&i.jsxs("p",{className:"text-xs text-gray-600",children:["ðŸ“ž ",f.phone]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-xs font-medium mb-1",children:"Services:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:f.services.map((e,s)=>i.jsx(N,{variant:"secondary",className:"text-xs",children:e},s))})]}),o&&i.jsx("button",{onClick:()=>o(f),className:"w-full mt-2 px-3 py-1.5 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",children:"View Details"})]})})})]})})}function s(){const[s,a]=t.useState("queue"),[n,h]=t.useState(null),u=t.useMemo(()=>[{id:"WO-2025-001",vehicleUnit:"Unit 45",vehicleId:"V-45",type:"active",description:"Oil change and tire rotation",priority:"medium",assignedTo:"Mike Johnson",estimatedCost:125,estimatedTime:"2 hours",scheduledDate:"2025-12-16 10:00 AM",location:{lat:28.5383,lng:-81.3792,address:"123 Service Way, Orlando, FL"}},{id:"WO-2025-002",vehicleUnit:"Unit 23",vehicleId:"V-23",type:"urgent",description:"Brake system repair - Safety critical",priority:"critical",assignedTo:"Sarah Williams",estimatedCost:850,estimatedTime:"4 hours",scheduledDate:"2025-12-16 08:00 AM",location:{lat:28.55,lng:-81.37,address:"456 Repair Blvd, Orlando, FL"}},{id:"WO-2025-003",vehicleUnit:"Unit 67",vehicleId:"V-67",type:"scheduled",description:"Preventive maintenance inspection (PMI)",priority:"medium",assignedTo:"John Smith",estimatedCost:200,estimatedTime:"3 hours",scheduledDate:"2025-12-17 09:00 AM",location:{lat:28.52,lng:-81.39,address:"789 Fleet St, Orlando, FL"}},{id:"WO-2025-004",vehicleUnit:"Unit 89",vehicleId:"V-89",type:"scheduled",description:"AC system service",priority:"low",estimatedCost:175,estimatedTime:"2.5 hours",scheduledDate:"2025-12-18 11:00 AM",location:{lat:28.5383,lng:-81.3792,address:"123 Service Way, Orlando, FL"}}],[]),p=t.useMemo(()=>[{vehicleId:"V-45",vehicleUnit:"Unit 45",totalWorkOrders:24,completedThisMonth:3,totalCostYTD:4250,lastService:"2025-12-01",nextScheduled:"2025-12-16",status:"good"},{vehicleId:"V-23",vehicleUnit:"Unit 23",totalWorkOrders:31,completedThisMonth:2,totalCostYTD:6890,lastService:"2025-11-28",nextScheduled:"2025-12-16",status:"attention"},{vehicleId:"V-67",vehicleUnit:"Unit 67",totalWorkOrders:18,completedThisMonth:1,totalCostYTD:3120,lastService:"2025-12-05",nextScheduled:"2025-12-17",status:"good"}],[]),U=t.useMemo(()=>({activeCount:u.filter(e=>"active"===e.type).length,urgentCount:u.filter(e=>"urgent"===e.type).length,scheduledCount:u.filter(e=>"scheduled"===e.type).length,totalCost:u.reduce((e,s)=>e+s.estimatedCost,0)}),[u]),k=e=>{switch(e){case"urgent":return"destructive";case"active":return"default";case"scheduled":return"secondary";default:return"outline"}},F=e=>{switch(e){case"critical":return"destructive";case"high":return"default";case"medium":return"secondary";default:return"outline"}},M=e=>{switch(e){case"critical":return"destructive";case"attention":return"default";default:return"secondary"}},L=i.jsx(e,{workOrders:u.map(e=>({id:e.id,vehicleId:e.vehicleId,vehicleUnit:e.vehicleUnit,type:e.type,description:e.description,location:e.location,scheduledDate:e.scheduledDate,estimatedCompletion:e.estimatedTime})),onWorkOrderClick:e=>{const s=u.find(s=>s.id===e.id);s&&h(s)},height:"100%"}),D=i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Maintenance Hub"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Service locations, work orders, and maintenance tracking"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(j,{children:i.jsx(v,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(r,{className:"w-5 h-5 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"}),i.jsx("p",{className:"text-2xl font-bold",children:U.activeCount})]})]})})}),i.jsx(j,{children:i.jsx(v,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(c,{className:"w-5 h-5 text-red-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Urgent"}),i.jsx("p",{className:"text-2xl font-bold",children:U.urgentCount})]})]})})}),i.jsx(j,{children:i.jsx(v,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(d,{className:"w-5 h-5 text-amber-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled"}),i.jsx("p",{className:"text-2xl font-bold",children:U.scheduledCount})]})]})})}),i.jsx(j,{children:i.jsx(v,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(o,{className:"w-5 h-5 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Est. Cost"}),i.jsxs("p",{className:"text-lg font-bold",children:["$",U.totalCost.toFixed(0)]})]})]})})})]}),i.jsxs(j,{children:[i.jsx(g,{className:"pb-3",children:i.jsxs(f,{className:"text-sm flex items-center gap-2",children:[i.jsx(m,{className:"w-4 h-4"}),"Work Order Queue"]})}),i.jsx(v,{children:i.jsx(y,{className:"h-[200px]",children:i.jsx("div",{className:"space-y-2",children:u.slice(0,5).map(e=>i.jsx("div",{className:"p-3 border rounded-lg hover:bg-accent cursor-pointer transition-colors",onClick:()=>h(e),children:i.jsx("div",{className:"flex items-start justify-between gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-xs font-mono font-medium",children:e.id}),i.jsx(N,{variant:k(e.type),className:"text-xs",children:e.type})]}),i.jsx("p",{className:"text-sm font-medium truncate",children:e.vehicleUnit}),i.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.description}),i.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(l,{className:"w-3 h-3"}),e.estimatedTime]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(o,{className:"w-3 h-3"}),"$",e.estimatedCost.toFixed(0)]})]})]})})},e.id))})})})]})]}),W=i.jsx("div",{className:"space-y-4",children:i.jsxs(b,{value:s,onValueChange:e=>a(e),children:[i.jsxs(C,{className:"grid w-full grid-cols-3",children:[i.jsx(w,{value:"queue",children:"Queue"}),i.jsx(w,{value:"history",children:"History"}),i.jsx(w,{value:"schedule",children:"Schedule"})]}),i.jsx(S,{value:"queue",className:"space-y-3 mt-4",children:i.jsx("div",{className:"space-y-3",children:u.map(e=>i.jsx(j,{className:n?.id===e.id?"border-blue-500":"",children:i.jsx(v,{className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-mono font-semibold",children:e.id}),i.jsx(N,{variant:k(e.type),children:e.type}),i.jsx(N,{variant:F(e.priority),children:e.priority})]}),i.jsx("p",{className:"text-sm font-medium",children:e.vehicleUnit})]})}),i.jsx("p",{className:"text-sm",children:e.description}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Scheduled"}),i.jsx("p",{className:"font-medium",children:e.scheduledDate})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Assigned To"}),i.jsx("p",{className:"font-medium",children:e.assignedTo||"Unassigned"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Est. Time"}),i.jsx("p",{className:"font-medium",children:e.estimatedTime})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Est. Cost"}),i.jsxs("p",{className:"font-medium",children:["$",e.estimatedCost.toFixed(2)]})]})]}),i.jsxs("div",{className:"pt-2 border-t",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Location"}),i.jsx("p",{className:"text-xs",children:e.location.address})]}),i.jsx(T,{className:"w-full",size:"sm",children:"View Full Details"})]})})},e.id))})}),i.jsx(S,{value:"history",className:"space-y-3 mt-4",children:p.map(e=>i.jsx(j,{children:i.jsx(v,{className:"p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(x,{className:"w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:e.vehicleUnit}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.vehicleId})]})]}),i.jsx(N,{variant:M(e.status),children:e.status})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Work Orders"}),i.jsx("p",{className:"font-bold",children:e.totalWorkOrders})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"This Month"}),i.jsx("p",{className:"font-bold",children:e.completedThisMonth})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Cost YTD"}),i.jsxs("p",{className:"font-bold",children:["$",e.totalCostYTD.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Last Service"}),i.jsx("p",{className:"font-medium",children:e.lastService})]})]}),i.jsxs("div",{className:"pt-2 border-t",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Next Scheduled"}),i.jsx("p",{className:"text-sm font-medium",children:e.nextScheduled})]})]})})},e.vehicleId))}),i.jsx(S,{value:"schedule",className:"space-y-3 mt-4",children:i.jsxs(j,{children:[i.jsx(g,{children:i.jsx(f,{className:"text-sm",children:"Upcoming Maintenance"})}),i.jsx(v,{children:i.jsx("div",{className:"space-y-3",children:u.filter(e=>"scheduled"===e.type).sort((e,s)=>new Date(e.scheduledDate).getTime()-new Date(s.scheduledDate).getTime()).map(e=>i.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[i.jsx(d,{className:"w-5 h-5 text-amber-500 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm",children:e.vehicleUnit}),i.jsx("p",{className:"text-xs text-muted-foreground",children:e.description}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.scheduledDate})]}),i.jsx(N,{variant:"secondary",className:"text-xs",children:e.estimatedTime})]},e.id))})})]})})]})});return i.jsx(O,{mapComponent:L,sidePanel:D,drawerContent:W})}import{r as t,j as i,at as a,as as l,y as r,ah as n,C as c,aL as d,aK as o,c9 as m,b4 as x}from"./react-core-hQu9tqS1.js";import{G as h,M as u,I as p}from"./esm-BrthVOBN.js";import{C as j,f as v,B as N,d as g,e as f,S as y,T as b,a as C,b as w,c as S,h as T}from"./index-BDwglPMF.js";import{M as O}from"./MapFirstLayout-DjypJrVA.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";import"./sheet-B4c1gADU.js";export{s as MaintenanceHub};
