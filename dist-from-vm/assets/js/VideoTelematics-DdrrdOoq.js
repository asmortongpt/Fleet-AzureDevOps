function e(){const[e,z]=s.useState([]),[U,$]=s.useState(""),[q,J]=s.useState("all"),[G,W]=s.useState("all"),[K,Q]=s.useState("all"),[X,Y]=s.useState(null),[Z,_]=s.useState(!1),[ee,se]=s.useState(!1),[ie,te]=s.useState({enableAudioRecording:!0,videoRetentionPeriod:30,autoDeleteAfterRetention:!0,blurFaces:!1,blurLicensePlates:!1,restrictAccessByRole:{admin:!0,manager:!0,driver:!1},enableDriverOptOut:!1,notifyDriversOfRecording:!0,enableVideoEncryption:!0}),ae=(e||[]).filter(e=>(e.vehicleNumber.toLowerCase().includes(U.toLowerCase())||e.driverName?.toLowerCase().includes(U.toLowerCase())||e.location?.address.toLowerCase().includes(U.toLowerCase()))&&("all"===q||e.eventType===q)&&("all"===G||e.severity===G)&&("all"===K||"reviewed"===K&&e.reviewed||"unreviewed"===K&&!e.reviewed)),re=e=>({distraction:"Distraction","phone-use":"Phone Use",drowsiness:"Drowsiness",tailgating:"Tailgating","harsh-braking":"Harsh Braking","harsh-acceleration":"Harsh Acceleration",speeding:"Speeding",collision:"Collision","near-miss":"Near Miss",seatbelt:"Seatbelt Violation","rolling-stop":"Rolling Stop","lane-departure":"Lane Departure"}[e]),ne=e=>({pending:"bg-gray-100 text-gray-700","in-progress":"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700"}[e]),de=(e||[]).length,le=(e||[]).filter(e=>!e.reviewed).length,ce=(e||[]).filter(e=>e.coaching.assigned&&"pending"===e.coaching.status).length,oe=(e||[]).filter(e=>"critical"===e.severity).length,xe=[{id:"evt-1",tenantId:"tenant-demo",vehicleId:"veh-1",vehicleNumber:"FL-1001",driverId:"drv-1",driverName:"John Smith",eventType:"phone-use",severity:"high",timestamp:new Date(Date.now()-72e5).toISOString(),location:{lat:27.9506,lng:-82.4572,address:"Downtown Tampa, FL"},speed:45,duration:12,aiConfidence:.94,reviewed:!1,coaching:{assigned:!1,status:"pending"},retained:!0,retentionDays:30},{id:"evt-2",tenantId:"tenant-demo",vehicleId:"veh-2",vehicleNumber:"FL-1002",driverId:"drv-2",driverName:"Sarah Johnson",eventType:"harsh-braking",severity:"medium",timestamp:new Date(Date.now()-18e6).toISOString(),location:{lat:27.9656,lng:-82.4522,address:"I-275 North, Tampa"},speed:62,duration:8,aiConfidence:.89,reviewed:!0,reviewedBy:"Safety Manager",reviewedAt:new Date(Date.now()-36e5).toISOString(),coaching:{assigned:!0,assignedTo:"Safety Manager",status:"in-progress",notes:"Follow up with driver about defensive driving"},retained:!0,retentionDays:90},{id:"evt-3",tenantId:"tenant-demo",vehicleId:"veh-3",vehicleNumber:"FL-1003",driverId:"drv-3",driverName:"Mike Wilson",eventType:"speeding",severity:"medium",timestamp:new Date(Date.now()-864e5).toISOString(),location:{lat:28.0656,lng:-82.4122,address:"Dale Mabry Hwy, Tampa"},speed:78,duration:45,aiConfidence:.98,reviewed:!0,reviewedBy:"Fleet Manager",reviewedAt:new Date(Date.now()-72e6).toISOString(),coaching:{assigned:!0,assignedTo:"Fleet Manager",status:"completed",notes:"Driver acknowledged, completed training module"},retained:!0,retentionDays:30}];return 0===(e||[]).length&&xe.length>0&&z(xe),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Video Telematics"}),i.jsx("p",{className:"text-muted-foreground",children:"AI-powered dashcam event detection with driver coaching workflows"})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(m,{variant:"outline",onClick:()=>se(!0),children:[i.jsx(t,{className:"w-4 h-4 mr-2"}),"Privacy Settings"]})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs(j,{children:[i.jsx(v,{className:"pb-3",children:i.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Total Events"})}),i.jsxs(g,{children:[i.jsx("div",{className:"text-2xl font-bold",children:de}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i.jsx(a,{className:"w-3 h-3"}),"All time"]})]})]}),i.jsxs(j,{children:[i.jsx(v,{className:"pb-3",children:i.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Needs Review"})}),i.jsxs(g,{children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:le}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i.jsx(r,{className:"w-3 h-3"}),"Pending"]})]})]}),i.jsxs(j,{children:[i.jsx(v,{className:"pb-3",children:i.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Coaching Pending"})}),i.jsxs(g,{children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:ce}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i.jsx(n,{className:"w-3 h-3"}),"Assigned"]})]})]}),i.jsxs(j,{children:[i.jsx(v,{className:"pb-3",children:i.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Critical Events"})}),i.jsxs(g,{children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:oe}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[i.jsx(d,{className:"w-3 h-3"}),"High priority"]})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),i.jsx(p,{placeholder:"Search events...",value:U,onChange:e=>$(e.target.value),className:"pl-10"})]}),i.jsxs(k,{value:q,onValueChange:J,children:[i.jsx(B,{className:"w-48",children:i.jsx(I,{})}),i.jsxs(T,{children:[i.jsx(L,{value:"all",children:"All Types"}),i.jsx(L,{value:"distraction",children:"Distraction"}),i.jsx(L,{value:"phone-use",children:"Phone Use"}),i.jsx(L,{value:"drowsiness",children:"Drowsiness"}),i.jsx(L,{value:"speeding",children:"Speeding"}),i.jsx(L,{value:"harsh-braking",children:"Harsh Braking"}),i.jsx(L,{value:"collision",children:"Collision"})]})]}),i.jsxs(k,{value:G,onValueChange:W,children:[i.jsx(B,{className:"w-48",children:i.jsx(I,{})}),i.jsxs(T,{children:[i.jsx(L,{value:"all",children:"All Severities"}),i.jsx(L,{value:"low",children:"Low"}),i.jsx(L,{value:"medium",children:"Medium"}),i.jsx(L,{value:"high",children:"High"}),i.jsx(L,{value:"critical",children:"Critical"})]})]}),i.jsxs(k,{value:K,onValueChange:Q,children:[i.jsx(B,{className:"w-48",children:i.jsx(I,{})}),i.jsxs(T,{children:[i.jsx(L,{value:"all",children:"All Status"}),i.jsx(L,{value:"unreviewed",children:"Unreviewed"}),i.jsx(L,{value:"reviewed",children:"Reviewed"})]})]})]}),i.jsxs(j,{children:[i.jsxs(v,{children:[i.jsxs(u,{children:["Video Events (",ae.length,")"]}),i.jsx(f,{children:"AI-detected safety events from dashcam footage with driver coaching"})]}),i.jsx(g,{children:i.jsxs(O,{children:[i.jsx(V,{children:i.jsxs(E,{children:[i.jsx(F,{children:"Time"}),i.jsx(F,{children:"Vehicle / Driver"}),i.jsx(F,{children:"Event Type"}),i.jsx(F,{children:"Severity"}),i.jsx(F,{children:"Confidence"}),i.jsx(F,{children:"Coaching"}),i.jsx(F,{children:"Actions"})]})}),i.jsx(M,{children:0===ae.length?i.jsx(E,{children:i.jsx(H,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No video events found. Events will appear here when detected by AI."})}):ae.map(e=>{return i.jsxs(E,{children:[i.jsx(H,{children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-medium",children:new Date(e.timestamp).toLocaleDateString()}),i.jsx("div",{className:"text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()})]})}),i.jsx(H,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.vehicleNumber}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e.driverName})]})}),i.jsx(H,{children:i.jsx(N,{variant:"outline",children:re(e.eventType)})}),i.jsx(H,{children:i.jsx(N,{className:(s=e.severity,{low:"bg-blue-100 text-blue-700",medium:"bg-yellow-100 text-yellow-700",high:"bg-orange-100 text-orange-700",critical:"bg-red-100 text-red-700"}[s]),variant:"secondary",children:e.severity})}),i.jsx(H,{children:i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"text-sm font-medium",children:[Math.round(100*e.aiConfidence),"%"]})})}),i.jsx(H,{children:e.coaching.assigned?i.jsx(N,{className:ne(e.coaching.status),variant:"secondary",children:e.coaching.status}):i.jsx("span",{className:"text-sm text-muted-foreground",children:"Not assigned"})}),i.jsx(H,{children:i.jsxs("div",{className:"flex gap-1",children:[i.jsx(m,{variant:"ghost",size:"sm",onClick:()=>(e=>{Y(e),_(!0)})(e),children:i.jsx(c,{className:"w-4 h-4"})}),!e.reviewed&&i.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,z(e=>(e||[]).map(e=>e.id===s?{...e,reviewed:!0,reviewedBy:"Current User",reviewedAt:(new Date).toISOString()}:e)),void h.success("Event marked as reviewed");var s},children:"Review"}),!e.coaching.assigned&&i.jsx(m,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,z(e=>(e||[]).map(e=>e.id===s?{...e,coaching:{assigned:!0,assignedTo:"Safety Manager",status:"pending",notes:"Driver coaching required"}}:e)),void h.success("Coaching assigned to driver");var s},children:"Coach"})]})})]},e.id);var s})})]})})]}),i.jsx(y,{open:Z,onOpenChange:_,children:i.jsxs(w,{className:"max-w-4xl",children:[i.jsxs(b,{children:[i.jsx(C,{children:"Video Event Details"}),i.jsxs(S,{children:[X&&re(X.eventType)," -"," ",X?.vehicleNumber]})]}),X&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"text-center text-gray-400",children:[i.jsx(a,{className:"w-16 h-16 mx-auto mb-2"}),i.jsx("p",{children:"Video Player"}),i.jsxs("p",{className:"text-sm",children:[X.duration,"s clip at ",X.speed," mph"]})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(R,{className:"text-xs text-muted-foreground",children:"Location"}),i.jsx("p",{className:"text-sm",children:X.location?.address})]}),i.jsxs("div",{children:[i.jsx(R,{className:"text-xs text-muted-foreground",children:"AI Confidence"}),i.jsxs("p",{className:"text-sm",children:[Math.round(100*X.aiConfidence),"%"]})]}),i.jsxs("div",{children:[i.jsx(R,{className:"text-xs text-muted-foreground",children:"Reviewed By"}),i.jsx("p",{className:"text-sm",children:X.reviewedBy||i.jsx("span",{className:"text-muted-foreground",children:"Not reviewed"})})]}),i.jsxs("div",{children:[i.jsx(R,{className:"text-xs text-muted-foreground",children:"Retention"}),i.jsxs("p",{className:"text-sm",children:[X.retentionDays," days"]})]})]}),X.coaching.assigned&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx(R,{className:"text-xs text-muted-foreground",children:"Coaching Status"}),i.jsxs("div",{className:"mt-2 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-sm",children:["Assigned to: ",X.coaching.assignedTo]}),i.jsx(N,{className:ne(X.coaching.status),variant:"secondary",children:X.coaching.status})]}),X.coaching.notes&&i.jsx("p",{className:"text-sm text-muted-foreground",children:X.coaching.notes})]})]})]}),i.jsxs(D,{children:[i.jsx(m,{variant:"outline",onClick:()=>_(!1),children:"Close"}),i.jsxs(m,{children:[i.jsx(o,{className:"w-4 h-4 mr-2"}),"Download Clip"]})]})]})}),i.jsx(y,{open:ee,onOpenChange:se,children:i.jsxs(w,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[i.jsxs(b,{children:[i.jsxs(C,{className:"flex items-center gap-2",children:[i.jsx(t,{className:"w-5 h-5"}),"Privacy Settings"]}),i.jsx(S,{children:"Configure privacy and data retention settings for video telematics"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Recording Settings"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(R,{children:"Enable Audio Recording"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Record audio along with video footage"})]}),i.jsx(P,{checked:ie.enableAudioRecording,onCheckedChange:e=>te({...ie,enableAudioRecording:e})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(R,{children:"Notify Drivers of Recording"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Display recording indicator to drivers"})]}),i.jsx(P,{checked:ie.notifyDriversOfRecording,onCheckedChange:e=>te({...ie,notifyDriversOfRecording:e})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(R,{children:"Enable Driver Opt-Out"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow drivers to opt-out of video recording"})]}),i.jsx(P,{checked:ie.enableDriverOptOut,onCheckedChange:e=>te({...ie,enableDriverOptOut:e})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Data Retention"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(R,{children:"Video Retention Period"}),i.jsxs(k,{value:ie.videoRetentionPeriod.toString(),onValueChange:e=>te({...ie,videoRetentionPeriod:parseInt(e)}),children:[i.jsx(B,{children:i.jsx(I,{})}),i.jsxs(T,{children:[i.jsx(L,{value:"7",children:"7 days"}),i.jsx(L,{value:"14",children:"14 days"}),i.jsx(L,{value:"30",children:"30 days"}),i.jsx(L,{value:"60",children:"60 days"}),i.jsx(L,{value:"90",children:"90 days"})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"How long to keep video recordings"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(R,{children:"Auto-Delete After Retention"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically delete videos after retention period"})]}),i.jsx(P,{checked:ie.autoDeleteAfterRetention,onCheckedChange:e=>te({...ie,autoDeleteAfterRetention:e})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Privacy Protection"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(R,{children:"Blur Faces in Recordings"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically blur faces for privacy"})]}),i.jsx(P,{checked:ie.blurFaces,onCheckedChange:e=>te({...ie,blurFaces:e})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(R,{children:"Blur License Plates"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically blur license plates"})]}),i.jsx(P,{checked:ie.blurLicensePlates,onCheckedChange:e=>te({...ie,blurLicensePlates:e})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Access Control"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(R,{children:"Restrict Access by Role"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(A,{id:"role-admin",checked:ie.restrictAccessByRole.admin,onCheckedChange:e=>te({...ie,restrictAccessByRole:{...ie.restrictAccessByRole,admin:!0===e}})}),i.jsx("label",{htmlFor:"role-admin",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Admin"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(A,{id:"role-manager",checked:ie.restrictAccessByRole.manager,onCheckedChange:e=>te({...ie,restrictAccessByRole:{...ie.restrictAccessByRole,manager:!0===e}})}),i.jsx("label",{htmlFor:"role-manager",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Manager"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(A,{id:"role-driver",checked:ie.restrictAccessByRole.driver,onCheckedChange:e=>te({...ie,restrictAccessByRole:{...ie.restrictAccessByRole,driver:!0===e}})}),i.jsx("label",{htmlFor:"role-driver",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Driver"})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which roles can access video recordings"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-semibold",children:"Security"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(R,{children:"Export Video Encryption"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Encrypt videos when exporting or downloading"})]}),i.jsx(P,{checked:ie.enableVideoEncryption,onCheckedChange:e=>te({...ie,enableVideoEncryption:e})})]})]})]}),i.jsxs(D,{children:[i.jsx(m,{variant:"outline",onClick:()=>se(!1),children:"Cancel"}),i.jsxs(m,{onClick:()=>{1>ie.videoRetentionPeriod?h.error("Video retention period must be at least 1 day"):ie.restrictAccessByRole.admin||ie.restrictAccessByRole.manager||ie.restrictAccessByRole.driver?(se(!1),h.success("Privacy settings saved successfully",{description:`Video retention: ${ie.videoRetentionPeriod} days, Encryption: ${ie.enableVideoEncryption?"Enabled":"Disabled"}`})):h.error("At least one role must have access to video recordings")},children:[i.jsx(x,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})]})})]})}import{r as s,j as i,af as t,ac as a,ae as r,as as n,C as d,b8 as l,ad as c,bj as o,cT as x}from"./react-core-hQu9tqS1.js";import{t as h}from"./index-savvei9t.js";import{h as m,C as j,d as v,e as u,f as g,I as p,i as f,B as N,D as y,j as w,k as b,l as C,m as S,n as D}from"./index-BDwglPMF.js";import{C as A}from"./checkbox-J0MWk58s.js";import{L as R}from"./label-C9sYRYKW.js";import{S as k,a as B,b as I,c as T,d as L}from"./select-Bmd3s7f4.js";import{S as P}from"./switch-9MiV1CpI.js";import{T as O,a as V,b as E,c as F,d as M,e as H}from"./table-_lE51wjz.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as VideoTelematics};
