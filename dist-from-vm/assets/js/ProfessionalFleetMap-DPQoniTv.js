import{r as e,j as s,aD as a,bF as l,bW as t,cv as i,cw as n,cx as c,b$ as r,cy as o,cz as d,a3 as m,aF as g,az as u,I as h,cA as x,Z as p,cm as f,a0 as b,R as j,aB as N,W as w,cB as v}from"./react-core-hQu9tqS1.js";import{M as y}from"./MaintenanceRequestDialog-Rxhi54iS.js";import{p as C,C as k,d as S,e as L,h as D,f as M,I as A,S as O,B as E,u as V,T as z,a as R,b as T,c as G}from"./index-BDwglPMF.js";import{G as $}from"./GoogleMap-BAYip6gy.js";import{L as F}from"./label-C9sYRYKW.js";import{S as I}from"./switch-9MiV1CpI.js";const B=({map:g,onGeofenceCreate:u,onGeofenceUpdate:h,onGeofenceDelete:x,initialGeofences:p=[]})=>{const[f,b]=e.useState(p),[j,N]=e.useState(null),[w,v]=e.useState(null),[y,V]=e.useState(!1),[z,R]=e.useState(""),T=e.useRef(null),G=e.useRef(new Map);e.useEffect(()=>{if(!g||!window.google?.maps?.drawing)return;const e=new google.maps.drawing.DrawingManager({drawingMode:null,drawingControl:!1,circleOptions:{fillColor:"#FF6B6B",fillOpacity:.3,strokeWeight:2,strokeColor:"#FF6B6B",clickable:!0,editable:!1,draggable:!1,zIndex:1},polygonOptions:{fillColor:"#4ECDC4",fillOpacity:.3,strokeWeight:2,strokeColor:"#4ECDC4",clickable:!0,editable:!1,draggable:!1,zIndex:1},rectangleOptions:{fillColor:"#95E1D3",fillOpacity:.3,strokeWeight:2,strokeColor:"#95E1D3",clickable:!0,editable:!1,draggable:!1,zIndex:1}});return e.setMap(g),T.current=e,google.maps.event.addListener(e,"circlecomplete",e=>{$(e)}),google.maps.event.addListener(e,"polygoncomplete",e=>{F(e)}),google.maps.event.addListener(e,"rectanglecomplete",e=>{I(e)}),()=>{google.maps.event.clearInstanceListeners(e),e.setMap(null),T.current=null}},[g]);const $=e.useCallback(e=>{const s=e.getCenter();if(!s)return;const a={id:`geofence_${Date.now()}`,name:`Zone ${f.length+1}`,type:"circle",coordinates:{lat:s.lat(),lng:s.lng()},radius:e.getRadius(),color:"#FF6B6B",visible:!0,editable:!1,createdAt:new Date,updatedAt:new Date};G.current.set(a.id,e),google.maps.event.addListener(e,"click",()=>{N(a.id)}),b(e=>[...e,a]),u?.(a),V(!1),v(null),T.current&&T.current.setDrawingMode(null)},[f,u]),F=e.useCallback(e=>{const s=e.getPath().getArray().map(e=>({lat:e.lat(),lng:e.lng()})),a={id:`geofence_${Date.now()}`,name:`Zone ${f.length+1}`,type:"polygon",coordinates:s,color:"#4ECDC4",visible:!0,editable:!1,createdAt:new Date,updatedAt:new Date};G.current.set(a.id,e),google.maps.event.addListener(e,"click",()=>{N(a.id)}),b(e=>[...e,a]),u?.(a),V(!1),v(null),T.current&&T.current.setDrawingMode(null)},[f,u]),I=e.useCallback(e=>{const s=e.getBounds();if(!s)return;const a=s.getNorthEast(),l=s.getSouthWest(),t={id:`geofence_${Date.now()}`,name:`Zone ${f.length+1}`,type:"rectangle",coordinates:{north:a.lat(),east:a.lng(),south:l.lat(),west:l.lng()},color:"#95E1D3",visible:!0,editable:!1,createdAt:new Date,updatedAt:new Date};G.current.set(t.id,e),google.maps.event.addListener(e,"click",()=>{N(t.id)}),b(e=>[...e,t]),u?.(t),V(!1),v(null),T.current&&T.current.setDrawingMode(null)},[f,u]),B=e.useCallback(e=>{if(!T.current)return;let s=null;switch(e){case"circle":s=google.maps.drawing.OverlayType.CIRCLE;break;case"polygon":s=google.maps.drawing.OverlayType.POLYGON;break;case"rectangle":s=google.maps.drawing.OverlayType.RECTANGLE}s&&(V(!0),v(s),T.current.setDrawingMode(s))},[]),P=e.useCallback(()=>{V(!1),v(null),T.current&&T.current.setDrawingMode(null)},[]),W=e.useCallback(e=>{const s=G.current.get(e);if(s){const a=f.find(s=>s.id===e);if(a){const l=!a.visible;s.setVisible(l),b(s=>s.map(s=>s.id===e?{...s,visible:l,updatedAt:new Date}:s))}}},[f]),U=e.useCallback(e=>{const s=G.current.get(e);if(s){const a=f.find(s=>s.id===e);if(a){const l=!a.editable;s.setEditable(l),s.setDraggable(l),b(s=>s.map(s=>s.id===e?{...s,editable:l,updatedAt:new Date}:s)),l&&N(e)}}},[f]),Z=e.useCallback(e=>{const s=G.current.get(e);s&&(s.setMap(null),google.maps.event.clearInstanceListeners(s),G.current.delete(e)),b(s=>s.filter(s=>s.id!==e)),j===e&&N(null),x?.(e)},[j,x]),_=e.useCallback((e,s)=>{b(a=>a.map(a=>a.id===e?{...a,name:s,updatedAt:new Date}:a));const a=f.find(s=>s.id===e);a&&h?.({...a,name:s,updatedAt:new Date})},[f,h]),q=e.useCallback(()=>{const e=JSON.stringify(f,null,2),s="data:application/json;charset=utf-8,"+encodeURIComponent(e),a=`geofences_${(new Date).toISOString()}.json`,l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download",a),l.click()},[f]),J=e.useCallback(e=>{const s=e.target.files?.[0];if(!s)return;const a=new FileReader;a.onload=e=>{try{const s=JSON.parse(e.target?.result);Array.isArray(s)&&(G.current.forEach(e=>{e.setMap(null),google.maps.event.clearInstanceListeners(e)}),G.current.clear(),b(s),s.forEach(e=>{Y(e)}))}catch(s){C.error("Failed to import geofences:",s)}},a.readAsText(s)},[]),Y=e.useCallback(e=>{if(!g)return;let s=null;switch(e.type){case"circle":s=new google.maps.Circle({map:g,center:e.coordinates,radius:e.radius,fillColor:e.color,fillOpacity:.3,strokeColor:e.color,strokeWeight:2,clickable:!0,editable:e.editable,draggable:e.editable,visible:e.visible});break;case"polygon":s=new google.maps.Polygon({map:g,paths:e.coordinates,fillColor:e.color,fillOpacity:.3,strokeColor:e.color,strokeWeight:2,clickable:!0,editable:e.editable,draggable:e.editable,visible:e.visible});break;case"rectangle":s=new google.maps.Rectangle({map:g,bounds:e.coordinates,fillColor:e.color,fillOpacity:.3,strokeColor:e.color,strokeWeight:2,clickable:!0,editable:e.editable,draggable:e.editable,visible:e.visible})}s&&(G.current.set(e.id,s),google.maps.event.addListener(s,"click",()=>{N(e.id)}))},[g]),H=f.filter(e=>e.name.toLowerCase().includes(z.toLowerCase())),K=e=>{switch(e){case"circle":return s.jsx(i,{className:"w-4 h-4"});case"polygon":return s.jsx(n,{className:"w-4 h-4"});case"rectangle":return s.jsx(c,{className:"w-4 h-4"})}},Q=e=>{switch(e){case"circle":return"bg-red-100 text-red-800";case"polygon":return"bg-teal-100 text-teal-800";case"rectangle":return"bg-green-100 text-green-800"}};return s.jsx("div",{className:"flex h-full",children:s.jsxs(k,{className:"w-96 h-full border-r rounded-none",children:[s.jsx(S,{className:"border-b",children:s.jsxs(L,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(a,{className:"w-5 h-5"}),"Geofences (",f.length,")"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(D,{size:"sm",variant:"outline",onClick:q,disabled:0===f.length,title:"Export geofences",children:s.jsx(l,{className:"w-4 h-4"})}),s.jsxs("label",{children:[s.jsx("input",{type:"file",accept:".json",onChange:J,className:"hidden"}),s.jsx(D,{size:"sm",variant:"outline",onClick:e=>e.currentTarget.parentElement?.click(),title:"Import geofences",children:s.jsx(t,{className:"w-4 h-4"})})]})]})]})}),s.jsxs(M,{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Create New Geofence"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs(D,{size:"sm",variant:y&&w===google.maps.drawing.OverlayType.CIRCLE?"default":"outline",onClick:()=>y?P():B("circle"),className:"flex flex-col gap-1 h-auto py-2",children:[s.jsx(i,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs",children:"Circle"})]}),s.jsxs(D,{size:"sm",variant:y&&w===google.maps.drawing.OverlayType.POLYGON?"default":"outline",onClick:()=>y?P():B("polygon"),className:"flex flex-col gap-1 h-auto py-2",children:[s.jsx(n,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs",children:"Polygon"})]}),s.jsxs(D,{size:"sm",variant:y&&w===google.maps.drawing.OverlayType.RECTANGLE?"default":"outline",onClick:()=>y?P():B("rectangle"),className:"flex flex-col gap-1 h-auto py-2",children:[s.jsx(c,{className:"w-5 h-5"}),s.jsx("span",{className:"text-xs",children:"Rectangle"})]})]}),y&&s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Click and drag on the map to draw. Click again to cancel."})]}),s.jsx(A,{type:"text",placeholder:"Search geofences...",value:z,onChange:e=>R(e.target.value),className:"w-full"}),s.jsx(O,{className:"h-[calc(100vh-320px)]",children:s.jsxs("div",{className:"space-y-2",children:[H.map(e=>s.jsxs("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors "+(j===e.id?"bg-primary/10 border-primary":"hover:bg-muted/50"),onClick:()=>N(e.id),children:[s.jsx("div",{className:"flex items-start justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[K(e.type),s.jsx(A,{type:"text",value:e.name,onChange:s=>{s.stopPropagation(),_(e.id,s.target.value)},onClick:e=>e.stopPropagation(),className:"h-7 px-2 flex-1"})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(E,{variant:"outline",className:`text-xs ${Q(e.type)}`,children:e.type}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(D,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),W(e.id)},title:e.visible?"Hide":"Show",children:s.jsx(e.visible?r:o,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),U(e.id)},className:e.editable?"text-primary":"",title:e.editable?"Lock":"Edit",children:s.jsx(d,{className:"w-3 h-3"})}),s.jsx(D,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),Z(e.id)},className:"text-destructive hover:text-destructive",title:"Delete",children:s.jsx(m,{className:"w-3 h-3"})})]})]}),"circle"===e.type&&e.radius&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Radius: ",(e.radius/1e3).toFixed(2)," km"]})]},e.id)),0===H.length&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(a,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-sm",children:z?"No geofences found":"No geofences created yet"}),!z&&s.jsx("p",{className:"text-xs mt-1",children:"Click a shape button above to start drawing"})]})]})})]})]})})},P=({vehicles:l=[],facilities:t=[],forceSimulatedView:n=!1,onVehicleAction:c})=>{const d=V(),m=l.length>0?l:d.vehicles,j=t.length>0?t:d.facilities,[N,w]=e.useState("map"),[v,y]=e.useState(null),[C,S]=e.useState(null),[L,M]=e.useState(null),[A,O]=e.useState(null),[P,W]=e.useState([]),[U,Z]=e.useState(!1),[_,q]=e.useState([{id:"vehicles",name:"Live Vehicles",icon:s.jsx(g,{className:"w-4 h-4"}),enabled:!0,color:"text-blue-500",count:m.length},{id:"facilities",name:"Facilities",icon:s.jsx(a,{className:"w-4 h-4"}),enabled:!0,color:"text-green-500",count:j.length},{id:"geofences",name:"Geofences",icon:s.jsx(i,{className:"w-4 h-4"}),enabled:!1,color:"text-purple-500",count:P.length},{id:"routes",name:"Routes",icon:s.jsx(u,{className:"w-4 h-4"}),enabled:!1,color:"text-orange-500"},{id:"traffic",name:"Traffic",icon:s.jsx(h,{className:"w-4 h-4"}),enabled:!1,color:"text-red-500"},{id:"transit",name:"Transit",icon:s.jsx(x,{className:"w-4 h-4"}),enabled:!1,color:"text-indigo-500"},{id:"bicycling",name:"Bicycling",icon:s.jsx(p,{className:"w-4 h-4"}),enabled:!1,color:"text-teal-500"}]);e.useEffect(()=>{q(e=>e.map(e=>{switch(e.id){case"vehicles":const s=m.filter(e=>"active"===e.status).length;return{...e,count:`${s}/${m.length}`};case"facilities":const a=j.filter(e=>"operational"===e.status).length;return{...e,count:`${a}/${j.length}`};case"geofences":return{...e,count:P.length};default:return e}}))},[m,j,P.length]);const J=e.useCallback(()=>{document.querySelector(".map-container")},[]),Y=e.useCallback(e=>{q(s=>s.map(s=>{if(s.id===e){const a=!s.enabled;if(v)switch(e){case"traffic":if(a){const e=new google.maps.TrafficLayer;e.setMap(v),S(e)}else C&&(C.setMap(null),S(null));break;case"transit":if(a){const e=new google.maps.TransitLayer;e.setMap(v),M(e)}else L&&(L.setMap(null),M(null));break;case"bicycling":if(a){const e=new google.maps.BicyclingLayer;e.setMap(v),O(e)}else A&&(A.setMap(null),O(null))}return{...s,enabled:a}}return s}))},[v,C,L,A]),H=e.useCallback(e=>{W(s=>[...s,e])},[]),K=e.useCallback(e=>{W(s=>s.map(s=>s.id===e.id?e:s))},[]),Q=e.useCallback(e=>{W(s=>s.filter(s=>s.id!==e))},[]),X=e.useCallback(e=>{if(q(s=>s.map(s=>({...s,enabled:e}))),v)if(e){const e=new google.maps.TrafficLayer;e.setMap(v),S(e);const s=new google.maps.TransitLayer;s.setMap(v),M(s);const a=new google.maps.BicyclingLayer;a.setMap(v),O(a)}else C?.setMap(null),S(null),L?.setMap(null),M(null),A?.setMap(null),O(null)},[v,C,L,A]);return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"absolute top-14 left-2 z-10",children:U?s.jsx(k,{className:"p-3 border rounded-lg shadow-xl bg-background/95 backdrop-blur w-[600px] animate-in slide-in-from-top-2 duration-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Map Layers"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(e=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(I,{id:e.id,checked:e.enabled,onCheckedChange:()=>Y(e.id),className:"scale-90"}),s.jsxs(F,{htmlFor:e.id,className:`flex items-center gap-1 cursor-pointer text-sm ${e.enabled?e.color:"text-muted-foreground"}`,children:[e.icon,s.jsx("span",{children:e.name}),void 0!==e.count&&s.jsx(E,{variant:"secondary",className:"ml-1 px-1.5 py-0 h-5 text-xs",children:e.count})]})]},e.id))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>X(!0),className:"text-xs h-7",children:[s.jsx(r,{className:"w-3 h-3 mr-1"}),"All"]}),s.jsxs(D,{size:"sm",variant:"outline",onClick:()=>X(!1),className:"text-xs h-7",children:[s.jsx(o,{className:"w-3 h-3 mr-1"}),"None"]}),s.jsx(D,{size:"sm",variant:"ghost",onClick:()=>Z(!1),className:"text-xs h-7 w-7 p-0",children:s.jsx(b,{className:"w-3 h-3"})})]})]})}):s.jsxs(D,{size:"sm",variant:"secondary",onClick:()=>Z(!0),className:"shadow-lg bg-background/95 backdrop-blur border border-white/10",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"Show Layers"]})}),s.jsx("div",{className:"flex-1 relative",children:s.jsxs(z,{value:N,onValueChange:w,className:"h-full",children:[s.jsxs(R,{className:"absolute top-2 left-2 z-10 bg-background/95 backdrop-blur border border-white/10 shadow-lg rounded-lg h-9",children:[s.jsx(T,{value:"map",className:"text-xs px-3",children:"Map View"}),s.jsxs(T,{value:"geofencing",className:"text-xs px-3",children:["Geofencing",P.length>0&&s.jsx(E,{variant:"secondary",className:"ml-2 px-1.5 py-0 h-4 min-w-[1.25rem] justify-center",children:P.length})]})]}),s.jsx(G,{value:"map",className:"h-full mt-0",children:s.jsx("div",{className:"map-container h-full",children:s.jsx($,{vehicles:_.find(e=>"vehicles"===e.id)?.enabled?m:[],facilities:_.find(e=>"facilities"===e.id)?.enabled?j:[],showVehicles:_.find(e=>"vehicles"===e.id)?.enabled,showFacilities:_.find(e=>"facilities"===e.id)?.enabled,showRoutes:_.find(e=>"routes"===e.id)?.enabled,onReady:J,className:"h-full",forceSimulatedView:n,onVehicleAction:c})})}),s.jsx(G,{value:"geofencing",className:"h-full mt-0",children:s.jsxs("div",{className:"flex h-full",children:[s.jsx("div",{className:"flex-1",children:s.jsx($,{vehicles:_.find(e=>"vehicles"===e.id)?.enabled?m:[],facilities:_.find(e=>"facilities"===e.id)?.enabled?j:[],showVehicles:_.find(e=>"vehicles"===e.id)?.enabled,showFacilities:_.find(e=>"facilities"===e.id)?.enabled,showRoutes:!1,onVehicleAction:c,onReady:()=>{setTimeout(()=>{document.querySelector(".map-container")&&y(null)},100)},className:"h-full"})}),s.jsx(B,{map:v,onGeofenceCreate:H,onGeofenceUpdate:K,onGeofenceDelete:Q,initialGeofences:P})]})})]})})]})},W=({vehicles:l,facilities:t=[],height:n="500px",onVehicleSelect:c,showLegend:r=!0,enableRealTime:o=!0,variant:d="default",forceSimulatedView:m=!1})=>{const u=V(),[x,p]=j.useState(!1),[f,b]=j.useState(""),C=(e,s)=>{"maintenance"===e&&(b(s),p(!0))},D=e.useMemo(()=>{const e={active:0,idle:0,charging:0,service:0,emergency:0,offline:0};return l.forEach(s=>{e.hasOwnProperty(s.status)&&e[s.status]++}),e},[l]),A=[{icon:s.jsx(g,{className:"w-4 h-4"}),label:"Active",count:D.active,color:"bg-green-500",textColor:"text-green-700",bgColor:"bg-green-50"},{icon:s.jsx(i,{className:"w-4 h-4"}),label:"Idle",count:D.idle,color:"bg-gray-400",textColor:"text-gray-700",bgColor:"bg-gray-50"},{icon:s.jsx(N,{className:"w-4 h-4"}),label:"Charging",count:D.charging,color:"bg-blue-500",textColor:"text-blue-700",bgColor:"bg-blue-50"},{icon:s.jsx(w,{className:"w-4 h-4"}),label:"Service",count:D.service,color:"bg-yellow-500",textColor:"text-yellow-700",bgColor:"bg-yellow-50"},{icon:s.jsx(h,{className:"w-4 h-4"}),label:"Emergency",count:D.emergency,color:"bg-red-500",textColor:"text-red-700",bgColor:"bg-red-50"},{icon:s.jsx(v,{className:"w-4 h-4"}),label:"Offline",count:D.offline,color:"bg-gray-300",textColor:"text-gray-600",bgColor:"bg-gray-50"}].filter(e=>e.count>0);return"immersive"===d?s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("div",{style:{height:n},className:"w-full",children:s.jsx(P,{vehicles:l,facilities:t,enableRealTime:o,onVehicleSelect:c,height:n,forceSimulatedView:m,onVehicleAction:C})}),s.jsx(y,{open:x,onOpenChange:p,defaultVehicleId:f,data:u}),r&&A.length>0&&s.jsx("div",{className:"absolute bottom-4 left-4 z-10",children:s.jsxs("div",{className:"shadow-lg bg-slate-900/90 backdrop-blur-md border border-white/10 rounded-lg p-3",children:[s.jsx("div",{className:"text-[10px] font-semibold text-slate-400 uppercase tracking-wide mb-2",children:"Vehicle Status"}),s.jsx("div",{className:"space-y-1.5",children:A.map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between gap-3 px-2 py-1.5 rounded-md hover:bg-white/5 transition-colors cursor-default",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${e.color.replace("bg-","bg-")}`}),s.jsx("span",{className:"text-xs font-medium text-slate-300",children:e.label})]}),s.jsx(E,{variant:"outline",className:"h-4 px-1.5 text-[10px] bg-slate-800 border-slate-700 text-slate-400",children:e.count})]},a))})]})}),r&&t.length>0&&s.jsx("div",{className:"absolute bottom-4 right-4 z-10",children:s.jsxs("div",{className:"shadow-lg bg-slate-900/90 backdrop-blur-md border border-white/10 rounded-lg p-3 flex items-center gap-2",children:[s.jsx(a,{className:"w-3 h-3 text-emerald-500"}),s.jsxs("span",{className:"text-xs font-medium text-slate-300",children:[t.length," Locations"]})]})})]}):s.jsxs(k,{className:"w-full","data-testid":"fleet-map",children:[s.jsx(S,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(L,{className:"flex items-center gap-2 text-lg",children:[s.jsx(a,{className:"w-5 h-5 text-primary"}),"Live Fleet Map",o&&s.jsxs(E,{variant:"outline",className:"ml-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-1.5 animate-pulse"}),"Real-time"]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.length," ",1===l.length?"vehicle":"vehicles"," tracked"]})]})}),s.jsx(M,{className:"p-0",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{style:{height:n},className:"w-full",children:[s.jsx(P,{vehicles:l,facilities:t,enableRealTime:o,onVehicleSelect:c,height:n,forceSimulatedView:m,onVehicleAction:C}),s.jsx(y,{open:x,onOpenChange:p,defaultVehicleId:f,data:u})]}),r&&A.length>0&&s.jsx("div",{className:"absolute bottom-4 left-4 z-10",children:s.jsxs(k,{className:"shadow-lg bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/90",children:[s.jsx(S,{className:"pb-2 pt-3 px-3",children:s.jsx(L,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Vehicle Status"})}),s.jsx(M,{className:"px-3 pb-3 pt-0",children:s.jsx("div",{className:"space-y-1.5",children:A.map((e,a)=>s.jsxs("div",{className:`flex items-center justify-between gap-3 px-2 py-1.5 rounded-md ${e.bgColor} transition-colors hover:opacity-80`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e.color} flex items-center justify-center`,children:s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"})}),s.jsx("span",{className:`text-sm font-medium ${e.textColor}`,children:e.label})]}),s.jsx(E,{variant:"secondary",className:"h-5 px-2 text-xs font-semibold",children:e.count})]},a))})})]})}),r&&t.length>0&&s.jsx("div",{className:"absolute bottom-4 right-4 z-10",children:s.jsxs(k,{className:"shadow-lg bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/90",children:[s.jsx(S,{className:"pb-2 pt-3 px-3",children:s.jsx(L,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Facilities"})}),s.jsx(M,{className:"px-3 pb-3 pt-0",children:s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5",children:[s.jsx(a,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{className:"text-sm font-medium text-green-700",children:[t.length," ",1===t.length?"location":"locations"]})]})})]})})]})})]})};export{W as P};
