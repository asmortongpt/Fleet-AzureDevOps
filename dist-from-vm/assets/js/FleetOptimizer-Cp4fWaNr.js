function e(){const[e,M]=s.useState([]),[U,$]=s.useState([]),[O,T]=s.useState(null),[A,I]=s.useState(!0),[E,V]=s.useState("heatmap");s.useEffect(()=>{k(),B(),D()},[]);const k=async()=>{I(!0);try{const e=await m.get("/fleet-optimizer/utilization-heatmap");M(e??[])}catch(e){h.error("Error fetching utilization data:",e),x.error("Failed to load utilization data")}finally{I(!1)}},B=async()=>{try{const e=await m.get("/fleet-optimizer/recommendations");$(e??[])}catch(e){h.error("Error fetching recommendations:",e),x.error("Failed to load recommendations")}},D=async()=>{try{const e=await m.get("/fleet-optimizer/optimal-fleet-size?avgDailyDemand=50");e&&T(e)}catch(e){h.error("Error fetching fleet size:",e)}},G=e=>60>e||e>85?e>=30&&60>e?"text-yellow-700":30>e?"text-red-700":"text-blue-700":"text-green-700",H=e=>{const s={critical:{color:"destructive",icon:d},high:{color:"default",icon:o},medium:{color:"secondary",icon:o},low:{color:"outline",icon:n}},i=s[e]||s.medium;return t.jsxs(S,{variant:i.color,className:"flex items-center gap-1",children:[t.jsx(i.icon,{className:"h-3 w-3",weight:"fill"}),e.toUpperCase()]})},q=e=>{const s={retire:{icon:d,color:"text-red-600"},reassign:{icon:c,color:"text-blue-600"},optimize:{icon:r,color:"text-yellow-600"},maintain:{icon:n,color:"text-green-600"},expand:{icon:i,color:"text-purple-600"}},a=s[e]||s.maintain;return t.jsx(a.icon,{className:`h-4 w-4 ${a.color}`,weight:"fill"})};return A?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading fleet optimization data..."})]})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[t.jsx(i,{className:"h-8 w-8 text-blue-600",weight:"fill"}),"Fleet Utilization Optimizer"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"ML-powered analysis and recommendations for fleet optimization"})]}),O&&t.jsxs(j,{className:"border-l-4 border-l-blue-600",children:[t.jsx(g,{children:t.jsxs(p,{className:"flex items-center gap-2",children:[t.jsx(a,{className:"h-5 w-5",weight:"fill"}),"Fleet Size Analysis"]})}),t.jsxs(u,{children:[t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Current Fleet Size"}),t.jsx("div",{className:"text-3xl font-bold",children:O.currentSize}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Active vehicles"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Optimal Fleet Size"}),t.jsx("div",{className:"text-3xl font-bold text-blue-600",children:O.optimalSize}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Recommended"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Potential Savings"}),t.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["$",O.potentialSavings.toLocaleString()]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Annual"})]})]}),t.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:t.jsx("p",{className:"text-sm",children:O.recommendation})})]})]}),t.jsxs(v,{value:E,onValueChange:V,children:[t.jsxs(N,{children:[t.jsx(f,{value:"heatmap",children:"Utilization Heatmap"}),t.jsx(f,{value:"recommendations",children:"Recommendations"})]}),t.jsxs(b,{value:"heatmap",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs(j,{children:[t.jsx(g,{className:"pb-3",children:t.jsx(p,{className:"text-sm font-medium",children:"Optimal Utilization"})}),t.jsxs(u,{children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.utilizationRate>=60&&85>=e.utilizationRate).length}),t.jsx("div",{className:"text-xs text-gray-600",children:"60-85% range"})]})]}),t.jsxs(j,{children:[t.jsx(g,{className:"pb-3",children:t.jsx(p,{className:"text-sm font-medium",children:"Underutilized"})}),t.jsxs(u,{children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(e=>30>e.utilizationRate).length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Below 30%"})]})]}),t.jsxs(j,{children:[t.jsx(g,{className:"pb-3",children:t.jsx(p,{className:"text-sm font-medium",children:"Overutilized"})}),t.jsxs(u,{children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>e.utilizationRate>90).length}),t.jsx("div",{className:"text-xs text-gray-600",children:"Above 90%"})]})]}),t.jsxs(j,{children:[t.jsx(g,{className:"pb-3",children:t.jsx(p,{className:"text-sm font-medium",children:"Total Savings Opportunity"})}),t.jsxs(u,{children:[t.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",e.reduce((e,s)=>e+s.potentialSavings,0).toLocaleString()]}),t.jsx("div",{className:"text-xs text-gray-600",children:"Potential annual"})]})]})]}),t.jsxs(j,{children:[t.jsxs(g,{children:[t.jsx(p,{children:"Vehicle Utilization Heatmap"}),t.jsx(y,{children:"Visual representation of fleet utilization efficiency"})]}),t.jsx(u,{children:t.jsxs(w,{children:[t.jsx(R,{children:t.jsxs(C,{children:[t.jsx(F,{children:"Vehicle"}),t.jsx(F,{children:"Utilization Rate"}),t.jsx(F,{children:"Total Miles"}),t.jsx(F,{children:"Trips"}),t.jsx(F,{children:"Cost/Mile"}),t.jsx(F,{children:"ROI"}),t.jsx(F,{children:"Status"}),t.jsx(F,{children:"Recommendation"})]})}),t.jsx(L,{children:e.map(e=>{return t.jsxs(C,{children:[t.jsx(P,{className:"font-medium",children:e.vehicleNumber}),t.jsx(P,{children:t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"px-3 py-1 rounded-full text-sm font-semibold inline-block "+(s=e.utilizationRate,60>s||s>85?s>=30&&60>s?"bg-yellow-100":30>s?"bg-red-100":"bg-blue-100":"bg-green-100"),children:t.jsxs("span",{className:G(e.utilizationRate),children:[e.utilizationRate.toFixed(1),"%"]})}),t.jsx(z,{value:e.utilizationRate,className:"h-2"})]})}),t.jsx(P,{children:e.totalMiles.toLocaleString()}),t.jsx(P,{children:e.tripsCount}),t.jsxs(P,{children:["$",e.costPerMile.toFixed(2)]}),t.jsx(P,{children:t.jsxs("span",{className:0>e.roi?"text-red-600":"text-green-600",children:[e.roi.toFixed(1),"%"]})}),t.jsx(P,{children:q(e.recommendationType)}),t.jsxs(P,{className:"max-w-xs",children:[t.jsx("div",{className:"text-sm",children:e.recommendation}),e.potentialSavings>0&&t.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[t.jsx(l,{className:"h-3 w-3 inline",weight:"fill"}),"Save $",e.potentialSavings.toLocaleString(),"/year"]})]})]},e.vehicleId);var s})})]})})]})]}),t.jsx(b,{value:"recommendations",className:"space-y-6",children:t.jsxs(j,{children:[t.jsxs(g,{children:[t.jsxs(p,{className:"flex items-center gap-2",children:[t.jsx(r,{className:"h-5 w-5 text-yellow-600",weight:"fill"}),"AI-Generated Recommendations"]}),t.jsx(y,{children:"Machine learning insights for fleet optimization"})]}),t.jsx(u,{className:"space-y-4",children:U.length>0?U.map((e,s)=>t.jsx(j,{className:"border-l-4 border-l-blue-600",children:t.jsxs(u,{className:"pt-6",children:[t.jsx("div",{className:"flex items-start justify-between mb-3",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"font-semibold text-lg",children:e.title}),H(e.priority)]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description})]})}),t.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-500",children:"Potential Savings"}),t.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",e.potentialSavings.toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-500",children:"Implementation Cost"}),t.jsxs("div",{className:"text-lg font-bold",children:["$",e.implementationCost.toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-500",children:"Payback Period"}),t.jsxs("div",{className:"text-lg font-bold",children:[e.paybackPeriodMonths," months"]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-500",children:"Confidence Score"}),t.jsxs("div",{className:"text-lg font-bold",children:[(100*e.confidenceScore).toFixed(0),"%"]})]})]})]})},e.id||s)):t.jsx("div",{className:"text-center py-8 text-gray-500",children:"No recommendations available at this time."})})]})})]})]})}import{r as s,j as t,bf as i,b4 as a,aK as l,bg as r,ah as n,b5 as c,C as d,bh as o}from"./react-core-hQu9tqS1.js";import{t as x}from"./index-savvei9t.js";import{o as m,p as h,C as j,d as g,e as p,f as u,T as v,a as N,b as f,c as b,i as y,P as z,B as S}from"./index-BDwglPMF.js";import{T as w,a as R,b as C,c as F,d as L,e as P}from"./table-_lE51wjz.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as FleetOptimizer};
