function e(){const[e,k]=s.useState("map"),[O,_]=s.useState([]),[z,B]=s.useState([]),[E,G]=s.useState(null),[M,V]=s.useState([]),[q,H]=s.useState(null),[J,K]=s.useState(!1),[Q,U]=s.useState("37.7749"),[W,X]=s.useState("-122.4194"),[Y,Z]=s.useState("25"),[ee,se]=s.useState("regular");s.useEffect(()=>{ae()},[]);const ae=async()=>{await Promise.all([te(),ie(),re(),le(),ce()])},te=async()=>{K(!0);try{const e=await x.get(`/fuel-purchasing/prices/nearby?lat=${Q}&lng=${W}&radius=${Y}&fuelType=${ee}`);_(e)}catch(e){d.error("Failed to load nearby stations")}finally{K(!1)}},ie=async()=>{try{const e=await x.get(`/fuel-purchasing/forecast?fuelType=${ee}&days=14`);B(e)}catch(e){}},re=async()=>{try{const e=await x.get(`/fuel-purchasing/forecast/timing?fuelType=${ee}&currentPrice=3.45`);G(e)}catch(e){}},le=async()=>{try{const e=await x.get("/fuel-purchasing/contracts?status=active");V(e)}catch(e){}},ce=async()=>{try{const e=(new Date).toISOString().split("T")[0],s=new Date(Date.now()-2592e6).toISOString().split("T")[0],a=await x.get(`/fuel-purchasing/savings?startDate=${s}&endDate=${e}`);H(a)}catch(e){}},ne=e=>`$${e.toFixed(3)}`;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(t,{className:"h-8 w-8 text-blue-600",weight:"fill"}),"Fuel Purchasing Intelligence"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Real-time pricing, predictive analytics, and optimization for smart fuel purchasing"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs(h,{children:[a.jsx(o,{className:"pb-3",children:a.jsx(m,{className:"text-sm font-medium",children:"Total Savings (30d)"})}),a.jsxs(j,{children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",q?.totalSavings.toFixed(0)||"0"]}),a.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[q?.totalGallons.toFixed(0)||"0"," gallons purchased"]})]})]}),a.jsxs(h,{children:[a.jsx(o,{className:"pb-3",children:a.jsx(m,{className:"text-sm font-medium",children:"Avg Price Paid"})}),a.jsxs(j,{children:[a.jsx("div",{className:"text-2xl font-bold",children:ne(q?.averagePricePaid||0)}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"per gallon"})]})]}),a.jsxs(h,{children:[a.jsx(o,{className:"pb-3",children:a.jsx(m,{className:"text-sm font-medium",children:"Market Average"})}),a.jsxs(j,{children:[a.jsx("div",{className:"text-2xl font-bold",children:ne(q?.marketAveragePrice||0)}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"per gallon"})]})]}),a.jsxs(h,{children:[a.jsx(o,{className:"pb-3",children:a.jsx(m,{className:"text-sm font-medium",children:"Active Contracts"})}),a.jsxs(j,{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:M.length}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"supplier agreements"})]})]})]}),E&&a.jsxs(h,{className:"border-l-4 border-l-blue-600",children:[a.jsx(o,{children:a.jsxs(m,{className:"flex items-center gap-2",children:[a.jsx(i,{className:"h-5 w-5 text-yellow-600",weight:"fill"}),"Purchase Timing Recommendation"]})}),a.jsx(j,{children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`p-3 rounded-lg bg-gray-100 ${(e=>{switch(e){case"buy_now":return"text-green-600";case"wait":return"text-yellow-600";default:return"text-blue-600"}})(E.recommendation)}`,children:(e=>{switch(e){case"buy_now":return a.jsx(n,{className:"h-5 w-5",weight:"fill"});case"wait":return a.jsx(c,{className:"h-5 w-5",weight:"fill"});default:return a.jsx(l,{className:"h-5 w-5",weight:"fill"})}})(E.recommendation)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(u,{variant:"secondary",className:"uppercase",children:E.recommendation.replace("_"," ")}),a.jsxs("span",{className:"text-sm text-gray-600",children:[E.confidence,"% confidence"]})]}),a.jsx("p",{className:"text-sm mb-3",children:E.reasoning}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Current Price"}),a.jsx("div",{className:"font-semibold",children:ne(E.currentPrice)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Forecasted Price"}),a.jsx("div",{className:"font-semibold",children:ne(E.forecastedPrice)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Expected Savings"}),a.jsxs("div",{className:"font-semibold text-green-600",children:["$",E.expectedSavings.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Optimal Date"}),a.jsx("div",{className:"font-semibold",children:E.optimalPurchaseDate})]})]})]})]})})]}),a.jsxs(g,{value:e,onValueChange:k,children:[a.jsxs(p,{children:[a.jsx(v,{value:"map",children:"Price Map"}),a.jsx(v,{value:"forecasts",children:"Price Forecasts"}),a.jsx(v,{value:"contracts",children:"Contracts"}),a.jsx(v,{value:"alerts",children:"Alerts"}),a.jsx(v,{value:"savings",children:"Savings Calculator"})]}),a.jsxs(f,{value:"map",className:"space-y-6",children:[a.jsxs(h,{children:[a.jsxs(o,{children:[a.jsx(m,{children:"Search Fuel Stations"}),a.jsx(N,{children:"Find the best fuel prices near you"})]}),a.jsx(j,{children:a.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx(w,{children:"Latitude"}),a.jsx(y,{value:Q,onChange:e=>U(e.target.value),placeholder:"37.7749"})]}),a.jsxs("div",{children:[a.jsx(w,{children:"Longitude"}),a.jsx(y,{value:W,onChange:e=>X(e.target.value),placeholder:"-122.4194"})]}),a.jsxs("div",{children:[a.jsx(w,{children:"Radius (miles)"}),a.jsx(y,{value:Y,onChange:e=>Z(e.target.value),placeholder:"25"})]}),a.jsxs("div",{children:[a.jsx(w,{children:"Fuel Type"}),a.jsxs(S,{value:ee,onValueChange:se,children:[a.jsx(P,{children:a.jsx(F,{})}),a.jsxs(C,{children:[a.jsx($,{value:"regular",children:"Regular"}),a.jsx($,{value:"premium",children:"Premium"}),a.jsx($,{value:"diesel",children:"Diesel"})]})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs(b,{onClick:te,className:"w-full",children:[a.jsx(r,{className:"h-4 w-4 mr-2"}),"Search"]})})]})})]}),a.jsxs(h,{children:[a.jsxs(o,{children:[a.jsxs(m,{children:["Nearby Stations (",O.length,")"]}),a.jsx(N,{children:"Sorted by distance"})]}),a.jsx(j,{children:J?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading stations..."})]}):O.length>0?a.jsxs(T,{children:[a.jsx(D,{children:a.jsxs(L,{children:[a.jsx(A,{children:"Station"}),a.jsx(A,{children:"Location"}),a.jsx(A,{children:"Distance"}),a.jsx(A,{children:"Price"}),a.jsx(A,{children:"Features"}),a.jsx(A,{children:"Rating"})]})}),a.jsx(I,{children:O.map(e=>a.jsxs(L,{children:[a.jsxs(R,{children:[a.jsx("div",{className:"font-medium",children:e.stationName}),a.jsx("div",{className:"text-sm text-gray-600",children:e.brand})]}),a.jsx(R,{children:a.jsxs("div",{className:"text-sm",children:[e.address,a.jsx("br",{}),e.city,", ",e.state]})}),a.jsx(R,{children:a.jsxs(u,{variant:"outline",children:[e.distance.toFixed(1)," mi"]})}),a.jsx(R,{children:a.jsx("div",{className:"text-lg font-bold text-green-600",children:ne(e.currentPrices[ee]||0)})}),a.jsx(R,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:e.acceptsFleetCards&&a.jsx(u,{variant:"outline",children:"Fleet Cards"})})}),a.jsx(R,{children:a.jsxs("div",{className:"text-sm",children:[e.rating.toFixed(1),"/5"]})})]},e.id))})]}):a.jsx("div",{className:"text-center py-8 text-gray-600",children:"No stations found. Try adjusting your search criteria."})})]})]})]})]})}import{r as s,j as a,ar as t,bg as i,at as r,bB as l,C as c,ah as n}from"./react-core-hQu9tqS1.js";import{t as d}from"./index-savvei9t.js";import{o as x,C as h,d as o,e as m,f as j,B as u,T as g,a as p,b as v,c as f,i as N,I as y,h as b}from"./index-BDwglPMF.js";import{L as w}from"./label-C9sYRYKW.js";import{S,a as P,b as F,c as C,d as $}from"./select-Bmd3s7f4.js";import{T,a as D,b as L,c as A,d as I,e as R}from"./table-_lE51wjz.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as FuelPurchasing};
