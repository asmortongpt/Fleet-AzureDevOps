function e(){const[e,A]=s.useState([]),[P,E]=s.useState(!0),[M,O]=s.useState(""),[I,J]=s.useState("all"),[V,q]=s.useState("all"),[H,R]=s.useState(!1),[z,B]=s.useState(null),[G,U]=s.useState(!1),[W,$]=s.useState([]),[K,Q]=s.useState(""),[X,Y]=s.useState({task_title:"",description:"",task_type:"maintenance",priority:"medium",status:"pending",assigned_to:"",due_date:"",estimated_hours:0});s.useEffect(()=>{Z()},[]);const Z=async()=>{try{E(!0);const e=new URLSearchParams;"all"!==I&&e.append("priority",I),"all"!==V&&e.append("status",V);const s=await c.get(`/api/task-management?${e.toString()}`);if(D(s)){const e=s;A(e.data?.tasks||[])}}catch(e){o.error("Error fetching tasks:",e),d.error("Failed to load tasks")}finally{E(!1)}};e.filter(e=>!(!e.task_title.toLowerCase().includes(M.toLowerCase())&&!e.description?.toLowerCase().includes(M.toLowerCase())||"all"!==I&&e.priority!==I||"all"!==V&&e.status!==V));const ee=e.length,se=e.filter(e=>"completed"===e.status).length,te=e.filter(e=>"in_progress"===e.status).length,ae=e.filter(e=>!(!e.due_date||"completed"===e.status)&&new Date(e.due_date)<new Date).length;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"Task Management"}),t.jsx("p",{className:"text-muted-foreground",children:"Track and manage team tasks and workflows"})]}),t.jsxs(m,{open:H,onOpenChange:R,children:[t.jsx(h,{asChild:!0,children:t.jsxs(x,{children:[t.jsx(a,{className:"w-4 h-4 mr-2"}),"New Task"]})}),t.jsxs(j,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs(u,{children:[t.jsx(p,{children:"Create New Task"}),t.jsx(g,{children:"Add a new task to the workflow"})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"task-title",children:"Task Title *"}),t.jsx(v,{id:"task-title",value:X.task_title,onChange:e=>Y({...X,task_title:e.target.value}),placeholder:"Complete vehicle inspection"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"description",children:"Description"}),t.jsx(L,{id:"description",value:X.description,onChange:e=>Y({...X,description:e.target.value}),placeholder:"Task description and requirements...",rows:3})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"task-type",children:"Task Type *"}),t.jsxs(C,{value:X.task_type,onValueChange:e=>Y({...X,task_type:e}),children:[t.jsx(S,{id:"task-type",children:t.jsx(b,{})}),t.jsxs(T,{children:[t.jsx(F,{value:"maintenance",children:"Maintenance"}),t.jsx(F,{value:"inspection",children:"Inspection"}),t.jsx(F,{value:"repair",children:"Repair"}),t.jsx(F,{value:"administrative",children:"Administrative"}),t.jsx(F,{value:"safety",children:"Safety"}),t.jsx(F,{value:"training",children:"Training"}),t.jsx(F,{value:"other",children:"Other"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"priority",children:"Priority *"}),t.jsxs(C,{value:X.priority,onValueChange:e=>Y({...X,priority:e}),children:[t.jsx(S,{id:"priority",children:t.jsx(b,{})}),t.jsxs(T,{children:[t.jsx(F,{value:"low",children:"Low"}),t.jsx(F,{value:"medium",children:"Medium"}),t.jsx(F,{value:"high",children:"High"}),t.jsx(F,{value:"critical",children:"Critical"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"assigned-to",children:"Assign To"}),t.jsxs(C,{value:X.assigned_to,onValueChange:e=>Y({...X,assigned_to:e}),children:[t.jsx(S,{id:"assigned-to",children:t.jsx(b,{placeholder:"Select user"})}),t.jsxs(T,{children:[t.jsx(F,{value:"user-1",children:"John Doe"}),t.jsx(F,{value:"user-2",children:"Jane Smith"}),t.jsx(F,{value:"user-3",children:"Bob Johnson"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"due-date",children:"Due Date"}),t.jsx(v,{id:"due-date",type:"date",value:X.due_date,onChange:e=>Y({...X,due_date:e.target.value})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"estimated-hours",children:"Estimated Hours"}),t.jsx(v,{id:"estimated-hours",type:"number",step:"0.5",value:X.estimated_hours,onChange:e=>Y({...X,estimated_hours:parseFloat(e.target.value)||0})})]})]}),t.jsxs(f,{children:[t.jsx(x,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),t.jsx(x,{onClick:async()=>{if(X.task_title)try{const e=await c.post("/api/task-management",X);if(D(e)){const s=e;s?.data?.task&&(A(e=>[...e,s.data.task]),d.success("Task created successfully"),R(!1),Y({task_title:"",description:"",task_type:"maintenance",priority:"medium",status:"pending",assigned_to:"",due_date:"",estimated_hours:0}))}}catch(e){o.error("Error creating task:",e),d.error("Failed to create task")}else d.error("Please enter a task title")},children:"Create Task"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[t.jsxs(k,{children:[t.jsx(y,{className:"pb-3",children:t.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Total Tasks"})}),t.jsxs(w,{children:[t.jsx("div",{className:"text-2xl font-bold",children:ee}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[t.jsx(r,{className:"w-3 h-3"}),"All tasks"]})]})]}),t.jsxs(k,{children:[t.jsx(y,{className:"pb-3",children:t.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"In Progress"})}),t.jsxs(w,{children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:te}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[t.jsx(i,{className:"w-3 h-3"}),"Active work"]})]})]}),t.jsxs(k,{children:[t.jsx(y,{className:"pb-3",children:t.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Completed"})}),t.jsxs(w,{children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:se}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mt-1",children:[t.jsx(l,{className:"w-3 h-3"}),ee>0?Math.round(se/ee*100):0,"% complete"]})]})]}),t.jsxs(k,{children:[t.jsx(y,{className:"pb-3",children:t.jsx(N,{className:"text-sm font-medium text-muted-foreground",children:"Overdue"})}),t.jsxs(w,{children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:ae}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[t.jsx(n,{className:"w-3 h-3"}),"Past due date"]})]})]})]})]})}import{r as s,j as t,br as a,c9 as r,as as i,ah as l,aL as n}from"./react-core-hQu9tqS1.js";import{t as d}from"./index-savvei9t.js";import{o as c,p as o,D as m,t as h,h as x,j,k as u,l as p,m as g,I as v,n as f,C as k,d as y,e as N,f as w}from"./index-BDwglPMF.js";import{L as _}from"./label-C9sYRYKW.js";import{S as C,a as S,b,c as T,d as F}from"./select-Bmd3s7f4.js";import{T as L}from"./textarea-BOBjqKNu.js";import{i as D}from"./responses-Dn12yLoR.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as TaskManagement};
