function e(e){if(!e.apiKeyRequired)return{isAvailable:!0,hasApiKey:!0,message:"Ready to use - no configuration needed",status:"valid"};const s=e.apiKeyEnvVar;if(!s)return{isAvailable:!1,hasApiKey:!1,message:"Provider configuration error",status:"invalid"};const a=P[s];return a&&""!==a.trim()?{isAvailable:!0,hasApiKey:!0,message:"API key configured and ready",status:"valid"}:{isAvailable:!1,hasApiKey:!1,message:`Missing API key: ${s} not found in environment`,status:"missing-key"}}function s(){const[s,P]=a.useState(g()),[R,K]=a.useState(s),[q,I]=a.useState(!1),[M,V]=a.useState(!0),[L,F]=a.useState(!1),[U,_]=a.useState(null),B=a.useMemo(()=>{const s=new globalThis.Map;return C.forEach(a=>{s.set(a.id,e(a))}),s},[]),D=a.useMemo(()=>C.find(e=>e.id===R),[R]),O=a.useMemo(()=>C.find(e=>e.id===s),[s]),T=a.useMemo(()=>D?B.get(D.id):null,[D,B]),z=a.useMemo(()=>R!==s&&!!T&&T.isAvailable,[R,s,T]);a.useEffect(()=>{const e=setTimeout(()=>{V(!1)},300);return()=>clearTimeout(e)},[]),a.useEffect(()=>{_(null),F(!1)},[R]);const G=a.useCallback(()=>{if(z&&D){F(!1),I(!0),_(null);try{const s=e(D);if(!s.isAvailable)throw new Error(s.message);setTimeout(()=>{try{j(R)}catch(e){I(!1),_(e instanceof Error?e.message:"Failed to save provider")}},500)}catch(s){I(!1),_(s instanceof Error?s.message:"Failed to validate provider")}}},[z,D,R]),$=a.useCallback(e=>{const a=e;if(K(a),a!==s){const e=B.get(a);e?.isAvailable&&F(!0)}},[s,B]),Z=a.useCallback(e=>{const s=B.get(e.id);return s?t.jsxs("div","valid"===s.status?{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[t.jsx(i,{className:"h-4 w-4"}),t.jsx("span",{children:s.message})]}:"missing-key"===s.status?{className:"flex items-center gap-2 text-sm text-amber-600 dark:text-amber-400",children:[t.jsx(r,{className:"h-4 w-4"}),t.jsx("span",{children:s.message})]}:{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400",children:[t.jsx(n,{className:"h-4 w-4"}),t.jsx("span",{children:s.message})]}):null},[B]);return t.jsxs("div",M?{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx(S,{className:"h-8 w-64 mb-2"}),t.jsx(S,{className:"h-4 w-96"})]}),t.jsx(f,{className:"p-6",children:t.jsx("div",{className:"space-y-4",children:[...Array(2)].map((e,s)=>t.jsxs("div",{className:"p-4 border rounded-lg",children:[t.jsx(S,{className:"h-6 w-48 mb-2"}),t.jsx(S,{className:"h-4 w-full mb-2"}),t.jsx(S,{className:"h-4 w-32"})]},s))})})]}:{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[t.jsx(l,{className:"h-6 w-6"}),"Map Provider Settings"]}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Choose your preferred mapping provider. Each option has different features, costs, and requirements."})]}),O&&t.jsxs(v,{children:[t.jsx(c,{className:"h-4 w-4"}),t.jsx(N,{children:"Current Provider"}),t.jsxs(y,{children:["You are currently using ",t.jsx("strong",{children:O.name}),"."," ",B.get(O.id)?.message]})]}),U&&t.jsxs(v,{variant:"destructive",children:[t.jsx(n,{className:"h-4 w-4"}),t.jsx(N,{children:"Error"}),t.jsx(y,{children:U})]}),t.jsxs(f,{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[t.jsx(o,{className:"h-5 w-5"}),"Available Providers"]}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a map provider and review its features before applying the change"})]}),t.jsx(k,{value:R,onValueChange:$,className:"space-y-4",disabled:q,children:C.map(e=>{const a=B.get(e.id),i=e.id===s;return t.jsx("div",{className:`border rounded-lg transition-all ${e.id===R?"border-primary bg-primary/5 shadow-sm":""} ${a?.isAvailable||i?"":"opacity-60"}`,children:t.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[t.jsx(E,{value:e.id,id:e.id,className:"mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsx(A,{htmlFor:e.id,className:"font-medium cursor-pointer",children:e.name}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),Z(e),e.notes&&t.jsx("p",{className:"text-xs text-muted-foreground mt-1 italic",children:e.notes})]}),i&&t.jsx(b,{variant:"outline",className:"text-xs",children:"Current"})]})},e.id)})}),L&&T?.isAvailable&&t.jsxs("div",{className:"mt-6 p-4 border border-dashed border-primary rounded-md bg-primary/5",children:[t.jsx("h4",{className:"font-medium text-primary mb-2",children:"Confirm Provider Switch"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Switching map providers will reload the application with the new mapping engine. Some features may work differently based on provider capabilities."}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(w,{onClick:G,disabled:q||!z,size:"sm",children:q?"Switching...":"Confirm & Switch Provider"}),t.jsx(w,{variant:"outline",onClick:()=>F(!1),disabled:q,size:"sm",children:"Cancel"})]})]})]}),D&&t.jsxs(f,{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[t.jsx(m,{className:"h-5 w-5"}),D.name," Details"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[t.jsx(d,{className:"h-4 w-4"}),"Advantages"]}),t.jsx("ul",{className:"space-y-1.5",children:D.pros.map((e,s)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx(d,{className:"h-4 w-4 text-green-500 mt-0.5"}),e]},s))})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[t.jsx(r,{className:"h-4 w-4"}),"Considerations"]}),t.jsx("ul",{className:"space-y-1.5",children:D.cons.map((e,s)=>t.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[t.jsx(r,{className:"h-4 w-4 text-amber-500 mt-0.5"}),e]},s))})]})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[t.jsx(x,{className:"h-4 w-4"}),"Pricing"]}),t.jsx("p",{className:"text-sm font-medium",children:D.cost})]}),D.apiKeyRequired&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[t.jsx(u,{className:"h-4 w-4"}),"API Key Requirement"]}),t.jsx("p",{className:"text-sm",children:t.jsx("span",T?.hasApiKey?{className:"text-green-600 dark:text-green-400",children:"API Key Configured"}:{className:"text-amber-600 dark:text-amber-400",children:"API Key Required"})}),D.setupUrl&&!T?.hasApiKey&&t.jsxs(w,{variant:"link",size:"sm",className:"mt-2 p-0 h-auto",onClick:()=>window.open(D.setupUrl,"_blank"),children:["Setup Instructions",t.jsx(p,{className:"h-3 w-3 ml-1"})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[t.jsx(h,{className:"h-4 w-4"}),"Status"]}),t.jsx("p",{className:"text-sm capitalize",children:D.status})]})]})]})]})]})}import{r as a,j as t,aA as i,I as r,bP as n,ck as l,cl as c,cm as o,Z as m,cn as d,aV as x,V as u,co as p,aB as h}from"./react-core-hQu9tqS1.js";import{g,s as j}from"./UniversalMap-ZyGzQ1ui.js";import{C as f,A as v,y as N,w as y,B as b,h as w}from"./index-BDwglPMF.js";import{L as A}from"./label-C9sYRYKW.js";import{R as k,a as E}from"./radio-group-am2T2p6t.js";import{S}from"./skeleton-D5f7LGYG.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./GoogleMap-BAYip6gy.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";const P={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},C=[{id:"leaflet",name:"Leaflet / OpenStreetMap",description:"100% free and open-source mapping solution - No API key needed",cost:"FREE - Unlimited Forever",pros:["No API key required - works immediately","No usage limits or quotas","Zero cost whatsoever","Privacy-friendly - no tracking","Large open source community","Lightweight and fast","Extensive plugin ecosystem"],cons:["Basic styling compared to commercial solutions","No Street View or 3D features","Limited geocoding capabilities","Community-maintained tile servers"],apiKeyRequired:!1,status:"available",notes:"Best choice for getting started or when budget is a concern"},{id:"google",name:"Google Maps",description:"Industry-standard mapping with rich features and best-in-class data",cost:"$200/month FREE credit (â‰ˆ28,000 map loads)",pros:["Best-in-class mapping quality","Street View integration","Real-time traffic data included","Extensive POI database","Familiar interface to all users","Excellent geocoding and routing","Advanced features (3D, indoor maps)","$200 monthly credit covers most use cases"],cons:["Requires API key setup","Costs money after free tier","Requires Google Cloud account","Usage tracking and analytics","Terms of service restrictions"],apiKeyRequired:!0,apiKeyEnvVar:"VITE_GOOGLE_MAPS_API_KEY",setupUrl:"https://console.cloud.google.com/google/maps-apis",status:"available",notes:"Recommended for production applications requiring advanced features"}];export{s as MapSettings};
