function e(){const e=c().routes||[],[g,v]=t.useState([]),[b,w]=t.useState(null),[y,N]=t.useState([]),[z,S]=t.useState({optimizeFor:"cost",considerTraffic:!0,considerWeather:!0,evAware:!0,maxStopsPerRoute:15,maxRouteDuration:480,requireChargeStops:!0,vehicleCapabilities:{range:250,chargeTime:30,capacity:2e3},prioritizeHighPriority:!0,allowLateDeliveries:!1}),[C,D]=t.useState(!1),[k,R]=t.useState(!1),[M,O]=t.useState(null),[A,E]=t.useState(null),[T,_]=t.useState("routes"),F=t.useRef(null),I=t.useMemo(()=>{try{return e.length>0?e.map(e=>({id:e.id,vehicleId:e.vehicle_id||"Unknown",driverId:e.driver_id||"Unknown",stops:e.waypoints||[],totalDistance:e.total_distance||0,totalDuration:e.estimated_duration||0,estimatedFuel:(e.total_distance||0)/18,estimatedCost:(e.total_distance||0)/18*3.85,optimizationScore:"completed"===e.status?95:"in_progress"===e.status?92:88,constraints:e.constraints||[]})):[]}catch(t){return d.error("Error transforming routes:",t),O("Failed to load routes"),[]}},[e]);t.useEffect(()=>{I.length>0?(v(I),b||w(I[0].id)):v([])},[I,b]),t.useEffect(()=>()=>{F.current&&F.current.abort()},[]);const P=t.useMemo(()=>0===g.length?{totalRoutes:0,avgOptimizationScore:0,totalDistance:0,estimatedSavings:0}:{totalRoutes:g.length,avgOptimizationScore:Math.round(g.reduce((e,t)=>e+t.optimizationScore,0)/g.length),totalDistance:g.reduce((e,t)=>e+t.totalDistance,0),estimatedSavings:g.reduce((e,t)=>e+.15*t.estimatedCost,0)},[g]);t.useMemo(()=>g.find(e=>e.id===b)||null,[g,b]),t.useCallback(()=>{},[]),t.useCallback((e,t,s)=>{},[]),t.useCallback(e=>{},[]);const $=t.useCallback(async()=>{try{if(R(!0),O(null),F.current=new AbortController,await new Promise(e=>setTimeout(e,2e3)),F.current?.signal.aborted)return;v(e=>e.map(e=>({...e,optimizationScore:Math.min(100,e.optimizationScore+Math.floor(5*Math.random())),totalDistance:.92*e.totalDistance,totalDuration:.88*e.totalDuration,estimatedCost:.85*e.estimatedCost}))),l.success("Routes optimized successfully")}catch(e){const t=e instanceof Error?e.message:"Optimization failed";O(t),l.error(t)}finally{R(!1)}},[]);return t.useCallback(async e=>{try{D(!0),O(null),await new Promise(e=>setTimeout(e,1e3)),v(t=>t.map(t=>t.id===e?{...t,optimizationScore:Math.min(100,t.optimizationScore+3),totalDistance:.95*t.totalDistance,totalDuration:.93*t.totalDuration,estimatedCost:.92*t.estimatedCost}:t)),l.success("Route re-optimized successfully")}catch(t){const e=t instanceof Error?t.message:"Re-optimization failed";l.error(e)}finally{D(!1)}},[]),t.useCallback((e,t)=>{S(s=>({...s,[e]:t}))},[]),t.useCallback(e=>{S(t=>{const s=t[e];return"boolean"==typeof s?{...t,[e]:!s}:t})},[]),t.useCallback(e=>{const t=Math.floor(e/60),s=Math.round(e%60);return t>0?`${t}h ${s}m`:`${s}m`},[]),t.useCallback(e=>90>e?75>e?"destructive":"secondary":"default",[]),t.useCallback(e=>({critical:"destructive",high:"default",medium:"secondary",low:"outline"}[e]),[]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Advanced Route Optimization"}),s.jsx("p",{className:"text-muted-foreground",children:"AI-powered route planning with EV awareness, traffic prediction, and multi-constraint optimization"})]}),s.jsx(m,{onClick:$,size:"lg",disabled:k||0===g.length,children:s.jsxs(s.Fragment,k?{children:[s.jsx("div",{className:"w-5 h-5 mr-2 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Optimizing..."]}:{children:[s.jsx(a,{className:"mr-2 h-5 w-5"}),"Optimize All Routes"]})})]}),M&&s.jsxs(u,{variant:"destructive",children:[s.jsx(i,{className:"h-4 w-4"}),s.jsx(x,{children:M})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsxs(h,{children:[s.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(f,{className:"text-sm font-medium",children:"Total Routes"}),s.jsx(r,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(j,{children:[s.jsx("div",{className:"text-2xl font-bold",children:P.totalRoutes}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Active optimization"})]})]}),s.jsxs(h,{children:[s.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(f,{className:"text-sm font-medium",children:"Avg Optimization"}),s.jsx(o,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(j,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[P.avgOptimizationScore,"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Efficiency score"})]})]}),s.jsxs(h,{children:[s.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(f,{className:"text-sm font-medium",children:"Total Distance"}),s.jsx(a,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(j,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[P.totalDistance.toFixed(1)," mi"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total planned"})]})]}),s.jsxs(h,{children:[s.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(f,{className:"text-sm font-medium",children:"Estimated Savings"}),s.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(j,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["$",P.estimatedSavings.toFixed(2)]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Optimization impact"})]})]})]})]})}import{r as t,j as s,c8 as a,a4 as i,aD as r,aI as o,aB as n}from"./react-core-hQu9tqS1.js";import{t as l}from"./index-savvei9t.js";import{u as c,p as d,h as m,A as u,w as x,C as h,d as p,e as f,f as j}from"./index-BDwglPMF.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as AdvancedRouteOptimization};
