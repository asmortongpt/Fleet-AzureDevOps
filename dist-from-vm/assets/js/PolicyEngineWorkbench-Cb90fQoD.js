function e(){const[e,G]=s.useState([]),[W,X]=s.useState(""),[$,J]=s.useState("all"),[K,Q]=s.useState("all"),[Y,Z]=s.useState(!1),[_,ee]=s.useState(null),[se,ae]=s.useState({type:"safety",mode:"monitor",status:"draft",confidenceScore:.85,requiresDualControl:!1,requiresMFAForExecution:!1,conditions:[],actions:[],scope:{},tags:[],relatedPolicies:[],executionCount:0,violationCount:0}),te=(e||[]).filter(e=>(e.name.toLowerCase().includes(W.toLowerCase())||e.description.toLowerCase().includes(W.toLowerCase()))&&("all"===$||e.type===$)&&("all"===K||e.status===K)),ie=()=>{ee(null),ae({type:"safety",mode:"monitor",status:"draft",confidenceScore:.85,requiresDualControl:!1,requiresMFAForExecution:!1,conditions:[],actions:[],scope:{},tags:[],relatedPolicies:[],executionCount:0,violationCount:0})},ne=e=>({monitor:a.jsx(h,{className:"w-4 h-4"}),"human-in-loop":a.jsx(u,{className:"w-4 h-4"}),autonomous:a.jsx(x,{className:"w-4 h-4"})}[e]),re=(e||[]).length,le=(e||[]).filter(e=>"active"===e.status).length,ce=(e||[]).reduce((e,s)=>e+s.executionCount,0),oe=(e||[]).reduce((e,s)=>e+s.violationCount,0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Policy Engine Workbench"}),a.jsx("p",{className:"text-muted-foreground",children:"AI-driven compliance automation with Monitor, Human-in-Loop, and Autonomous modes"})]}),a.jsxs(j,{open:Y,onOpenChange:e=>{Z(e),e||ie()},children:[a.jsx(p,{asChild:!0,children:a.jsxs(v,{children:[a.jsx(t,{className:"w-4 h-4 mr-2"}),"Create Policy"]})}),a.jsxs(g,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(f,{children:[a.jsx(y,{children:_?"Edit Policy":"Create New Policy"}),a.jsx(N,{children:"Define automated compliance rules with AI-powered execution"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(E,{htmlFor:"policy-name",children:"Policy Name *"}),a.jsx(C,{id:"policy-name",value:se.name,onChange:e=>ae({...se,name:e.target.value}),placeholder:"Speed Limit Enforcement"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(E,{htmlFor:"policy-type",children:"Policy Type *"}),a.jsxs(M,{value:se.type,onValueChange:e=>ae({...se,type:e}),children:[a.jsx(q,{id:"policy-type",children:a.jsx(k,{})}),a.jsxs(T,{children:[a.jsx(V,{value:"safety",children:"Safety"}),a.jsx(V,{value:"dispatch",children:"Dispatch"}),a.jsx(V,{value:"privacy",children:"Privacy"}),a.jsx(V,{value:"ev-charging",children:"EV Charging"}),a.jsx(V,{value:"payments",children:"Payments"}),a.jsx(V,{value:"maintenance",children:"Maintenance"}),a.jsx(V,{value:"osha",children:"OSHA"}),a.jsx(V,{value:"environmental",children:"Environmental"}),a.jsx(V,{value:"data-retention",children:"Data Retention"}),a.jsx(V,{value:"security",children:"Security"}),a.jsx(V,{value:"vehicle-use",children:"Vehicle Use"}),a.jsx(V,{value:"driver-behavior",children:"Driver Behavior"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(E,{htmlFor:"policy-description",children:"Description *"}),a.jsx(U,{id:"policy-description",value:se.description,onChange:e=>ae({...se,description:e.target.value}),placeholder:"Enforce speed limits and generate alerts when exceeded...",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(E,{htmlFor:"policy-mode",children:"Execution Mode"}),a.jsxs(M,{value:se.mode,onValueChange:e=>ae({...se,mode:e}),children:[a.jsx(q,{id:"policy-mode",children:a.jsx(k,{})}),a.jsxs(T,{children:[a.jsx(V,{value:"monitor",children:"Monitor (Log Only)"}),a.jsx(V,{value:"human-in-loop",children:"Human-in-Loop (Require Approval)"}),a.jsx(V,{value:"autonomous",children:"Autonomous (Auto-Execute)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(E,{htmlFor:"policy-status",children:"Status"}),a.jsxs(M,{value:se.status,onValueChange:e=>ae({...se,status:e}),children:[a.jsx(q,{id:"policy-status",children:a.jsx(k,{})}),a.jsxs(T,{children:[a.jsx(V,{value:"draft",children:"Draft"}),a.jsx(V,{value:"testing",children:"Testing"}),a.jsx(V,{value:"approved",children:"Approved"}),a.jsx(V,{value:"active",children:"Active"}),a.jsx(V,{value:"deprecated",children:"Deprecated"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(E,{htmlFor:"confidence-score",children:"AI Confidence Threshold"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(C,{id:"confidence-score",type:"range",min:"0",max:"1",step:"0.05",value:se.confidenceScore,onChange:e=>ae({...se,confidenceScore:parseFloat(e.target.value)}),className:"flex-1"}),a.jsxs("span",{className:"text-sm font-medium min-w-[3rem]",children:[Math.round(100*(se.confidenceScore||.85)),"%"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum confidence level required for automated actions"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(E,{htmlFor:"dual-control",className:"cursor-pointer",children:"Dual Control"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Require two authorized approvals"})]}),a.jsx(L,{id:"dual-control",checked:se.requiresDualControl,onCheckedChange:e=>ae({...se,requiresDualControl:e})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(E,{htmlFor:"mfa-execution",className:"cursor-pointer",children:"MFA for Execution"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Require multi-factor authentication"})]}),a.jsx(L,{id:"mfa-execution",checked:se.requiresMFAForExecution,onCheckedChange:e=>ae({...se,requiresMFAForExecution:e})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(E,{htmlFor:"category",children:"Category"}),a.jsx(C,{id:"category",value:se.category,onChange:e=>ae({...se,category:e.target.value}),placeholder:"Regulatory, Operational, Safety..."})]})]}),a.jsxs(b,{children:[a.jsx(v,{variant:"outline",onClick:()=>{Z(!1),ie()},children:"Cancel"}),a.jsxs(v,{onClick:()=>{if(!se.name||!se.description)return void m.error("Please fill in required fields");const e={id:_?.id||`policy-${Date.now()}`,tenantId:"tenant-demo",name:se.name,description:se.description,type:se.type,version:_?.version||"1.0.0",status:se.status,mode:se.mode,conditions:se.conditions||[],actions:se.actions||[],scope:se.scope||{},confidenceScore:se.confidenceScore||.85,requiresDualControl:se.requiresDualControl||!1,requiresMFAForExecution:se.requiresMFAForExecution||!1,createdBy:"Current User",createdAt:_?.createdAt||(new Date).toISOString(),lastModifiedBy:"Current User",lastModifiedAt:(new Date).toISOString(),tags:se.tags||[],category:se.category||"general",relatedPolicies:se.relatedPolicies||[],executionCount:_?.executionCount||0,violationCount:_?.violationCount||0};_?(G(s=>(s||[]).map(s=>s.id===e.id?e:s)),m.success("Policy updated successfully")):(G(s=>[...s||[],e]),m.success("Policy created successfully")),Z(!1),ie()},children:[_?"Update":"Create"," Policy"]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs(w,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(A,{className:"text-sm font-medium text-muted-foreground",children:"Total Policies"})}),a.jsxs(F,{children:[a.jsx("div",{className:"text-2xl font-bold",children:re}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(i,{className:"w-3 h-3"}),"All policies"]})]})]}),a.jsxs(w,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(A,{className:"text-sm font-medium text-muted-foreground",children:"Active Policies"})}),a.jsxs(F,{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:le}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(n,{className:"w-3 h-3"}),"Enforcing"]})]})]}),a.jsxs(w,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(A,{className:"text-sm font-medium text-muted-foreground",children:"Total Executions"})}),a.jsxs(F,{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ce}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(r,{className:"w-3 h-3"}),"All time"]})]})]}),a.jsxs(w,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(A,{className:"text-sm font-medium text-muted-foreground",children:"Violations Detected"})}),a.jsxs(F,{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:oe}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(l,{className:"w-3 h-3"}),"Flagged"]})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(C,{placeholder:"Search policies...",value:W,onChange:e=>X(e.target.value),className:"pl-10"})]}),a.jsxs(M,{value:$,onValueChange:J,children:[a.jsx(q,{className:"w-48",children:a.jsx(k,{})}),a.jsxs(T,{children:[a.jsx(V,{value:"all",children:"All Types"}),a.jsx(V,{value:"safety",children:"Safety"}),a.jsx(V,{value:"dispatch",children:"Dispatch"}),a.jsx(V,{value:"osha",children:"OSHA"}),a.jsx(V,{value:"maintenance",children:"Maintenance"})]})]}),a.jsxs(M,{value:K,onValueChange:Q,children:[a.jsx(q,{className:"w-48",children:a.jsx(k,{})}),a.jsxs(T,{children:[a.jsx(V,{value:"all",children:"All Statuses"}),a.jsx(V,{value:"draft",children:"Draft"}),a.jsx(V,{value:"testing",children:"Testing"}),a.jsx(V,{value:"active",children:"Active"}),a.jsx(V,{value:"deprecated",children:"Deprecated"})]})]})]}),a.jsxs(w,{children:[a.jsxs(S,{children:[a.jsxs(A,{children:["Policies (",te.length,")"]}),a.jsx(D,{children:"AI-powered compliance automation with configurable execution modes"})]}),a.jsx(F,{children:a.jsxs(I,{children:[a.jsx(O,{children:a.jsxs(z,{children:[a.jsx(R,{children:"Policy Name"}),a.jsx(R,{children:"Type"}),a.jsx(R,{children:"Mode"}),a.jsx(R,{children:"Confidence"}),a.jsx(R,{children:"Executions"}),a.jsx(R,{children:"Status"}),a.jsx(R,{children:"Actions"})]})}),a.jsx(B,{children:0===te.length?a.jsx(z,{children:a.jsx(H,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No policies found. Create your first policy to start automated compliance monitoring."})}):te.map(e=>{return a.jsxs(z,{children:[a.jsx(H,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:e.name}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["v",e.version]})]})}),a.jsx(H,{children:a.jsx(P,{variant:"outline",children:(i=e.type,{safety:"Safety",dispatch:"Dispatch",privacy:"Privacy","ev-charging":"EV Charging",payments:"Payments",maintenance:"Maintenance",osha:"OSHA",environmental:"Environmental","data-retention":"Data Retention",security:"Security","vehicle-use":"Vehicle Use","driver-behavior":"Driver Behavior"}[i])})}),a.jsx(H,{children:a.jsx(P,{className:(t=e.mode,{monitor:"bg-blue-100 text-blue-700","human-in-loop":"bg-yellow-100 text-yellow-700",autonomous:"bg-green-100 text-green-700"}[t]),variant:"secondary",children:a.jsxs("span",{className:"flex items-center gap-1",children:[ne(e.mode),e.mode]})})}),a.jsx(H,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"text-sm font-medium",children:[Math.round(100*e.confidenceScore),"%"]}),e.requiresDualControl&&a.jsx(P,{variant:"outline",className:"text-xs",children:"Dual"}),e.requiresMFAForExecution&&a.jsx(P,{variant:"outline",className:"text-xs",children:"MFA"})]})}),a.jsx(H,{children:a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{children:[e.executionCount," runs"]}),e.violationCount>0&&a.jsxs("div",{className:"text-xs text-orange-600",children:[e.violationCount," violations"]})]})}),a.jsx(H,{children:a.jsx(P,{className:(s=e.status,{draft:"bg-gray-100 text-gray-700",testing:"bg-blue-100 text-blue-700",approved:"bg-green-100 text-green-700",active:"bg-green-500 text-white",deprecated:"bg-orange-100 text-orange-700",archived:"bg-gray-100 text-gray-700"}[s]),variant:"secondary",children:e.status})}),a.jsx(H,{children:a.jsxs("div",{className:"flex gap-1",children:["draft"===e.status&&a.jsxs(a.Fragment,{children:[a.jsx(v,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,m.info("Starting policy simulation in sandbox environment..."),void setTimeout(()=>{G(e=>(e||[]).map(e=>e.id===s?{...e,status:"testing"}:e)),m.success("Policy test completed successfully")},2e3);var s},children:a.jsx(o,{className:"w-4 h-4"})}),a.jsx(v,{variant:"ghost",size:"sm",onClick:()=>(e=>{ee(e),ae(e),Z(!0)})(e),children:"Edit"})]}),"approved"===e.status&&a.jsx(v,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,G(e=>(e||[]).map(e=>e.id===s?{...e,status:"active"}:e)),void m.success("Policy activated");var s},children:"Activate"}),"active"===e.status&&a.jsx(v,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,G(e=>(e||[]).map(e=>e.id===s?{...e,status:"draft"}:e)),void m.success("Policy deactivated");var s},children:a.jsx(d,{className:"w-4 h-4"})})]})})]},e.id);var s,t,i})})]})})]})]})}import{r as s,j as a,br as t,ap as i,ah as n,bl as r,C as l,b8 as c,ad as o,bX as d,bm as x,af as u,ae as h}from"./react-core-hQu9tqS1.js";import{t as m}from"./index-savvei9t.js";import{D as j,t as p,h as v,j as g,k as f,l as y,m as N,I as C,n as b,C as w,d as S,e as A,f as F,i as D,B as P}from"./index-BDwglPMF.js";import{L as E}from"./label-C9sYRYKW.js";import{S as M,a as q,b as k,c as T,d as V}from"./select-Bmd3s7f4.js";import{S as L}from"./switch-9MiV1CpI.js";import{T as I,a as O,b as z,c as R,d as B,e as H}from"./table-_lE51wjz.js";import{T as U}from"./textarea-BOBjqKNu.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as PolicyEngineWorkbench};
