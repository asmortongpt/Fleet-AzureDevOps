function e(){const[e,E]=s.useState([]),[R,T]=s.useState(null),[V,A]=s.useState([]),[B,G]=s.useState([]),[L,O]=s.useState(!0),[q,K]=s.useState("leaderboard");s.useEffect(()=>{H()},[]);const H=async()=>{O(!0);try{const e=await j.get("/api/driver-scorecard/leaderboard");E(e)}catch(e){h.error("Failed to load leaderboard")}finally{O(!1)}},J=async e=>{try{T(e),K("driver-detail");const s=await j.get(`/api/driver-scorecard/driver/${e.driverId}/achievements`);A(s);const a=await j.get(`/api/driver-scorecard/driver/${e.driverId}/history`);G(a)}catch(s){h.error("Failed to load driver details")}},M=e=>"improving"===e?a.jsx(n,{className:"h-4 w-4 text-green-500",weight:"bold"}):"declining"===e?a.jsx(x,{className:"h-4 w-4 text-red-500",weight:"bold"}):a.jsx(o,{className:"h-4 w-4 text-gray-500",weight:"bold"}),Q=e=>90>e?75>e?60>e?"text-red-600":"text-yellow-600":"text-blue-600":"text-green-600";return L?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading driver scorecard..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(r,{className:"h-8 w-8 text-yellow-600",weight:"fill"}),"Driver Scorecard & Gamification"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Performance rankings, achievements, and driver engagement"})]}),a.jsxs(v,{value:q,onValueChange:K,children:[a.jsxs(N,{children:[a.jsx(g,{value:"leaderboard",children:"Leaderboard"}),a.jsx(g,{value:"driver-detail",disabled:!R,children:"Driver Detail"})]}),a.jsxs(f,{value:"leaderboard",className:"space-y-6",children:[e.length>=3&&a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs(p,{className:"border-2 border-gray-300",children:[a.jsxs(b,{className:"text-center pb-3",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx(l,{className:"h-12 w-12 text-gray-400",weight:"fill"})}),a.jsx(u,{className:"text-lg",children:e[1]?.driverName}),a.jsx(y,{children:"2nd Place"})]}),a.jsxs(w,{className:"text-center",children:[a.jsx("div",{className:`text-3xl font-bold ${Q(e[1]?.overallScore||0)}`,children:(e[1]?.overallScore||0).toFixed(1)}),a.jsx(S,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>e[1]&&J(e[1]),children:"View Details"})]})]}),a.jsxs(p,{className:"border-2 border-yellow-400 transform scale-105 shadow-lg",children:[a.jsxs(b,{className:"text-center pb-3 bg-gradient-to-b from-yellow-50 to-transparent",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx(r,{className:"h-16 w-16 text-yellow-500",weight:"fill"})}),a.jsx(u,{className:"text-xl",children:e[0]?.driverName}),a.jsx(y,{className:"font-semibold",children:"1st Place - Champion!"})]}),a.jsxs(w,{className:"text-center",children:[a.jsx("div",{className:`text-4xl font-bold ${Q(e[0]?.overallScore||0)}`,children:(e[0]?.overallScore||0).toFixed(1)}),a.jsx(F,{className:"mt-2",variant:"default",children:"Top Performer"}),a.jsx(S,{variant:"default",size:"sm",className:"mt-3 w-full",onClick:()=>e[0]&&J(e[0]),children:"View Details"})]})]}),a.jsxs(p,{className:"border-2 border-orange-300",children:[a.jsxs(b,{className:"text-center pb-3",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx(l,{className:"h-12 w-12 text-orange-600",weight:"fill"})}),a.jsx(u,{className:"text-lg",children:e[2]?.driverName}),a.jsx(y,{children:"3rd Place"})]}),a.jsxs(w,{className:"text-center",children:[a.jsx("div",{className:`text-3xl font-bold ${Q(e[2]?.overallScore||0)}`,children:(e[2]?.overallScore||0).toFixed(1)}),a.jsx(S,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>e[2]&&J(e[2]),children:"View Details"})]})]})]}),a.jsxs(p,{children:[a.jsxs(b,{children:[a.jsx(u,{children:"Full Rankings"}),a.jsx(y,{children:"All driver performance scores"})]}),a.jsx(w,{children:a.jsxs(C,{children:[a.jsx(D,{children:a.jsxs(P,{children:[a.jsx(z,{className:"w-16",children:"Rank"}),a.jsx(z,{children:"Driver"}),a.jsx(z,{children:"Overall"}),a.jsx(z,{children:"Safety"}),a.jsx(z,{children:"Efficiency"}),a.jsx(z,{children:"Compliance"}),a.jsx(z,{children:"Trend"}),a.jsx(z,{children:"Achievements"}),a.jsx(z,{})]})}),a.jsx(I,{children:e.map(e=>{return a.jsxs(P,{children:[a.jsxs($,{className:"font-bold",children:["#",e.rank]}),a.jsx($,{className:"font-medium",children:e.driverName}),a.jsx($,{children:a.jsx(F,{className:(s=e.overallScore,90>s?75>s?60>s?"bg-red-100":"bg-yellow-100":"bg-blue-100":"bg-green-100"),children:a.jsx("span",{className:Q(e.overallScore),children:e.overallScore.toFixed(1)})})}),a.jsx($,{children:e.safetyScore.toFixed(1)}),a.jsx($,{children:e.efficiencyScore.toFixed(1)}),a.jsx($,{children:e.complianceScore.toFixed(1)}),a.jsx($,{children:M(e.trend)}),a.jsx($,{children:a.jsxs(F,{variant:"outline",children:[e.achievementCount," badges"]})}),a.jsx($,{children:a.jsx(S,{variant:"ghost",size:"sm",onClick:()=>J(e),children:"Details"})})]},e.driverId);var s})})]})})]})]}),a.jsx(f,{value:"driver-detail",className:"space-y-6",children:R&&a.jsxs(a.Fragment,{children:[a.jsxs(p,{children:[a.jsx(b,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx(u,{className:"text-2xl",children:R.driverName}),a.jsxs(y,{children:["Rank #",R.rank," - Overall Score: ",R.overallScore.toFixed(1)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[M(R.trend),a.jsxs("span",{className:"text-sm text-gray-600",children:["improving"===R.trend&&"Improving","declining"===R.trend&&"Declining","stable"===R.trend&&"Stable"]})]})]})}),a.jsx(w,{className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(i,{className:"h-5 w-5 text-blue-600",weight:"fill"}),a.jsx("span",{className:"text-sm font-medium",children:"Safety"})]}),a.jsx("div",{className:"text-2xl font-bold",children:R.safetyScore.toFixed(1)}),a.jsx(k,{value:R.safetyScore,className:"h-2"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(c,{className:"h-5 w-5 text-green-600",weight:"fill"}),a.jsx("span",{className:"text-sm font-medium",children:"Efficiency"})]}),a.jsx("div",{className:"text-2xl font-bold",children:R.efficiencyScore.toFixed(1)}),a.jsx(k,{value:R.efficiencyScore,className:"h-2"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(t,{className:"h-5 w-5 text-purple-600",weight:"fill"}),a.jsx("span",{className:"text-sm font-medium",children:"Compliance"})]}),a.jsx("div",{className:"text-2xl font-bold",children:R.complianceScore.toFixed(1)}),a.jsx(k,{value:R.complianceScore,className:"h-2"})]})]})})]}),a.jsxs(p,{children:[a.jsxs(b,{children:[a.jsxs(u,{className:"flex items-center gap-2",children:[a.jsx(l,{className:"h-5 w-5",weight:"fill"}),"Achievements Earned"]}),a.jsx(y,{children:"Recognition badges and awards"})]}),a.jsx(w,{children:V.length>0?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:V.map(e=>{return a.jsx(p,{className:"border-2",children:a.jsxs(w,{className:"pt-6 text-center",children:[a.jsx("div",{className:"flex justify-center mb-3 text-yellow-600",children:(s=e.icon,a.jsx({trophy:r,"shield-check":i,"gas-pump":c,"check-circle":t,lightning:m,medal:l}[s]||r,{className:"h-6 w-6",weight:"fill"}))}),a.jsx("div",{className:"text-lg font-semibold",children:e.achievementName}),a.jsx("div",{className:"text-sm text-gray-600",children:e.achievementDescription}),a.jsxs("div",{className:"text-sm mt-1",children:["+",e.points.toString()," points"]})]})},e.id);var s})}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(d,{className:"h-12 w-12 mx-auto mb-3 text-gray-400",weight:"duotone"}),a.jsx("p",{children:"No achievements earned yet. Keep driving safely!"})]})})]})]})})]})]})}import{r as s,j as a,aN as r,d7 as l,af as i,ar as c,ah as t,bB as d,b5 as n,bk as x,cr as o,bm as m}from"./react-core-hQu9tqS1.js";import{t as h}from"./index-savvei9t.js";import{o as j,T as v,a as N,b as g,c as f,C as p,d as b,e as u,i as y,f as w,h as S,B as F,P as k}from"./index-BDwglPMF.js";import{T as C,a as D,b as P,c as z,d as I,e as $}from"./table-_lE51wjz.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as DriverScorecard};
