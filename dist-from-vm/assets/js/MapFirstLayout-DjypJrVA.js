function e({open:e=!1,onOpenChange:s,title:t,description:n,children:i,defaultSnapPoint:u="half",onSnapPointChange:p,showHandle:x=!0,className:f}){const[j,w]=a.useState(u),[v,b]=a.useState(!1),[g,N]=a.useState(0),[y,S]=a.useState(0),C=a.useRef(null),$={collapsed:"25vh",half:"50vh",full:"85vh"},k=e=>{w(e),p?.(e)};return l.jsx(d,{open:e,onOpenChange:s,children:l.jsxs(o,{side:"bottom",className:m("p-0 overflow-hidden transition-all duration-300 ease-out",f),style:{height:$[j],maxHeight:"95vh"},"data-testid":"mobile-drawer-system","data-snap-point":j,children:[x&&l.jsx("div",{className:"flex items-center justify-center py-3 cursor-grab active:cursor-grabbing touch-none",onTouchStart:e=>{b(!0),N(e.touches[0].clientY),S(e.touches[0].clientY)},onTouchMove:e=>{v&&S(e.touches[0].clientY)},onTouchEnd:()=>{if(!v)return;const e=y-g;Math.abs(e)>50&&(e>0?"full"===j?k("half"):"half"===j?k("collapsed"):s?.(!1):"collapsed"===j?k("half"):"half"===j&&k("full")),b(!1),N(0),S(0)},"data-testid":"drawer-handle",children:l.jsx("div",{className:"w-12 h-1.5 bg-slate-300 rounded-full"})}),(t||n)&&l.jsxs(r,{className:"px-4 pb-4 pt-2",children:[t&&l.jsx(c,{children:t}),n&&l.jsx(h,{children:n})]}),l.jsx("div",{ref:C,className:"overflow-y-auto px-4 pb-4",style:{height:x||t||n?`calc(${$[j]} - ${x?"3rem":"0px"} - ${t||n?"3rem":"0px"})`:$[j]},"data-testid":"drawer-content",children:i}),l.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex flex-col gap-1",children:["full","half","collapsed"].map(e=>l.jsx("button",{className:m("w-1.5 h-1.5 rounded-full transition-all",j===e?"bg-blue-500":"bg-slate-300"),onClick:()=>k(e),"aria-label":`Snap to ${e}`,"data-testid":`snap-point-${e}`},e))})]})})}function s({mapComponent:s,sidePanel:d,drawerContent:o,mapControls:r,mapRatio:c=70}){const[h,p]=a.useState(!1),[x,f]=a.useState(!1),j=100-c;return l.jsxs("div",{className:"flex flex-col md:flex-row h-screen w-full overflow-hidden bg-slate-50","data-testid":"map-first-layout",children:[l.jsxs("div",{className:m("relative bg-slate-100",x?"fixed inset-0 z-50 w-full h-full":"w-full h-[45vh] sm:h-[50vh]","md:h-full md:w-[60%]","lg:w-[70%]"),style:{width:x?"100%":void 0,...1024>window.innerWidth||x?{}:{width:`${c}%`}},"data-testid":"map-section",children:[s,r&&l.jsx("div",{className:"absolute inset-0 pointer-events-none",children:l.jsx("div",{className:"pointer-events-auto",children:r})}),l.jsx("div",{className:"lg:hidden absolute top-4 right-4 z-40",children:l.jsx(u,{variant:"default",size:"icon",onClick:()=>f(!x),className:"h-10 w-10 rounded-full shadow-lg bg-white text-slate-900 hover:bg-slate-100","data-testid":"map-fullscreen-toggle",children:l.jsx(t,{className:"h-5 w-5"})})}),!x&&l.jsx("div",{className:"md:hidden absolute bottom-4 left-1/2 -translate-x-1/2 z-40",children:l.jsxs(u,{variant:"default",size:"sm",onClick:()=>p(!0),className:"shadow-lg rounded-full px-4 h-10","data-testid":"open-drawer-btn",children:[l.jsx(n,{className:"h-4 w-4 mr-2"}),"View Details"]})})]}),l.jsxs("div",{className:m("bg-white shadow-lg overflow-hidden","hidden md:flex md:flex-col","md:w-[40%]","lg:w-[30%]"),style:{...1024>window.innerWidth?{}:{width:`${j}%`}},"data-testid":"side-panel-desktop",children:[l.jsx("div",{className:"flex-1 overflow-y-auto",children:l.jsx("div",{className:"p-4 md:p-5 lg:p-6",children:d})}),o&&l.jsx("div",{className:"hidden lg:block border-t border-slate-200 p-4 bg-slate-50",children:l.jsxs("details",{className:"group",children:[l.jsxs("summary",{className:"flex items-center justify-between cursor-pointer list-none font-semibold text-sm",children:[l.jsx("span",{children:"Extended Details"}),l.jsx(i,{className:"h-4 w-4 transition-transform group-open:rotate-90"})]}),l.jsx("div",{className:"mt-3 text-sm",children:o})]})})]}),l.jsx(e,{open:h,onOpenChange:p,title:"Fleet Details",defaultSnapPoint:"half",className:"md:hidden",children:l.jsxs("div",{className:"space-y-4",children:[d,o&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-t border-slate-200 my-4"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"font-semibold text-sm",children:"Additional Details"}),o]})]})]})})]})}import{r as a,j as l,be as t,J as n,a8 as i}from"./react-core-hQu9tqS1.js";import{S as d,a as o,b as r,c,d as h}from"./sheet-B4c1gADU.js";import{q as m,h as u}from"./index-BDwglPMF.js";export{s as M};
