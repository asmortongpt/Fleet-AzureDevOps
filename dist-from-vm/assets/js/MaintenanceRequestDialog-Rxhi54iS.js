function e({open:e,onOpenChange:v,defaultVehicleId:y="",data:g,onSuccess:f}){const[S,q]=s.useState(y),[b,C]=s.useState(""),[N,T]=s.useState("medium"),[k,D]=s.useState(""),[O,B]=s.useState(""),[V,w]=s.useState({});s.useEffect(()=>{y&&q(y)},[y]);const F=g.vehicles||[];return i.jsx(n,{open:e,onOpenChange:v,children:i.jsxs(a,{className:"max-w-2xl",children:[i.jsx(l,{children:i.jsx(t,{children:"Submit Maintenance Request"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(u,{htmlFor:"vehicle",children:"Vehicle"}),i.jsxs(h,{value:S,onValueChange:q,children:[i.jsx(o,{id:"vehicle",children:i.jsx(j,{placeholder:"Select vehicle"})}),i.jsx(x,{children:F.map(e=>i.jsxs(m,{value:e.id,children:[e.number," - ",e.make," ",e.model]},e.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(u,{htmlFor:"issue-type",children:"Issue Type"}),i.jsxs(h,{value:b,onValueChange:C,children:[i.jsx(o,{id:"issue-type",children:i.jsx(j,{placeholder:"Select issue type"})}),i.jsxs(x,{children:[i.jsx(m,{value:"Engine",children:"Engine"}),i.jsx(m,{value:"Brakes",children:"Brakes"}),i.jsx(m,{value:"Transmission",children:"Transmission"}),i.jsx(m,{value:"Electrical",children:"Electrical"}),i.jsx(m,{value:"Tires",children:"Tires"}),i.jsx(m,{value:"AC/Heating",children:"AC/Heating"}),i.jsx(m,{value:"Suspension",children:"Suspension"}),i.jsx(m,{value:"Body/Paint",children:"Body/Paint"}),i.jsx(m,{value:"Other",children:"Other"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(u,{htmlFor:"priority",children:"Priority"}),i.jsxs(h,{value:N,onValueChange:e=>T(e),children:[i.jsx(o,{id:"priority",children:i.jsx(j,{})}),i.jsxs(x,{children:[i.jsx(m,{value:"low",children:"Low"}),i.jsx(m,{value:"medium",children:"Medium"}),i.jsx(m,{value:"high",children:"High"}),i.jsx(m,{value:"urgent",children:"Urgent"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(u,{htmlFor:"requested-by",children:"Requested By"}),i.jsx(c,{id:"requested-by",placeholder:"Your name",value:O,onChange:e=>B(e.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(u,{htmlFor:"description",children:"Description"}),i.jsx(p,{id:"description",placeholder:"Describe the issue in detail...",rows:4,value:k,onChange:e=>D(e.target.value)})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(d,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),i.jsx(d,{onClick:()=>{if(!(()=>{const e={};return S||(e.selectedVehicle="Vehicle is required"),b||(e.issueType="Issue type is required"),k?10>k.length&&(e.description="Description must be at least 10 characters"):e.description="Description is required",O||(e.requestedBy="Requester name is required"),w(e),0===Object.keys(e).length})()){const e=Object.keys(V).map(e=>e.replace(/([A-Z])/g," $1").trim()).join(", ");return void r.error(`Missing or invalid fields: ${e}`)}const e=g.vehicles?.find(e=>e.id===S);if(!e)return;const s={id:`mr-${Date.now()}`,vehicleId:e.id,vehicleNumber:e.number,issueType:b,priority:N,description:k,requestedBy:O,requestDate:(new Date).toISOString().split("T")[0],status:"pending"};g.addMaintenanceRequest(s),r.success("Maintenance request submitted"),q(""),C(""),T("medium"),D(""),B(""),w({}),v(!1),f&&f()},children:"Submit Request"})]})]})]})})}import{r as s,j as i}from"./react-core-hQu9tqS1.js";import{t as r}from"./index-savvei9t.js";import{D as n,j as a,k as l,l as t,I as c,h as d}from"./index-BDwglPMF.js";import{L as u}from"./label-C9sYRYKW.js";import{S as h,a as o,b as j,c as x,d as m}from"./select-Bmd3s7f4.js";import{T as p}from"./textarea-BOBjqKNu.js";export{e as M};
