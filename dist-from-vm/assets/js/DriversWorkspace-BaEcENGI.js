function e({driver:e,onClick:s,compact:c=!1}){return a.jsx(p,{className:f("cursor-pointer hover:bg-accent/50 transition-all border-l-4","active"===e.status?"border-l-green-500":"on_break"===e.status?"border-l-yellow-500":"border-l-gray-300"),onClick:s,children:a.jsxs(v,{className:f("p-4",c&&"p-3"),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center",children:a.jsx(r,{className:"w-5 h-5 text-muted-foreground"})}),a.jsx("div",{className:f("absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-background",(e=>{switch(e){case"active":return"bg-green-500";case"on_break":return"bg-yellow-500";case"off_duty":return"bg-gray-500";case"inactive":return"bg-red-500";default:return"bg-blue-500"}})(e.status))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-sm",children:e.name}),a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsxs(g,{variant:"outline",className:"text-[10px] px-1 h-4",children:["ID: ",e.id.slice(0,4)]}),e.vehicle&&a.jsxs("span",{className:"flex items-center gap-1",children:["• ",a.jsx(l,{className:"w-3 h-3"})," ",e.vehicle]})]})]})]}),e.performance&&a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:f("text-lg font-bold",(n=e.performance.safetyScore,90>n?80>n?"text-red-500":"text-yellow-500":"text-green-500")),children:e.performance.safetyScore}),a.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"Score"})]})]}),!c&&a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{className:"bg-secondary/50 p-2 rounded-md",children:[a.jsxs("p",{className:"text-muted-foreground mb-1 flex items-center gap-1",children:[a.jsx(t,{className:"w-3 h-3"}),"On-Time"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"font-medium",children:[e.performance?.onTimeRate,"%"]}),a.jsx(N,{value:e.performance?.onTimeRate||0,className:"h-1.5 flex-1"})]})]}),a.jsxs("div",{className:"bg-secondary/50 p-2 rounded-md",children:[a.jsxs("p",{className:"text-muted-foreground mb-1 flex items-center gap-1",children:[a.jsx(i,{className:"w-3 h-3"}),"Location"]}),a.jsx("p",{className:"font-medium truncate",children:e.location||"Unknown"})]})]})})]})});var n}function s(){const{drivers:s=[],vehicles:l=[]}=b(),[i,f]=c.useState("map"),[N,_]=c.useState(null),[D,L]=c.useState(""),[R,A]=c.useState("all"),O=c.useMemo(()=>s.filter(e=>(e.name.toLowerCase().includes(D.toLowerCase())||e.id.toLowerCase().includes(D.toLowerCase()))&&("all"===R||e.status===R)),[s,D,R]),U=c.useMemo(()=>s.find(e=>e.id===N),[s,N]),z=c.useMemo(()=>U?.assignedVehicle?l.find(e=>e.id===U.assignedVehicle||e.name===U.assignedVehicle):null,[U,l]),F=c.useMemo(()=>s.map(e=>{const s=l.find(s=>s.id===e.assignedVehicle);return s?{...s,driver:e.name}:null}).filter(Boolean),[s,l]);return a.jsxs("div",{className:"flex h-screen w-full flex-col overflow-hidden bg-background",children:[a.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-2 bg-background/95 backdrop-blur z-10",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(g,{variant:"outline",className:"h-6 gap-1",children:[a.jsx(n,{className:"h-3 w-3"}),a.jsx("span",{className:"font-medium",children:"Drivers Workspace"})]}),a.jsxs("span",{className:"text-muted-foreground text-sm",children:[O.length," active"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(w,{value:i,onValueChange:e=>f(e),children:a.jsxs(y,{className:"h-8",children:[a.jsxs(k,{value:"map",className:"text-xs px-2 h-6",children:[a.jsx(d,{className:"w-3 h-3 mr-1"})," Map"]}),a.jsxs(k,{value:"list",className:"text-xs px-2 h-6",children:[a.jsx(o,{className:"w-3 h-3 mr-1"})," Grid"]})]})})})]}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsx("div",{className:"flex-1 relative",children:"map"===i?a.jsxs("div",{className:"absolute inset-0",children:[a.jsx(j,{vehicles:F,onVehicleSelect:e=>{const a=s.find(s=>s.assignedVehicle===e);a&&_(a.id)},forceSimulatedView:!1}),a.jsxs("div",{className:"absolute top-4 left-4 w-80 flex flex-col gap-2 pointer-events-none",children:[a.jsx("div",{className:"pointer-events-auto",children:a.jsx(p,{className:"shadow-lg border-none bg-background/90 backdrop-blur-sm",children:a.jsxs("div",{className:"p-2 gap-2 flex flex-col",children:[a.jsxs("div",{className:"relative",children:[a.jsx(m,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(S,{placeholder:"Find driver...",className:"pl-8 h-9",value:D,onChange:e=>L(e.target.value)})]}),a.jsxs("div",{className:"flex gap-1 overflow-x-auto pb-1 scrollbar-hide",children:[a.jsx(g,{variant:"all"===R?"default":"outline",className:"cursor-pointer whitespace-nowrap",onClick:()=>A("all"),children:"All"}),a.jsx(g,{variant:"active"===R?"default":"outline",className:"cursor-pointer whitespace-nowrap bg-green-500/10 text-green-600 hover:bg-green-500/20 border-green-200",onClick:()=>A("active"),children:"Active"}),a.jsx(g,{variant:"on_break"===R?"default":"outline",className:"cursor-pointer whitespace-nowrap bg-yellow-500/10 text-yellow-600 hover:bg-yellow-500/20 border-yellow-200",onClick:()=>A("on_break"),children:"On Break"})]})]})})}),a.jsx(C,{className:"h-[60vh] pointer-events-auto pr-2",children:a.jsx("div",{className:"space-y-2",children:O.map(s=>a.jsx(e,{driver:{id:s.id,name:s.name,status:"off-duty"===s.status?"off_duty":"on-leave"===s.status?"inactive":s.status,performance:s.performance?{safetyScore:s.performance.safetyScore,onTimeRate:s.performance.onTimeDeliveries??0}:void 0,contact:s.phone},compact:!0,onClick:()=>_(s.id)},s.id))})})]})]}):a.jsx("div",{className:"h-full overflow-y-auto p-6 bg-slate-50 dark:bg-slate-950/50",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:O.map(s=>a.jsx(e,{driver:{id:s.id,name:s.name,status:"off-duty"===s.status?"off_duty":"on-leave"===s.status?"inactive":s.status,performance:s.performance?{safetyScore:s.performance.safetyScore,onTimeRate:s.performance.onTimeDeliveries??0}:void 0,contact:s.phone},onClick:()=>_(s.id)},s.id))})})}),U&&a.jsxs("div",{className:"w-[400px] border-l bg-background flex flex-col h-full shadow-2xl z-20 transition-all",children:[a.jsxs("div",{className:"p-4 border-b flex items-start justify-between bg-muted/20",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-200 dark:bg-slate-800 flex items-center justify-center text-xl font-bold",children:U.name.slice(0,2).toUpperCase()}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold",children:U.name}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(g,{variant:"outline",className:"uppercase text-[10px]",children:U.licenseType}),a.jsxs("span",{children:["• ",U.department]})]})]})]}),a.jsx(T,{variant:"ghost",size:"sm",onClick:()=>_(null),children:"×"})]}),a.jsx(C,{className:"flex-1",children:a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs(p,{children:[a.jsx(V,{className:"pb-2",children:a.jsx(M,{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Current Status"})}),a.jsxs(v,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(g,{className:"px-3 py-1 "+("active"===U.status?"bg-green-500":"on_break"===U.status?"bg-yellow-500":"bg-gray-500"),children:U.status.replace("_"," ").toUpperCase()}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Since 08:30 AM"})]}),U.location&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(d,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{children:U.location.address||"No address"})]}),z&&a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"ASSIGNED ASSET"}),a.jsxs("div",{className:"flex items-center gap-3 bg-muted/50 p-2 rounded-lg",children:[a.jsx("div",{className:"p-2 bg-background rounded-md border shadow-sm",children:a.jsx(n,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:U.assignedVehicle}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"International LT625"})]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(p,{children:a.jsxs(v,{className:"p-4 text-center",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx(x,{className:"w-8 h-8 text-yellow-500"})}),a.jsx("div",{className:"text-2xl font-bold",children:U.performance?.safetyScore}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Safety Score"})]})}),a.jsx(p,{children:a.jsxs(v,{className:"p-4 text-center",children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsx(t,{className:"w-8 h-8 text-green-500"})}),a.jsxs("div",{className:"text-2xl font-bold",children:[U.performance?.onTimeRate,"%"]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"On-Time Rate"})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(T,{className:"w-full",children:[a.jsx(r,{className:"w-4 h-4 mr-2"})," View Full Profile"]}),a.jsxs(T,{variant:"outline",className:"w-full",children:[a.jsx(h,{className:"w-4 h-4 mr-2"})," Contact Driver"]}),a.jsxs(T,{variant:"outline",className:"w-full",children:[a.jsx(u,{className:"w-4 h-4 mr-2"})," View Schedule"]})]})]})})]})]})]})}import{j as a,a5 as r,O as l,aw as t,aD as i,r as c,U as n,Z as d,da as o,S as m,ay as x,av as h,Y as u}from"./react-core-hQu9tqS1.js";import{P as j}from"./ProfessionalFleetMap-DPQoniTv.js";import{C as p,q as f,f as v,B as g,P as N,u as b,T as w,a as y,b as k,I as S,S as C,h as T,d as V,e as M}from"./index-BDwglPMF.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./MaintenanceRequestDialog-Rxhi54iS.js";import"./index-savvei9t.js";import"./label-C9sYRYKW.js";import"./ui-radix-C-X5Qx_8.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./select-Bmd3s7f4.js";import"./ui-menus--48tEbqQ.js";import"./ui-dialogs-C2yTnBPV.js";import"./textarea-BOBjqKNu.js";import"./GoogleMap-BAYip6gy.js";import"./switch-9MiV1CpI.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";export{s as DriversWorkspace};
