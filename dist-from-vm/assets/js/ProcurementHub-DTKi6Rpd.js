function e(){const[e,t]=s.useState(null),[l,r]=s.useState("dashboard"),[i,n]=s.useState(""),[c,d]=s.useState("all"),o=s.useMemo(()=>L.filter(e=>(!i||e.name.toLowerCase().includes(i.toLowerCase()))&&("all"===c||e.category===c)).map(e=>({id:e.id,number:e.name,status:e.status,make:e.category,model:`${e.orderCount} orders`,licensePlate:`$${e.totalSpend.toLocaleString()}`,location:e.location,fuelLevel:20*e.rating})),[i,c]),m=s.useMemo(()=>F.filter(e=>"in_transit"===e.status).map(e=>({id:e.id,name:e.trackingId,location:e.delivery,type:"delivery"})),[]),g=s.useCallback(e=>{const s=L.find(s=>s.id===e);s&&(t({type:"supplier",data:s}),r("supplier"))},[]),N=s.useMemo(()=>Array.from(new Set(L.map(e=>e.category))),[]);return a.jsxs("div",{className:"h-screen grid grid-cols-[1fr_400px]","data-testid":"procurement-hub",children:[a.jsxs("div",{className:"relative h-full",children:[a.jsx(u,{vehicles:o,facilities:m,height:"100vh",onVehicleSelect:g,showLegend:!0,enableRealTime:!1}),a.jsx("div",{className:"absolute top-4 left-4 bg-background/95 backdrop-blur rounded-lg shadow-lg z-10",children:a.jsxs("div",{className:"p-3 space-y-2",children:[a.jsxs(T,{value:c,onValueChange:d,children:[a.jsx(A,{className:"w-48","data-testid":"procurement-category-filter",children:a.jsx(I,{placeholder:"Filter by category"})}),a.jsxs(O,{children:[a.jsx(q,{value:"all",children:"All Categories"}),N.map(e=>a.jsx(q,{value:e,children:e},e))]})]}),a.jsx(x,{placeholder:"Search suppliers...",className:"w-48",value:i,onChange:e=>n(e.target.value),"data-testid":"procurement-search"})]})})]}),a.jsx("div",{className:"bg-background border-l h-full",children:a.jsxs(h,{defaultValue:"dashboard",value:l,onValueChange:r,className:"w-full",children:[a.jsxs(p,{className:"grid w-full grid-cols-4",children:[a.jsx(j,{value:"dashboard",children:"Dashboard"}),a.jsx(j,{value:"supplier",children:"Supplier"}),a.jsx(j,{value:"orders",children:"Orders"}),a.jsx(j,{value:"inventory",children:"Inventory"})]}),a.jsx(v,{value:"dashboard",className:"h-[calc(100vh-48px)] mt-0",children:a.jsx($,{})}),a.jsx(v,{value:"supplier",className:"h-[calc(100vh-48px)] mt-0",children:a.jsx(M,{supplier:"supplier"===e?.type?e.data:null,_onClose:()=>{}})}),a.jsx(v,{value:"orders",className:"h-[calc(100vh-48px)] mt-0",children:a.jsx(D,{orders:F,onOrderSelect:e=>t({type:"order",data:e})})}),a.jsx(v,{value:"inventory",className:"h-[calc(100vh-48px)] mt-0",children:a.jsx(W,{inventory:P})})]})})]})}import{r as s,j as a,aV as t,aE as l,aQ as r,a4 as i,aC as n,O as c,bQ as d,aw as o,aI as m}from"./react-core-hQu9tqS1.js";import{P as u}from"./ProfessionalFleetMap-DPQoniTv.js";import{I as x,T as h,a as p,b as j,c as v,S as g,C as N,d as f,e as y,f as b,X as S,B as w,h as C,q as k}from"./index-BDwglPMF.js";import{S as T,a as A,b as I,c as O,d as q}from"./select-Bmd3s7f4.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./MaintenanceRequestDialog-Rxhi54iS.js";import"./index-savvei9t.js";import"./label-C9sYRYKW.js";import"./ui-radix-C-X5Qx_8.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./textarea-BOBjqKNu.js";import"./GoogleMap-BAYip6gy.js";import"./switch-9MiV1CpI.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";const L=[{id:"s1",name:"AutoParts Direct",location:{lat:38.9072,lng:-77.0369},category:"Parts",orderCount:24,totalSpend:45800,rating:4.8,status:"active"},{id:"s2",name:"Fleet Services Inc",location:{lat:38.9369,lng:-77.0899},category:"Maintenance",orderCount:18,totalSpend:67200,rating:4.6,status:"active"},{id:"s3",name:"Tire Warehouse USA",location:{lat:38.8816,lng:-77.091},category:"Tires",orderCount:12,totalSpend:28900,rating:4.9,status:"active"},{id:"s4",name:"Fuel Depot Central",location:{lat:38.9216,lng:-77.0147},category:"Fuel",orderCount:45,totalSpend:125400,rating:4.5,status:"active"},{id:"s5",name:"Industrial Supplies Co",location:{lat:38.8951,lng:-77.0364},category:"Equipment",orderCount:8,totalSpend:34100,rating:4.7,status:"pending"}],F=[{id:"po-1001",supplier:"AutoParts Direct",items:12,value:4280,status:"in_transit",eta:"2 days",trackingId:"TRK-88392",delivery:{lat:38.9072,lng:-77.0369}},{id:"po-1002",supplier:"Fleet Services Inc",items:5,value:8950,status:"processing",eta:"4 days",trackingId:"TRK-88401",delivery:{lat:38.9369,lng:-77.0899}},{id:"po-1003",supplier:"Tire Warehouse USA",items:16,value:2400,status:"delivered",eta:"Delivered",trackingId:"TRK-88315",delivery:{lat:38.8816,lng:-77.091}},{id:"po-1004",supplier:"Fuel Depot Central",items:1,value:12500,status:"in_transit",eta:"1 day",trackingId:"TRK-88445",delivery:{lat:38.9216,lng:-77.0147}}],P=[{id:"inv-1",name:"Brake Pads",quantity:45,location:"Warehouse A",minStock:20,value:12.5,trend:"stable"},{id:"inv-2",name:"Oil Filters",quantity:12,location:"Warehouse B",minStock:30,value:8.75,trend:"low"},{id:"inv-3",name:"Air Filters",quantity:67,location:"Warehouse A",minStock:25,value:15.2,trend:"high"},{id:"inv-4",name:"Windshield Wipers",quantity:8,location:"Warehouse C",minStock:15,value:18,trend:"critical"}],M=({supplier:e})=>(S(),e?a.jsx(g,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:e.name}),a.jsx(w,{variant:"active"===e.status?"default":"secondary",children:e.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(N,{className:"p-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Orders"}),a.jsx("div",{className:"font-medium text-lg",children:e.orderCount})]}),a.jsxs(N,{className:"p-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Spend"}),a.jsxs("div",{className:"font-medium text-lg",children:["$",e.totalSpend.toLocaleString()]})]}),a.jsxs(N,{className:"p-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"}),a.jsxs("div",{className:"font-medium text-lg",children:["â­ ",e.rating]})]}),a.jsxs(N,{className:"p-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Category"}),a.jsx("div",{className:"font-medium",children:e.category})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(C,{className:"w-full",children:[a.jsx(r,{className:"h-4 w-4 mr-2"}),"Create Purchase Order"]}),a.jsx(C,{variant:"outline",className:"w-full",children:"View Order History"}),a.jsx(C,{variant:"outline",className:"w-full",children:"Contact Supplier"})]})]})}):a.jsx("div",{className:"p-4 text-muted-foreground",children:"Select a supplier on the map to view details"})),D=({orders:e,onOrderSelect:s})=>{const l=e=>{switch(e){case"delivered":return a.jsx(d,{className:"h-4 w-4 text-green-500"});case"in_transit":return a.jsx(c,{className:"h-4 w-4 text-blue-500"});case"processing":return a.jsx(n,{className:"h-4 w-4 text-yellow-500"});default:return a.jsx(i,{className:"h-4 w-4 text-gray-500"})}};return a.jsx(g,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Active Purchase Orders"}),e.map(e=>a.jsx(N,{className:"p-3 cursor-pointer hover:bg-accent transition-colors",onClick:()=>s(e),children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[l(e.status),a.jsx("span",{className:"font-medium",children:e.id})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.supplier}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs(w,{variant:"outline",children:[e.items," items"]}),a.jsxs(w,{variant:"secondary",children:[a.jsx(t,{className:"h-3 w-3 mr-1"}),"$",e.value.toLocaleString()]})]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["ETA: ",e.eta]})]})})},e.id))]})})},W=({inventory:e})=>{const s=e=>"critical"===e.trend?"text-red-600":"low"===e.trend?"text-yellow-600":"high"===e.trend?"text-green-600":"text-muted-foreground";return a.jsx(g,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Inventory Status"}),e.map(e=>{return a.jsx(N,{className:"p-3",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:e.name}),(t=e.trend,"high"===t?a.jsx(o,{className:"h-4 w-4 text-green-500"}):"low"===t||"critical"===t?a.jsx(m,{className:"h-4 w-4 text-red-500"}):null)]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.location}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsxs("span",{className:k("text-sm font-medium",s(e)),children:["Qty: ",e.quantity]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["Min: ",e.minStock]}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:["$",e.value,"/unit"]})]}),e.minStock>e.quantity&&a.jsxs(w,{variant:"destructive",className:"mt-2",children:[a.jsx(i,{className:"h-3 w-3 mr-1"}),"Below Minimum Stock"]})]})})},e.id);var t})]})})},$=()=>{const e=L.reduce((e,s)=>e+s.totalSpend,0),s=F.filter(e=>"delivered"!==e.status).length,n=P.filter(e=>e.minStock>e.quantity).length;return a.jsx(g,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Procurement Dashboard"}),a.jsx(N,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Spend (30 days)"}),a.jsxs("p",{className:"text-2xl font-bold",children:["$",e.toLocaleString()]})]}),a.jsx(t,{className:"h-8 w-8 text-muted-foreground"})]})}),a.jsx(N,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Suppliers"}),a.jsx("p",{className:"text-2xl font-bold",children:L.filter(e=>"active"===e.status).length})]}),a.jsx(l,{className:"h-8 w-8 text-muted-foreground"})]})}),a.jsx(N,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Orders"}),a.jsx("p",{className:"text-2xl font-bold",children:s})]}),a.jsx(r,{className:"h-8 w-8 text-muted-foreground"})]})}),a.jsx(N,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Low Stock Items"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:n})]}),a.jsx(i,{className:"h-8 w-8 text-red-500"})]})}),a.jsxs(N,{className:"p-4",children:[a.jsx(f,{className:"p-0 mb-3",children:a.jsx(y,{className:"text-sm",children:"Spend by Category"})}),a.jsx(b,{className:"p-0 space-y-2",children:Object.entries(L.reduce((e,s)=>(e[s.category]=(e[s.category]||0)+s.totalSpend,e),{})).map(([e,s])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:e}),a.jsxs("span",{className:"text-sm font-medium",children:["$",s.toLocaleString()]})]},e))})]})]})})};export{e as ProcurementHub};
