function e(){const e=g(),z=e.vehicles||[],$=e.facilities||[],{openInspect:J}=v(),[K,Y]=s.useState([]),[q,H]=s.useState(""),[W,Z]=s.useState("all"),[Q,X]=s.useState("all"),[ee,se]=s.useState(null),[ae,te]=s.useState(!1),re=(K||[]).filter(e=>(e.vehicleNumber.toLowerCase().includes(q.toLowerCase())||e.make.toLowerCase().includes(q.toLowerCase())||e.model.toLowerCase().includes(q.toLowerCase())||e.vin.toLowerCase().includes(q.toLowerCase()))&&("all"===W||e.dataSource===W)&&("all"===Q||"connected"===Q&&e.connected||"disconnected"===Q&&!e.connected)),le=(e,s)=>{j.info(`Sending ${s} command to vehicle...`),setTimeout(()=>{j.success("Command executed successfully")},1500)},ne=e=>({info:"bg-blue-100 text-blue-700",warning:"bg-yellow-100 text-yellow-700",critical:"bg-red-100 text-red-700"}[e]),ce=(K||[]).length,ie=(K||[]).filter(e=>e.connected).length,de=(K||[]).reduce((e,s)=>e+s.dtcCodes.filter(e=>!e.cleared).length,0),oe=(K||[]).filter(e=>"smartcar"===e.dataSource||"integrated"===e.dataSource).length,me=[{id:"tel-1",tenantId:"tenant-demo",vehicleId:"veh-1",vehicleNumber:"FL-1001",make:"Tesla",model:"Model 3",year:2023,vin:"5YJ3E1EA8KF123456",dataSource:"smartcar",connected:!0,lastUpdate:(new Date).toISOString(),liveData:{odometer:15432,speed:0,rpm:0,fuelLevel:0,batteryVoltage:13.8,engineTemp:0,coolantTemp:0,oilPressure:0,tirePressure:{fl:35,fr:35,rl:35,rr:35},stateOfCharge:82,range:235},dtcCodes:[],smartcarCapabilities:{canLock:!0,canUnlock:!0,canStartCharge:!0,canStopCharge:!0,canGetLocation:!0,canGetOdometer:!0,canGetBattery:!0},consentStatus:{granted:!0,grantedAt:new Date(Date.now()-2592e6).toISOString(),expiresAt:new Date(Date.now()+28944e6).toISOString(),scopes:["read_vehicle_info","read_location","read_odometer","read_charge","control_charge"]}},{id:"tel-2",tenantId:"tenant-demo",vehicleId:"veh-2",vehicleNumber:"FL-1002",make:"Ford",model:"F-150",year:2022,vin:"1FTFW1E84NFA12345",dataSource:"obd-ii",connected:!0,lastUpdate:new Date(Date.now()-3e5).toISOString(),liveData:{odometer:28945,speed:0,rpm:0,fuelLevel:45,batteryVoltage:12.6,engineTemp:195,coolantTemp:192,oilPressure:35,tirePressure:{fl:32,fr:32,rl:34,rr:34},range:180},dtcCodes:[{code:"P0128",description:"Coolant Thermostat (Coolant Temperature Below Thermostat Regulating Temperature)",severity:"warning",timestamp:new Date(Date.now()-1728e5).toISOString(),cleared:!1}],consentStatus:{granted:!1,scopes:[]}},{id:"tel-3",tenantId:"tenant-demo",vehicleId:"veh-3",vehicleNumber:"FL-1003",make:"Chevrolet",model:"Silverado",year:2021,vin:"1GCPYBEK8MZ123456",dataSource:"obd-ii",connected:!1,lastUpdate:new Date(Date.now()-72e5).toISOString(),liveData:{odometer:42103,speed:0,rpm:0,fuelLevel:68,batteryVoltage:12.4,engineTemp:0,coolantTemp:0,oilPressure:0,tirePressure:{fl:33,fr:33,rl:35,rr:35},range:272},dtcCodes:[],consentStatus:{granted:!1,scopes:[]}}];return 0===(K||[]).length&&me.length>0&&Y(me),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Vehicle Telemetry"}),a.jsx("p",{className:"text-muted-foreground",children:"Live data from OBD-II devices and Smartcar API integration"})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(p,{variant:"outline",onClick:()=>{j.info("Refreshing telemetry data for all vehicles..."),setTimeout(()=>{j.success(`Successfully refreshed data for ${K.length} vehicles`)},1500)},children:[a.jsx(t,{className:"w-4 h-4 mr-2"}),"Refresh All"]})})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs(f,{children:[a.jsx(N,{className:"pb-3",children:a.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Total Vehicles"})}),a.jsxs(S,{children:[a.jsx("div",{className:"text-2xl font-bold",children:ce}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(r,{className:"w-3 h-3"}),"Monitored"]})]})]}),a.jsxs(f,{children:[a.jsx(N,{className:"pb-3",children:a.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Connected"})}),a.jsxs(S,{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:ie}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(l,{className:"w-3 h-3"}),"Live data"]})]})]}),a.jsxs(f,{children:[a.jsx(N,{className:"pb-3",children:a.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Active DTCs"})}),a.jsxs(S,{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:de}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(n,{className:"w-3 h-3"}),"Diagnostic codes"]})]})]}),a.jsxs(f,{children:[a.jsx(N,{className:"pb-3",children:a.jsx(C,{className:"text-sm font-medium text-muted-foreground",children:"Smartcar Enabled"})}),a.jsxs(S,{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:oe}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(c,{className:"w-3 h-3"}),"Remote control"]})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(i,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(b,{placeholder:"Search vehicles...",value:q,onChange:e=>H(e.target.value),className:"pl-10"})]}),a.jsxs(F,{value:W,onValueChange:Z,children:[a.jsx(V,{className:"w-48",children:a.jsx(A,{})}),a.jsxs(U,{children:[a.jsx(P,{value:"all",children:"All Sources"}),a.jsx(P,{value:"obd-ii",children:"OBD-II Only"}),a.jsx(P,{value:"smartcar",children:"Smartcar Only"}),a.jsx(P,{value:"integrated",children:"Integrated"})]})]}),a.jsxs(F,{value:Q,onValueChange:X,children:[a.jsx(V,{className:"w-48",children:a.jsx(A,{})}),a.jsxs(U,{children:[a.jsx(P,{value:"all",children:"All Status"}),a.jsx(P,{value:"connected",children:"Connected"}),a.jsx(P,{value:"disconnected",children:"Disconnected"})]})]})]}),a.jsxs(f,{children:[a.jsxs(N,{children:[a.jsx(C,{children:"Vehicle Locations"}),a.jsx(w,{children:"Real-time telemetry and location tracking on map"})]}),a.jsx(S,{children:a.jsx("div",{className:"h-[400px] rounded-lg overflow-hidden border",children:a.jsx(u,{vehicles:z,facilities:$,showVehicles:!0,showFacilities:!0,mapStyle:"road",className:"w-full h-full"})})})]}),a.jsxs(f,{children:[a.jsxs(N,{children:[a.jsxs(C,{children:["Live Vehicle Data (",re.length,")"]}),a.jsx(w,{children:"Real-time telemetry from OBD-II and Smartcar API"})]}),a.jsx(S,{children:a.jsxs(B,{children:[a.jsx(M,{children:a.jsxs(E,{children:[a.jsx(G,{children:"Vehicle"}),a.jsx(G,{children:"Source"}),a.jsx(G,{children:"Status"}),a.jsx(G,{children:"Odometer"}),a.jsx(G,{children:"Fuel/SOC"}),a.jsx(G,{children:"DTCs"}),a.jsx(G,{children:"Actions"})]})}),a.jsx(R,{children:0===re.length?a.jsx(E,{children:a.jsx(_,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No vehicles found. Connect OBD-II devices or authorize Smartcar access."})}):re.map(e=>{return a.jsxs(E,{children:[a.jsxs(_,{children:[a.jsx("div",{className:"font-medium",children:e.vehicleNumber}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.make," ",e.model," (",e.year,")"]})]}),a.jsx(_,{children:(s=e.dataSource,a.jsx(y,{className:{"obd-ii":"bg-blue-100 text-blue-700",smartcar:"bg-purple-100 text-purple-700",integrated:"bg-green-100 text-green-700"}[s],variant:"secondary",children:{"obd-ii":"OBD-II",smartcar:"Smartcar",integrated:"Integrated"}[s]}))}),a.jsx(_,{children:a.jsx(y,e.connected?{variant:"secondary",className:"bg-green-100 text-green-700",children:"Connected"}:{variant:"secondary",className:"bg-red-100 text-red-700",children:"Disconnected"})}),a.jsxs(_,{children:[e.liveData.odometer.toLocaleString()," mi"]}),a.jsx(_,{children:void 0!==e.liveData.stateOfCharge?`${e.liveData.stateOfCharge}% SOC`:`${e.liveData.fuelLevel}% Fuel`}),a.jsx(_,{children:e.dtcCodes.length>0?a.jsxs(y,{variant:"secondary",className:ne(e.dtcCodes[0].severity),children:[e.dtcCodes.length," Code",e.dtcCodes.length>1?"s":""]}):a.jsx(y,{variant:"secondary",className:"bg-gray-100 text-gray-700",children:"No Issues"})}),a.jsx(_,{children:a.jsx(p,{variant:"outline",size:"sm",onClick:()=>(e=>{J({type:"vehicle",id:e.vehicleId,tab:"telemetry"}),se(e),te(!0)})(e),children:"Details"})})]},e.id);var s})})]})})]}),a.jsx(D,{open:ae,onOpenChange:te,children:a.jsxs(I,{className:"max-w-5xl",children:[a.jsxs(L,{children:[a.jsx(k,{children:"Vehicle Telemetry Details"}),a.jsxs(O,{children:["Detailed live data for ",ee?.vehicleNumber]})]}),ee&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs(f,{children:[a.jsx(N,{children:a.jsx(C,{children:"Vehicle Information"})}),a.jsx(S,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Number:"})," ",ee.vehicleNumber]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Make/Model:"})," ",ee.make," ",ee.model," (",ee.year,")"]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"VIN:"})," ",ee.vin]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Data Source:"})," ",ee.dataSource]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Last Update:"})," ",new Date(ee.lastUpdate).toLocaleString()]})]})})]}),a.jsxs(f,{children:[a.jsx(N,{children:a.jsx(C,{children:"Live Metrics"})}),a.jsx(S,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(d,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Speed:"})," ",ee.liveData.speed," mph"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(o,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Odometer:"})," ",ee.liveData.odometer.toLocaleString()," mi"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(m,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Fuel:"})," ",ee.liveData.fuelLevel,"%"]}),void 0!==ee.liveData.stateOfCharge&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(x,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"SOC:"})," ",ee.liveData.stateOfCharge,"%"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(h,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Engine Temp:"})," ",ee.liveData.engineTemp,"Â°F"]})]})})]})]}),ee.dtcCodes.length>0&&a.jsxs(f,{children:[a.jsx(N,{children:a.jsxs(C,{children:["Diagnostic Trouble Codes (",ee.dtcCodes.length,")"]})}),a.jsx(S,{children:a.jsxs(B,{children:[a.jsx(M,{children:a.jsxs(E,{children:[a.jsx(G,{children:"Code"}),a.jsx(G,{children:"Description"}),a.jsx(G,{children:"Severity"}),a.jsx(G,{children:"Timestamp"}),a.jsx(G,{children:"Action"})]})}),a.jsx(R,{children:ee.dtcCodes.map(e=>a.jsxs(E,{children:[a.jsx(_,{children:e.code}),a.jsx(_,{children:e.description}),a.jsx(_,{children:a.jsx(y,{className:ne(e.severity),variant:"secondary",children:e.severity.charAt(0).toUpperCase()+e.severity.slice(1)})}),a.jsx(_,{children:new Date(e.timestamp).toLocaleString()}),a.jsx(_,{children:e.cleared?a.jsx("span",{className:"text-muted-foreground text-sm",children:"Cleared"}):a.jsx(p,{size:"sm",variant:"outline",onClick:()=>{return s=ee.id,a=e.code,Y(e=>(e||[]).map(e=>e.id===s?{...e,dtcCodes:e.dtcCodes.map(e=>e.code===a?{...e,cleared:!0}:e)}:e)),void j.success("DTC code cleared");var s,a},children:"Clear"})})]},e.code))})]})})]}),"smartcar"===ee.dataSource&&ee.smartcarCapabilities&&a.jsxs(f,{children:[a.jsx(N,{children:a.jsx(C,{children:"Smartcar Controls"})}),a.jsx(S,{children:a.jsxs("div",{className:"flex gap-2",children:[ee.smartcarCapabilities.canLock&&a.jsxs(p,{variant:"outline",onClick:()=>le(0,"lock"),children:[a.jsx(c,{className:"w-4 h-4 mr-2"}),"Lock"]}),ee.smartcarCapabilities.canUnlock&&a.jsxs(p,{variant:"outline",onClick:()=>le(0,"unlock"),children:[a.jsx(c,{className:"w-4 h-4 mr-2"}),"Unlock"]}),ee.smartcarCapabilities.canStartCharge&&a.jsxs(p,{variant:"outline",onClick:()=>le(0,"start charge"),children:[a.jsx(x,{className:"w-4 h-4 mr-2"}),"Start Charge"]}),ee.smartcarCapabilities.canStopCharge&&a.jsxs(p,{variant:"outline",onClick:()=>le(0,"stop charge"),children:[a.jsx(x,{className:"w-4 h-4 mr-2"}),"Stop Charge"]})]})})]})]}),a.jsx(T,{children:a.jsx(p,{variant:"outline",onClick:()=>te(!1),children:"Close"})})]})})]})}import{r as s,j as a,b6 as t,b4 as r,ah as l,C as n,b7 as c,b8 as i,b9 as d,aJ as o,ba as m,bb as x,bc as h}from"./react-core-hQu9tqS1.js";import{t as j}from"./index-savvei9t.js";import{U as u}from"./UniversalMap-ZyGzQ1ui.js";import{u as g,g as v,h as p,C as f,d as N,e as C,f as S,I as b,i as w,B as y,D,j as I,k as L,l as k,m as O,n as T}from"./index-BDwglPMF.js";import{S as F,a as V,b as A,c as U,d as P}from"./select-Bmd3s7f4.js";import{T as B,a as M,b as E,c as G,d as R,e as _}from"./table-_lE51wjz.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./GoogleMap-BAYip6gy.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as VehicleTelemetry};
