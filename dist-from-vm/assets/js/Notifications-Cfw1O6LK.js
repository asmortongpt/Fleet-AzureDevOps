function e(){const{openInspect:e}=x(),[D,E]=s.useState([]),[I,V]=s.useState(null),[O,T]=s.useState(!1),[q,B]=s.useState("all"),[F,H]=s.useState("all"),[W,Y]=s.useState(""),[Z,G]=s.useState(null),[J,K]=s.useState(!1),[M,Q]=s.useState(""),U=async()=>{try{T(!0);const e={limit:100};"all"!==q&&(e.status=q),"all"!==F&&(e.severity=F);const s=await S.get("/api/alerts",{params:e});E(s.data?.alerts||[])}catch(e){}finally{T(!1)}},X=async()=>{try{const e=await S.get("/api/alerts/stats");V(e.data)}catch(e){}};s.useEffect(()=>{U(),X()},[q,F]);const ee=e=>{switch(e){case"emergency":case"critical":return a.jsx(t,{className:"w-5 h-5",weight:"fill"});case"warning":return a.jsx(o,{className:"w-5 h-5"});default:return a.jsx(d,{className:"w-5 h-5"})}},se=e=>{switch(e){case"emergency":return"text-red-600 bg-red-100 dark:bg-red-900/20";case"critical":return"text-orange-600 bg-orange-100 dark:bg-orange-900/20";case"warning":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20";default:return"text-blue-600 bg-blue-100 dark:bg-blue-900/20"}},ae=e=>{switch(e){case"resolved":return"text-green-600 bg-green-100";case"acknowledged":return"text-blue-600 bg-blue-100";case"sent":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},te=e=>new Date(e).toLocaleString(),le=D.filter(e=>{if(W){const s=W.toLowerCase();return e.title.toLowerCase().includes(s)||e.message.toLowerCase().includes(s)||e.alert_type.toLowerCase().includes(s)}return!0});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs(m,{children:[a.jsx(h,{className:"pb-3",children:a.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Critical Alerts"})}),a.jsx(j,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(t,{className:"w-8 h-8 text-red-600",weight:"fill"}),a.jsx("div",{className:"text-3xl font-bold",children:I?.unacknowledged_critical||0})]})})]}),a.jsxs(m,{children:[a.jsx(h,{className:"pb-3",children:a.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Active Alerts"})}),a.jsx(j,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(l,{className:"w-8 h-8 text-blue-600"}),a.jsx("div",{className:"text-3xl font-bold",children:I?.by_status.find(e=>"sent"===e.status)?.count||0})]})})]}),a.jsxs(m,{children:[a.jsx(h,{className:"pb-3",children:a.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Acknowledged"})}),a.jsx(j,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(r,{className:"w-8 h-8 text-yellow-600"}),a.jsx("div",{className:"text-3xl font-bold",children:I?.by_status.find(e=>"acknowledged"===e.status)?.count||0})]})})]}),a.jsxs(m,{children:[a.jsx(h,{className:"pb-3",children:a.jsx(u,{className:"text-sm font-medium text-muted-foreground",children:"Resolved"})}),a.jsx(j,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(n,{className:"w-8 h-8 text-green-600",weight:"fill"}),a.jsx("div",{className:"text-3xl font-bold",children:I?.by_status.find(e=>"resolved"===e.status)?.count||0})]})})]})]}),a.jsxs(m,{children:[a.jsxs(h,{children:[a.jsx(u,{children:"Alert History"}),a.jsx(g,{children:"View and manage all system alerts and notifications"})]}),a.jsxs(j,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(p,{placeholder:"Search alerts...",value:W,onChange:e=>Y(e.target.value),className:"pl-10"})]}),a.jsxs(A,{value:q,onValueChange:B,children:[a.jsxs(R,{className:"w-full sm:w-[180px]",children:[a.jsx(c,{className:"w-4 h-4 mr-2"}),a.jsx(L,{placeholder:"Status"})]}),a.jsxs(P,{children:[a.jsx($,{value:"all",children:"All Statuses"}),a.jsx($,{value:"pending",children:"Pending"}),a.jsx($,{value:"sent",children:"Active"}),a.jsx($,{value:"acknowledged",children:"Acknowledged"}),a.jsx($,{value:"resolved",children:"Resolved"})]})]}),a.jsxs(A,{value:F,onValueChange:H,children:[a.jsxs(R,{className:"w-full sm:w-[180px]",children:[a.jsx(c,{className:"w-4 h-4 mr-2"}),a.jsx(L,{placeholder:"Severity"})]}),a.jsxs(P,{children:[a.jsx($,{value:"all",children:"All Severities"}),a.jsx($,{value:"info",children:"Info"}),a.jsx($,{value:"warning",children:"Warning"}),a.jsx($,{value:"critical",children:"Critical"}),a.jsx($,{value:"emergency",children:"Emergency"})]})]})]}),a.jsx(v,{className:"h-[600px]",children:O?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading alerts..."}):0===le.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(l,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50"}),a.jsx("p",{className:"text-muted-foreground",children:"No alerts found"})]}):a.jsx("div",{className:"space-y-3",children:le.map(s=>a.jsx(m,{className:`${se(s.severity)} border-l-4 cursor-pointer hover:bg-muted/50 transition-colors`,onClick:()=>{e({type:"alert",id:s.id})},children:a.jsx(j,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("div",{className:`p-2 rounded-lg ${se(s.severity)}`,children:ee(s.severity)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-semibold text-sm",children:s.title}),a.jsx(f,{variant:"outline",className:se(s.severity),children:s.severity}),a.jsx(f,{variant:"outline",className:ae(s.status),children:s.status})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.message}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[a.jsxs("span",{children:["Type: ",s.alert_type]}),s.entity_type&&a.jsxs("span",{children:["• Entity: ",s.entity_type]}),a.jsxs("span",{children:["• Created: ",te(s.created_at)]}),s.acknowledged_at&&a.jsxs("span",{children:["• Acknowledged: ",te(s.acknowledged_at)," by ",s.acknowledged_by_name]}),s.resolved_at&&a.jsxs("span",{children:["• Resolved: ",te(s.resolved_at)," by ",s.resolved_by_name]})]}),s.resolution_notes&&a.jsxs("div",{className:"mt-2 p-2 bg-background rounded text-xs",children:[a.jsx("strong",{children:"Resolution:"})," ",s.resolution_notes]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:["sent"===s.status&&a.jsxs(w,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation(),(async e=>{try{await S.post(`/api/alerts/${e}/acknowledge`,{}),U(),X()}catch(s){}})(s.id)},children:[a.jsx(r,{className:"w-4 h-4 mr-1"}),"Acknowledge"]}),("sent"===s.status||"acknowledged"===s.status)&&a.jsxs(w,{size:"sm",variant:"default",onClick:e=>{e.stopPropagation(),G(s),K(!0)},children:[a.jsx(n,{className:"w-4 h-4 mr-1"}),"Resolve"]})]})]})})},s.id))})})]})]}),a.jsx(N,{open:J,onOpenChange:K,children:a.jsxs(b,{children:[a.jsxs(y,{children:[a.jsx(k,{children:"Resolve Alert"}),a.jsx(C,{children:"Provide details about how this alert was resolved."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-1",children:Z?.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Z?.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Resolution Notes"}),a.jsx(z,{value:M,onChange:e=>Q(e.target.value),placeholder:"Describe how this issue was resolved...",rows:4})]})]}),a.jsxs(_,{children:[a.jsx(w,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),a.jsx(w,{onClick:async()=>{if(Z)try{await S.post(`/api/alerts/${Z.id}/resolve`,{resolution_notes:M}),K(!1),Q(""),G(null),U(),X()}catch(e){}},disabled:!M.trim(),children:"Resolve Alert"})]})]})})]})}import{r as s,j as a,C as t,ai as l,bY as r,ah as n,b8 as i,bt as c,bh as d,bZ as o}from"./react-core-hQu9tqS1.js";import{g as x,C as m,d as h,e as u,f as j,i as g,I as p,S as v,B as f,h as w,D as N,j as b,k as y,l as k,m as C,n as _,o as S}from"./index-BDwglPMF.js";import{S as A,a as R,b as L,c as P,d as $}from"./select-Bmd3s7f4.js";import{T as z}from"./textarea-BOBjqKNu.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as Notifications};
