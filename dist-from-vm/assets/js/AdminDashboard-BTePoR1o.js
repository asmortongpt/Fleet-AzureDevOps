function e(){const[e,s]=a.useState(Qs),[t,n]=a.useState(""),[r,l]=a.useState("all"),[u,p]=a.useState(!1),[g,v]=a.useState(!1),[f,y]=a.useState(null),[b,w]=a.useState({name:"",email:"",role:"viewer",department:""}),C=e.filter(e=>(e.name.toLowerCase().includes(t.toLowerCase())||e.email.toLowerCase().includes(t.toLowerCase()))&&("all"===r||e.role===r)),N=()=>{w({name:"",email:"",role:"viewer",department:""})},S=e=>{switch(e){case"admin":return"destructive";case"manager":return"default";case"operator":return"secondary";default:return"outline"}};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage users, roles, and permissions"})]}),i.jsxs(R,{onClick:()=>p(!0),children:[i.jsx(c,{className:"h-4 w-4 mr-2"}),"Add User"]})]}),i.jsxs(T,{children:[i.jsx(L,{children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(o,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(I,{placeholder:"Search users by name or email...",value:t,onChange:e=>n(e.target.value),className:"pl-10"})]}),i.jsxs(Bs,{value:r,onValueChange:l,children:[i.jsx(Ps,{className:"w-[180px]",children:i.jsx(Fs,{})}),i.jsxs($s,{children:[i.jsx(Os,{value:"all",children:"All Roles"}),i.jsx(Os,{value:"admin",children:"Admin"}),i.jsx(Os,{value:"manager",children:"Manager"}),i.jsx(Os,{value:"operator",children:"Operator"}),i.jsx(Os,{value:"viewer",children:"Viewer"})]})]})]})}),i.jsx(M,{children:i.jsxs(Rs,{children:[i.jsx(Ts,{children:i.jsxs(Ls,{children:[i.jsx(Is,{children:"User"}),i.jsx(Is,{children:"Role"}),i.jsx(Is,{children:"Department"}),i.jsx(Is,{children:"Status"}),i.jsx(Is,{children:"Last Login"}),i.jsx(Is,{className:"text-right",children:"Actions"})]})}),i.jsx(Ms,{children:C.map(t=>i.jsxs(Ls,{children:[i.jsx(Us,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:t.name}),i.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[i.jsx(d,{className:"h-3 w-3"}),t.email]})]})}),i.jsx(Us,{children:i.jsxs(U,{variant:S(t.role),children:[i.jsx(x,{className:"h-3 w-3 mr-1"}),t.role]})}),i.jsx(Us,{children:t.department}),i.jsx(Us,{children:i.jsx(U,{variant:"active"===t.status?"default":"secondary",children:t.status})}),i.jsx(Us,{className:"text-sm text-muted-foreground",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(h,{className:"h-3 w-3"}),t.lastLogin.toLocaleDateString()]})}),i.jsx(Us,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(R,{variant:"ghost",size:"sm",onClick:()=>(e=>{y(e),w({name:e.name,email:e.email,role:e.role,department:e.department}),v(!0)})(t),children:i.jsx(m,{className:"h-4 w-4"})}),i.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{return n=t.id,void(confirm("Are you sure you want to delete this user?")&&s(e.filter(e=>e.id!==n)));var n},children:i.jsx(j,{className:"h-4 w-4 text-destructive"})})]})})]},t.id))})]})})]}),i.jsx(B,{open:u,onOpenChange:p,children:i.jsxs(P,{children:[i.jsxs(F,{children:[i.jsx($,{children:"Create New User"}),i.jsx(O,{children:"Add a new user to the system with appropriate role and permissions."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(I,{value:b.name,onChange:e=>w({...b,name:e.target.value}),placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Email"}),i.jsx(I,{type:"email",value:b.email,onChange:e=>w({...b,email:e.target.value}),placeholder:"john@fleet.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Role"}),i.jsxs(Bs,{value:b.role,onValueChange:e=>w({...b,role:e}),children:[i.jsx(Ps,{children:i.jsx(Fs,{})}),i.jsxs($s,{children:[i.jsx(Os,{value:"admin",children:"Admin"}),i.jsx(Os,{value:"manager",children:"Manager"}),i.jsx(Os,{value:"operator",children:"Operator"}),i.jsx(Os,{value:"viewer",children:"Viewer"})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Permissions: ",Ys[b.role].join(", ")]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Department"}),i.jsx(I,{value:b.department,onChange:e=>w({...b,department:e.target.value}),placeholder:"Operations"})]})]}),i.jsxs(q,{children:[i.jsx(R,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),i.jsx(R,{onClick:()=>{const t={id:(e.length+1).toString(),name:b.name,email:b.email,role:b.role,department:b.department,status:"active",lastLogin:new Date,createdAt:new Date};s([...e,t]),p(!1),N()},children:"Create User"})]})]})}),i.jsx(B,{open:g,onOpenChange:v,children:i.jsxs(P,{children:[i.jsxs(F,{children:[i.jsx($,{children:"Edit User"}),i.jsx(O,{children:"Update user information and permissions."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(I,{value:b.name,onChange:e=>w({...b,name:e.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Email"}),i.jsx(I,{type:"email",value:b.email,onChange:e=>w({...b,email:e.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Role"}),i.jsxs(Bs,{value:b.role,onValueChange:e=>w({...b,role:e}),children:[i.jsx(Ps,{children:i.jsx(Fs,{})}),i.jsxs($s,{children:[i.jsx(Os,{value:"admin",children:"Admin"}),i.jsx(Os,{value:"manager",children:"Manager"}),i.jsx(Os,{value:"operator",children:"Operator"}),i.jsx(Os,{value:"viewer",children:"Viewer"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Department"}),i.jsx(I,{value:b.department,onChange:e=>w({...b,department:e.target.value})})]})]}),i.jsxs(q,{children:[i.jsx(R,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),i.jsx(R,{onClick:()=>{f&&(s(e.map(e=>e.id===f.id?{...e,...b}:e)),v(!1),y(null),N())},children:"Save Changes"})]})]})})]})}function s(){const[e,s]=a.useState("overview"),t=Math.round(Xs.filter(e=>"compliant"===e.status).length/Xs.length*100),n=Zs.filter(e=>!e.resolved).length,r=e=>{switch(e){case"critical":case"high":return"destructive";case"medium":return"default";case"low":return"secondary";default:return"outline"}},l=e=>{switch(e){case"compliant":return i.jsx(f,{className:"h-4 w-4 text-green-500"});case"warning":return i.jsx(u,{className:"h-4 w-4 text-yellow-500"});case"non-compliant":return i.jsx(v,{className:"h-4 w-4 text-red-500"});default:return null}};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Security & Compliance"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor security posture and compliance status"})]}),i.jsxs("div",{className:"flex gap-2 border-b",children:[i.jsx(R,{variant:"overview"===e?"default":"ghost",onClick:()=>s("overview"),children:"Overview"}),i.jsx(R,{variant:"compliance"===e?"default":"ghost",onClick:()=>s("compliance"),children:"Compliance"}),i.jsxs(R,{variant:"alerts"===e?"default":"ghost",onClick:()=>s("alerts"),children:["Alerts (",n,")"]}),i.jsx(R,{variant:"logs"===e?"default":"ghost",onClick:()=>s("logs"),children:"Access Logs"})]}),"overview"===e&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(T,{children:[i.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(V,{className:"text-sm font-medium",children:"Compliance Score"}),i.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(M,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[t,"%"]}),i.jsx(W,{value:t,className:"mt-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[Xs.filter(e=>"compliant"===e.status).length," of ",Xs.length," checks passing"]})]})]}),i.jsxs(T,{children:[i.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(V,{className:"text-sm font-medium",children:"Active Alerts"}),i.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(M,{children:[i.jsx("div",{className:"text-2xl font-bold",children:n}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[Zs.filter(e=>"critical"===e.severity&&!e.resolved).length," critical unresolved"]})]})]}),i.jsxs(T,{children:[i.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(V,{className:"text-sm font-medium",children:"Access Events"}),i.jsx(p,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(M,{children:[i.jsx("div",{className:"text-2xl font-bold",children:et.length}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[et.filter(e=>"denied"===e.status).length," denied attempts"]})]})]})]}),"compliance"===e&&i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Compliance Checklist"})}),i.jsx(M,{children:i.jsx("div",{className:"space-y-4",children:Xs.map(e=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx("div",{className:"mt-1",children:l(e.status)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold",children:e.name}),i.jsx(U,{variant:"compliant"===e.status?"default":"warning"===e.status?"secondary":"destructive",children:e.status})]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Last checked: ",e.lastChecked.toLocaleString()]})]})]},e.id))})})]}),"alerts"===e&&i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Security Alerts"})}),i.jsx(M,{children:i.jsx("div",{className:"space-y-3",children:Zs.map(e=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx(u,{className:"h-5 w-5 mt-0.5 "+("critical"===e.severity?"text-red-500":"high"===e.severity?"text-orange-500":"medium"===e.severity?"text-yellow-500":"text-blue-500")}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold",children:e.title}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(U,{variant:r(e.severity),children:e.severity}),e.resolved&&i.jsx(U,{variant:"outline",children:"Resolved"})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e.timestamp.toLocaleString()})]})]},e.id))})})]}),"logs"===e&&i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Access Logs"})}),i.jsx(M,{children:i.jsxs(Rs,{children:[i.jsx(Ts,{children:i.jsxs(Ls,{children:[i.jsx(Is,{children:"User"}),i.jsx(Is,{children:"Action"}),i.jsx(Is,{children:"Resource"}),i.jsx(Is,{children:"Timestamp"}),i.jsx(Is,{children:"Status"})]})}),i.jsx(Ms,{children:et.map(e=>i.jsxs(Ls,{children:[i.jsx(Us,{className:"font-medium",children:e.user}),i.jsx(Us,{children:i.jsx(U,{variant:"outline",children:e.action})}),i.jsx(Us,{children:e.resource}),i.jsx(Us,{className:"text-sm text-muted-foreground",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(g,{className:"h-3 w-3"}),e.timestamp.toLocaleString()]})}),i.jsx(Us,{children:i.jsx(U,{variant:"success"===e.status?"default":"destructive",children:e.status})})]},e.id))})]})})]})]})}function t(){const[e,s]=a.useState("environment"),[t,n]=a.useState(st),[r,l]=a.useState(tt),[c,o]=a.useState(nt),[d,x]=a.useState(!1),h=e=>{switch(e){case"healthy":return i.jsx(f,{className:"h-4 w-4 text-green-500"});case"degraded":return i.jsx(z,{className:"h-4 w-4 text-yellow-500"});case"down":return i.jsx(z,{className:"h-4 w-4 text-red-500"});default:return null}},m=e=>{switch(e){case"healthy":return"default";case"degraded":return"secondary";case"down":return"destructive";default:return"outline"}};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"System Configuration"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage system settings, environment, and health"})]}),i.jsxs("div",{className:"flex gap-2",children:[d&&i.jsx(U,{variant:"secondary",children:"Unsaved Changes"}),i.jsxs(R,{onClick:()=>{x(!1),alert("Configuration saved successfully!")},disabled:!d,children:[i.jsx(y,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]}),i.jsxs("div",{className:"flex gap-2 border-b",children:[i.jsxs(R,{variant:"environment"===e?"default":"ghost",onClick:()=>s("environment"),children:[i.jsx(b,{className:"h-4 w-4 mr-2"}),"Environment"]}),i.jsxs(R,{variant:"features"===e?"default":"ghost",onClick:()=>s("features"),children:[i.jsx(w,{className:"h-4 w-4 mr-2"}),"Feature Flags"]}),i.jsxs(R,{variant:"health"===e?"default":"ghost",onClick:()=>s("health"),children:[i.jsx(C,{className:"h-4 w-4 mr-2"}),"System Health"]}),i.jsxs(R,{variant:"backup"===e?"default":"ghost",onClick:()=>s("backup"),children:[i.jsx(N,{className:"h-4 w-4 mr-2"}),"Backup & Restore"]})]}),"environment"===e&&i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Environment Variables"})}),i.jsx(M,{children:i.jsxs(Rs,{children:[i.jsx(Ts,{children:i.jsxs(Ls,{children:[i.jsx(Is,{children:"Key"}),i.jsx(Is,{children:"Value"}),i.jsx(Is,{children:"Description"}),i.jsx(Is,{children:"Type"})]})}),i.jsx(Ms,{children:t.map(e=>i.jsxs(Ls,{children:[i.jsx(Us,{className:"font-medium font-mono text-sm",children:e.key}),i.jsx(Us,{children:i.jsx(I,{type:e.sensitive?"password":"text",value:e.value,onChange:s=>{return r=e.key,a=s.target.value,n(t.map(e=>e.key===r?{...e,value:a}:e)),void x(!0);var r,a},className:"font-mono text-sm"})}),i.jsx(Us,{className:"text-sm text-muted-foreground",children:e.description}),i.jsx(Us,{children:i.jsx(U,{variant:e.sensitive?"destructive":"outline",children:e.sensitive?"Sensitive":"Public"})})]},e.key))})]})})]}),"features"===e&&i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Feature Flags"})}),i.jsx(M,{children:i.jsx("div",{className:"space-y-4",children:r.map(e=>i.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[i.jsx(qs,{checked:e.enabled,onCheckedChange:()=>{return s=e.id,l(r.map(e=>e.id===s?{...e,enabled:!e.enabled}:e)),void x(!0);var s}}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"font-semibold font-mono text-sm",children:e.name}),i.jsx(U,{variant:"outline",children:e.environment})]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),i.jsx(U,{variant:e.enabled?"default":"secondary",children:e.enabled?"Enabled":"Disabled"})]},e.id))})})]}),"health"===e&&i.jsxs(T,{children:[i.jsx(L,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(V,{children:"System Health"}),i.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{const e=c.map(e=>({...e,lastCheck:new Date}));o(e)},children:[i.jsx(S,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),i.jsx(M,{children:i.jsxs(Rs,{children:[i.jsx(Ts,{children:i.jsxs(Ls,{children:[i.jsx(Is,{children:"Component"}),i.jsx(Is,{children:"Status"}),i.jsx(Is,{children:"Message"}),i.jsx(Is,{children:"Last Checked"})]})}),i.jsx(Ms,{children:c.map((e,s)=>i.jsxs(Ls,{children:[i.jsx(Us,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center gap-2",children:[h(e.status),e.component]})}),i.jsx(Us,{children:i.jsx(U,{variant:m(e.status),children:e.status})}),i.jsx(Us,{className:"text-sm text-muted-foreground",children:e.message}),i.jsx(Us,{className:"text-sm text-muted-foreground",children:e.lastCheck.toLocaleString()})]},s))})]})})]}),"backup"===e&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Export Configuration"})}),i.jsxs(M,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Export current system configuration including environment variables and feature flags."}),i.jsxs(R,{onClick:()=>{const e={environment:t,features:r,exportedAt:(new Date).toISOString()},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download=`fleet-config-${(new Date).toISOString().split("T")[0]}.json`,a.click()},className:"w-full",children:[i.jsx(A,{className:"h-4 w-4 mr-2"}),"Export Configuration"]})]})]}),i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Import Configuration"})}),i.jsxs(M,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Import a previously exported configuration file to restore settings."}),i.jsxs(R,{variant:"outline",className:"w-full",children:[i.jsx(k,{className:"h-4 w-4 mr-2"}),"Import Configuration"]})]})]}),i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"Database Backup"})}),i.jsxs(M,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a backup of the current database state."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(R,{variant:"outline",className:"w-full",children:[i.jsx(N,{className:"h-4 w-4 mr-2"}),"Create Backup"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Last backup: 2025-12-30 23:00:00"})]})]})]}),i.jsxs(T,{children:[i.jsx(L,{children:i.jsx(V,{children:"System Reset"})}),i.jsxs(M,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Reset system to default configuration. This action cannot be undone."}),i.jsxs(R,{variant:"destructive",className:"w-full",children:[i.jsx(S,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]})]})]})]})]})}function n(e){const{children:s,value:t,index:n,...r}=e;return i.jsx("div",{role:"tabpanel",hidden:t!==n,id:`admin-tabpanel-${n}`,"aria-labelledby":`admin-tab-${n}`,...r,children:t===n&&i.jsx(H,{sx:{py:3},children:s})})}function r(e){return{id:`admin-tab-${e}`,"aria-controls":`admin-tabpanel-${e}`}}import{r as a,j as i,R as l,bN as c,S as o,au as d,V as x,Y as h,bO as m,a3 as j,I as u,ax as p,aC as g,bP as v,bQ as f,bR as y,bS as b,bT as w,bU as C,bV as N,L as S,bF as A,bW as k,a4 as z}from"./react-core-hQu9tqS1.js";import{o as D,p as E,h as R,C as T,d as L,I,f as M,B as U,D as B,j as P,k as F,l as $,m as O,n as q,e as V,P as W,s as _}from"./index-BDwglPMF.js";import{B as H,G as K,P as G,T as J,d as Q,I as Y,e as X,f as Z,C as ee,h as se,L as te,D as ne,j as re,k as ae,l as ie,m as le,n as ce,o as oe,A as de,p as xe,q as he,t as me,v as je,w as ue,x as pe,y as ge,z as ve,E as fe,F as ye,H as be,J as we,K as Ce,M as Ne,S as Se,N as Ae,O as ke,Q as ze,R as De,U as Ee}from"./mui-core-BKffG9O1.js";import{S as Re,N as Te,a as Le,F as Ie,L as Me,A as Ue,B as Be,b as Pe,c as Fe,E as $e,d as Oe,e as qe,C as Ve,D as We,f as _e,P as He,g as Ke,h as Ge,R as Je,U as Qe,M as Ye,i as Xe,j as Ze,k as es,l as ss,T as ts,m as ns,n as rs,o as as,p as is,q as ls,r as cs,H as os,W as ds,s as xs,t as hs,u as ms,v as js,w as us,x as ps,y as gs}from"./mui-icons-ChfCmgJo.js";import{R as vs,P as fs,b as ys,C as bs,c as ws,L as Cs,d as Ns,X as Ss,Y as As,e as ks,f as zs,B as Ds,h as Es}from"./chart-vendor-DWRb53_H.js";import{T as Rs,a as Ts,b as Ls,c as Is,d as Ms,e as Us}from"./table-_lE51wjz.js";import{S as Bs,a as Ps,b as Fs,c as $s,d as Os}from"./select-Bmd3s7f4.js";import{S as qs}from"./switch-9MiV1CpI.js";import{a as Vs}from"./react-router-cBrq_s0x.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./utils-vendor-Bojdf5C8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";const Ws=({alerts:e=[],loading:s})=>{const[t,n]=a.useState(null),[r,c]=a.useState(["all"]),[o,d]=a.useState(["all"]),[x,h]=a.useState(""),[m,j]=a.useState(!1),u={geofencing:i.jsx(Me,{}),budget:i.jsx(Ue,{}),maintenance:i.jsx(Be,{}),license:i.jsx(Pe,{}),fuel:i.jsx(We,{}),vehicle:i.jsx(We,{}),system:i.jsx($e,{})},p={info:"info",warning:"warning",error:"error",critical:"error"},g=a.useMemo(()=>{let s=[...e];if(m||(s=s.filter(e=>"resolved"!==e.status)),r.includes("all")||(s=s.filter(e=>r.includes(e.severity))),o.includes("all")||(s=s.filter(e=>o.includes(e.type))),x){const e=x.toLowerCase();s=s.filter(s=>s.title.toLowerCase().includes(e)||s.message.toLowerCase().includes(e)||(s.source?.toLowerCase().includes(e)??!1))}return s.sort((e,s)=>"critical"===e.severity&&"critical"!==s.severity?-1:"critical"===s.severity&&"critical"!==e.severity?1:new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime()),s},[e,r,o,x,m]),v=a.useMemo(()=>{const s={critical:0,error:0,warning:0,info:0};return e.filter(e=>"active"===e.status).forEach(e=>{s[e.severity]=(s[e.severity]||0)+1}),s},[e]),f=e=>{const s=new Date(e),t=(new Date).getTime()-s.getTime();return 6e4>t?"Just now":36e5>t?`${Math.floor(t/6e4)}m ago`:864e5>t?`${Math.floor(t/36e5)}h ago`:s.toLocaleDateString()};return s&&0===e.length?i.jsx(H,{sx:{p:2},children:"Loading alerts..."}):i.jsxs(H,{children:[i.jsxs(K,{container:!0,spacing:2,sx:{mb:3},children:[i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center",bgcolor:"error.main",color:"error.contrastText"},children:[i.jsx(J,{variant:"h4",children:v.critical??0}),i.jsx(J,{variant:"caption",children:"Critical"})]})}),i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center",bgcolor:"error.light"},children:[i.jsx(J,{variant:"h4",children:v.error??0}),i.jsx(J,{variant:"caption",children:"Errors"})]})}),i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center",bgcolor:"warning.light"},children:[i.jsx(J,{variant:"h4",children:v.warning??0}),i.jsx(J,{variant:"caption",children:"Warnings"})]})}),i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center",bgcolor:"info.light"},children:[i.jsx(J,{variant:"h4",children:v.info??0}),i.jsx(J,{variant:"caption",children:"Info"})]})})]}),i.jsx(G,{sx:{p:2,mb:3},children:i.jsxs(K,{container:!0,spacing:2,alignItems:"center",children:[i.jsx(K,{size:{xs:12,md:4},children:i.jsx(Q,{fullWidth:!0,size:"small",placeholder:"Search alerts...",value:x,onChange:e=>h(e.target.value),InputProps:{startAdornment:i.jsx(Y,{position:"start",children:i.jsx(Re,{})})}})}),i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(X,{value:r,onChange:(e,s)=>s&&c(s),size:"small",children:[i.jsx(Z,{value:"all",children:"All"}),i.jsx(Z,{value:"critical",children:"Critical"}),i.jsx(Z,{value:"error",children:"Error"}),i.jsx(Z,{value:"warning",children:"Warning"}),i.jsx(Z,{value:"info",children:"Info"})]})}),i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(H,{display:"flex",justifyContent:"flex-end",gap:1,children:[i.jsx(ee,{icon:i.jsx(m?Te:Le,{}),label:m?"Showing Resolved":"Hiding Resolved",onClick:()=>j(!m),color:m?"primary":"default"}),i.jsx(se,{badgeContent:g.length,color:"primary",children:i.jsx(Ie,{})})]})})]})}),i.jsx(H,{sx:{mb:2},children:i.jsxs(X,{value:o,onChange:(e,s)=>s&&d(s),size:"small",sx:{flexWrap:"wrap"},children:[i.jsx(Z,{value:"all",children:"All Types"}),i.jsxs(Z,{value:"geofencing",children:[i.jsx(Me,{sx:{mr:.5}})," Geofencing"]}),i.jsxs(Z,{value:"budget",children:[i.jsx(Ue,{sx:{mr:.5}})," Budget"]}),i.jsxs(Z,{value:"maintenance",children:[i.jsx(Be,{sx:{mr:.5}})," Maintenance"]}),i.jsxs(Z,{value:"license",children:[i.jsx(Pe,{sx:{mr:.5}})," License"]})]})}),0===g.length?i.jsxs(G,{sx:{p:3,textAlign:"center"},children:[i.jsx(Fe,{sx:{fontSize:48,color:"text.disabled",mb:2}}),i.jsx(J,{color:"text.secondary",children:!x&&r.includes("all")&&o.includes("all")?"No active alerts":"No alerts match your filters"})]}):i.jsx(te,{children:g.map((e,s)=>i.jsxs(l.Fragment,{children:[s>0&&i.jsx(ne,{}),i.jsxs(re,{sx:{alignItems:"flex-start",py:2},children:[i.jsx(ae,{sx:{mt:1},children:i.jsx(se,{badgeContent:e.actionRequired?"!":void 0,color:"error",children:u[e.type]||i.jsx($e,{})})}),i.jsx(ie,{primary:i.jsxs(H,{display:"flex",alignItems:"center",gap:1,children:[i.jsx(J,{variant:"subtitle1",component:"span",children:e.title}),i.jsx(ee,{label:e.severity,size:"small",color:p[e.severity]}),"acknowledged"===e.status&&i.jsx(ee,{label:"Acknowledged",size:"small",variant:"outlined"}),"resolved"===e.status&&i.jsx(ee,{label:"Resolved",size:"small",color:"success",variant:"outlined"})]}),secondary:i.jsxs(H,{children:[i.jsx(J,{variant:"body2",color:"text.secondary",sx:{mt:1},children:e.message}),i.jsxs(H,{display:"flex",gap:2,alignItems:"center",sx:{mt:1},children:[i.jsx(J,{variant:"caption",color:"text.secondary",children:f(e.timestamp)}),e.source&&i.jsxs(J,{variant:"caption",color:"text.secondary",children:["Source: ",e.source]}),e.vehicleId&&i.jsx(ee,{label:`Vehicle: ${e.vehicleId}`,size:"small"})]}),void 0!==e.threshold&&void 0!==e.actual&&i.jsx(H,{sx:{mt:1,p:1,bgcolor:"background.default",borderRadius:1},children:i.jsxs(J,{variant:"caption",children:["Threshold: ",e.threshold," | Actual: ",e.actual]})}),i.jsx(le,{in:t===e.id,children:i.jsxs(H,{sx:{mt:2,p:2,bgcolor:"background.default",borderRadius:1},children:[e.metadata&&i.jsxs(H,{children:[i.jsx(J,{variant:"caption",color:"text.secondary",children:"Additional Details:"}),Object.entries(e.metadata).map(([e,s])=>i.jsxs(J,{variant:"body2",children:[e,": ",JSON.stringify(s)]},e))]}),"active"===e.status&&i.jsxs(H,{sx:{mt:2,display:"flex",gap:1},children:[i.jsx(ee,{label:"Acknowledge",onClick:()=>{},color:"primary",variant:"outlined"}),i.jsx(ee,{label:"Resolve",onClick:()=>{},color:"success",variant:"outlined"})]})]})})]})}),i.jsx(ce,{sx:{top:"50%",transform:"translateY(-50%)"},children:i.jsx(oe,{edge:"end",onClick:()=>n(t===e.id?null:e.id),children:i.jsx(t===e.id?Oe:qe,{})})})]})]},e.id))}),(v.critical??0)>0&&i.jsxs(de,{severity:"error",sx:{position:"fixed",bottom:20,right:20,zIndex:1e3},action:i.jsx(oe,{color:"inherit",size:"small",children:i.jsx(Ve,{})}),children:[i.jsx(xe,{children:"Critical Alerts Active"}),v.critical??0," critical alert(s) require immediate attention"]})]})},_s=({emulators:e,loading:s})=>{const[t,n]=a.useState(null),[r,c]=a.useState("all"),o={vehicle:i.jsx(We,{}),driver:i.jsx(ss,{}),fuel:i.jsx(es,{}),maintenance:i.jsx(Be,{}),gps:i.jsx(Ze,{}),route:i.jsx(Xe,{}),cost:i.jsx(Ue,{})},d={running:"success",stopped:"default",paused:"warning",error:"error"},x=a.useMemo(()=>e?[...e.active||[],...e.inactive||[]]:[],[e]),h=a.useMemo(()=>"all"===r?x:x.filter(e=>e.type===r),[x,r]),m=a.useMemo(()=>{const e={};return x.forEach(s=>{e[s.type]||(e[s.type]={total:0,running:0,records:0}),e[s.type].total++,"running"===s.status&&e[s.type].running++,e[s.type].records+=s.recordCount||0}),e},[x]),j=e=>{const s=new Date(e),t=(new Date).getTime()-s.getTime();return 6e4>t?`${Math.floor(t/1e3)}s ago`:36e5>t?`${Math.floor(t/6e4)}m ago`:864e5>t?`${Math.floor(t/36e5)}h ago`:s.toLocaleDateString()};return s&&!e?i.jsx(H,{sx:{p:2},children:"Loading emulator data..."}):e&&0!==x.length?i.jsxs(H,{children:[i.jsx(K,{container:!0,spacing:2,sx:{mb:3},children:Object.entries(m).map(([e,s])=>i.jsx(K,{size:{xs:12,sm:6,md:3},children:i.jsx(he,{sx:{cursor:"pointer",bgcolor:r===e?"primary.main":"background.paper",color:r===e?"primary.contrastText":"text.primary",transition:"all 0.3s"},onClick:()=>c(r===e?"all":e),children:i.jsxs(me,{children:[i.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[i.jsxs(H,{display:"flex",alignItems:"center",gap:1,children:[o[e],i.jsx(J,{variant:"subtitle2",sx:{textTransform:"capitalize"},children:e})]}),i.jsx(ee,{label:`${s.running}/${s.total}`,size:"small",color:s.running>0?"success":"default"})]}),i.jsx(J,{variant:"h6",sx:{mt:1},children:s.records.toLocaleString()}),i.jsx(J,{variant:"caption",children:"records generated"})]})})},e))}),i.jsx(G,{sx:{p:2,mb:3},children:i.jsxs(K,{container:!0,spacing:3,children:[i.jsx(K,{size:{xs:3},children:i.jsxs(H,{textAlign:"center",children:[i.jsx(J,{variant:"h5",color:"primary",children:e.statistics?.totalRecords.toLocaleString()??0}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Total Records"})]})}),i.jsx(K,{size:{xs:3},children:i.jsxs(H,{textAlign:"center",children:[i.jsx(J,{variant:"h5",color:"success.main",children:e.active?.length??0}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Active Emulators"})]})}),i.jsx(K,{size:{xs:3},children:i.jsxs(H,{textAlign:"center",children:[i.jsxs(J,{variant:"h5",children:[e.statistics?.totalMemory??0," MB"]}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Memory Usage"})]})}),i.jsx(K,{size:{xs:3},children:i.jsxs(H,{textAlign:"center",children:[i.jsxs(J,{variant:"h5",color:e.statistics?.errorRate>5?"error":"text.primary",children:[(e.statistics?.errorRate??0).toFixed(2),"%"]}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Error Rate"})]})})]})}),i.jsx(je,{component:G,children:i.jsxs(ue,{children:[i.jsx(pe,{children:i.jsxs(ge,{children:[i.jsx(ve,{children:"Emulator"}),i.jsx(ve,{children:"Status"}),i.jsx(ve,{align:"right",children:"Records"}),i.jsx(ve,{align:"right",children:"Update Freq"}),i.jsx(ve,{align:"right",children:"Memory"}),i.jsx(ve,{children:"Last Update"}),i.jsx(ve,{align:"center",children:"Actions"}),i.jsx(ve,{})]})}),i.jsx(fe,{children:h.map(e=>i.jsxs(l.Fragment,{children:[i.jsxs(ge,{hover:!0,children:[i.jsx(ve,{children:i.jsxs(H,{display:"flex",alignItems:"center",gap:1,children:[o[e.type],i.jsx(J,{variant:"body2",children:e.name})]})}),i.jsx(ve,{children:i.jsx(ee,{icon:i.jsx("running"===e.status?_e:"paused"===e.status?He:"error"===e.status?$e:Ke,{}),label:e.status,size:"small",color:d[e.status]})}),i.jsx(ve,{align:"right",children:e.recordCount.toLocaleString()}),i.jsxs(ve,{align:"right",children:[e.updateFrequency,"s"]}),i.jsx(ve,{align:"right",children:e.memoryUsage?i.jsxs(H,{children:[i.jsxs(J,{variant:"caption",children:[e.memoryUsage," MB"]}),i.jsx(ye,{variant:"determinate",value:Math.min(e.memoryUsage/100*100,100),sx:{mt:.5,height:4},color:e.memoryUsage>80?"error":"primary"})]}):"-"}),i.jsx(ve,{children:i.jsx(J,{variant:"caption",children:j(e.lastUpdate)})}),i.jsx(ve,{align:"center",children:i.jsxs(H,{display:"flex",justifyContent:"center",gap:.5,children:[i.jsx(be,{title:"running"===e.status?"Stop":"Start",children:i.jsx(oe,{size:"small",onClick:()=>{},color:"running"===e.status?"error":"success",children:i.jsx("running"===e.status?Ke:Ge,{})})}),i.jsx(be,{title:"Refresh",children:i.jsx(oe,{size:"small",onClick:()=>{},disabled:"running"!==e.status,children:i.jsx(Je,{})})})]})}),i.jsx(ve,{children:i.jsx(oe,{size:"small",onClick:()=>n(t===e.id?null:e.id),children:i.jsx(t===e.id?Oe:qe,{})})})]}),i.jsx(ge,{children:i.jsx(ve,{colSpan:8,sx:{py:0},children:i.jsx(le,{in:t===e.id,children:i.jsx(H,{sx:{p:2,bgcolor:"background.default"},children:i.jsxs(K,{container:!0,spacing:2,children:[i.jsxs(K,{size:{xs:4},children:[i.jsx(J,{variant:"caption",color:"text.secondary",children:"Configuration"}),i.jsxs(J,{variant:"body2",children:["Auto-generate: ",e.config?.autoGenerate?"Yes":"No"]}),i.jsxs(J,{variant:"body2",children:["Batch size: ",e.config?.batchSize??10]}),i.jsxs(J,{variant:"body2",children:["Interval: ",e.config?.interval??60,"s"]})]}),i.jsxs(K,{size:{xs:4},children:[i.jsx(J,{variant:"caption",color:"text.secondary",children:"Performance"}),i.jsxs(J,{variant:"body2",children:["CPU Usage: ",e.cpuUsage??0,"%"]}),i.jsxs(J,{variant:"body2",children:["Error Count: ",e.errorCount??0]})]}),i.jsx(K,{size:{xs:4},children:i.jsxs(H,{display:"flex",gap:1,children:[i.jsx(we,{size:"small",variant:"outlined",startIcon:i.jsx(Qe,{}),children:"Reset"}),i.jsx(we,{size:"small",variant:"outlined",startIcon:i.jsx(Ye,{}),children:"Clear Cache"})]})})]})})})})})]},e.id))})]})}),i.jsxs(H,{sx:{mt:3,display:"flex",justifyContent:"space-between"},children:[i.jsxs(H,{display:"flex",gap:2,children:[i.jsx(we,{variant:"contained",color:"success",startIcon:i.jsx(Ge,{}),children:"Start All"}),i.jsx(we,{variant:"contained",color:"error",startIcon:i.jsx(Ke,{}),children:"Stop All"}),i.jsx(we,{variant:"outlined",startIcon:i.jsx(Je,{}),children:"Refresh All"})]}),i.jsx(J,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"},children:"Emulator Monitor"})]})]}):i.jsx(H,{sx:{p:2,textAlign:"center"},children:i.jsx(J,{color:"text.secondary",children:"No emulators configured"})})},Hs=({errors:e=[],loading:s})=>{const[t,n]=a.useState("line"),[r,l]=a.useState("24h"),[c,o]=a.useState("all"),d=a.useMemo(()=>{const s=Date.now()-{"1h":36e5,"24h":864e5,"7d":6048e5,"30d":2592e6}[r];let t=e.filter(e=>e.timestamp>s);return"all"!==c&&(t=t.filter(e=>e.endpoint===c)),t},[e,r,c]),x=a.useMemo(()=>[...new Set(e.map(e=>e.endpoint))].filter(Boolean).sort(),[e]),h=a.useMemo(()=>{if(!d||0===d.length)return[];const e="1h"===r?12:"24h"===r?24:"7d"===r?7:30,s=Date.now(),t={"1h":3e5,"24h":36e5,"7d":864e5,"30d":864e5}[r],n=[];for(let a=e-1;a>=0;a--){const e=s-(a+1)*t,i=s-a*t,l=d.filter(s=>s.timestamp>=e&&i>s.timestamp),c="1h"===r||"24h"===r?new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(i).toLocaleDateString([],{month:"short",day:"numeric"});n.push({time:c,errors:l.length,unique:new Set(l.map(e=>e.type)).size})}return n},[d,r]),m=a.useMemo(()=>{const e={};return d.forEach(s=>{const t=s.type||"Unknown";e[t]=(e[t]||0)+1}),Object.entries(e).map(([e,s])=>({name:e,value:s}))},[d]),j=a.useMemo(()=>{if(2>h.length)return"flat";const e=h.slice(0,Math.floor(h.length/2)),s=h.slice(Math.floor(h.length/2)),t=e.reduce((e,s)=>e+s.errors,0)/e.length,n=s.reduce((e,s)=>e+s.errors,0)/s.length;return n>1.1*t?"up":.9*t>n?"down":"flat"},[h]),u=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#6C5CE7"];return s?i.jsx(H,{sx:{p:2},children:"Loading error data..."}):i.jsxs(H,{children:[i.jsxs(H,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[i.jsxs(H,{display:"flex",gap:2,alignItems:"center",children:[i.jsxs(X,{value:t,exclusive:!0,onChange:(e,s)=>s&&n(s),size:"small",children:[i.jsx(Z,{value:"line",children:"Line"}),i.jsx(Z,{value:"bar",children:"Bar"}),i.jsx(Z,{value:"pie",children:"Pie"})]}),i.jsxs(X,{value:r,exclusive:!0,onChange:(e,s)=>s&&l(s),size:"small",children:[i.jsx(Z,{value:"1h",children:"1H"}),i.jsx(Z,{value:"24h",children:"24H"}),i.jsx(Z,{value:"7d",children:"7D"}),i.jsx(Z,{value:"30d",children:"30D"})]}),i.jsxs(Ce,{size:"small",sx:{minWidth:150},children:[i.jsx(Ne,{children:"Endpoint"}),i.jsxs(Se,{value:c,label:"Endpoint",onChange:e=>o(e.target.value),children:[i.jsx(Ae,{value:"all",children:"All Endpoints"}),x.map(e=>i.jsx(Ae,{value:e,children:e},e))]})]})]}),i.jsxs(H,{display:"flex",gap:1,alignItems:"center",children:["up"===j&&i.jsx(ee,{icon:i.jsx(ts,{}),label:"Increasing",color:"error",size:"small"}),"down"===j&&i.jsx(ee,{icon:i.jsx(ns,{}),label:"Decreasing",color:"success",size:"small"}),"flat"===j&&i.jsx(ee,{icon:i.jsx(rs,{}),label:"Stable",color:"default",size:"small"}),i.jsxs(J,{variant:"body2",color:"text.secondary",children:["Total: ",d.length," errors"]})]})]}),i.jsx(vs,"pie"===t?{width:"100%",height:300,children:i.jsxs(fs,{children:[i.jsx(ys,{data:m,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:s})=>`${e}: ${(100*s).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:m.map((e,s)=>i.jsx(bs,{fill:u[s%u.length]},`cell-${s}`))}),i.jsx(ws,{})]})}:{width:"100%",height:300,children:"line"===t?i.jsxs(Cs,{data:h,children:[i.jsx(Ns,{strokeDasharray:"3 3"}),i.jsx(Ss,{dataKey:"time"}),i.jsx(As,{}),i.jsx(ws,{}),i.jsx(ks,{}),i.jsx(zs,{type:"monotone",dataKey:"errors",stroke:"#FF6B6B",strokeWidth:2,name:"Error Count"}),i.jsx(zs,{type:"monotone",dataKey:"unique",stroke:"#4ECDC4",strokeWidth:2,name:"Unique Types"})]}):i.jsxs(Ds,{data:h,children:[i.jsx(Ns,{strokeDasharray:"3 3"}),i.jsx(Ss,{dataKey:"time"}),i.jsx(As,{}),i.jsx(ws,{}),i.jsx(ks,{}),i.jsx(Es,{dataKey:"errors",fill:"#FF6B6B",name:"Error Count"}),i.jsx(Es,{dataKey:"unique",fill:"#4ECDC4",name:"Unique Types"})]})}),i.jsxs(K,{container:!0,spacing:2,sx:{mt:2},children:[i.jsx(K,{size:{xs:4},children:i.jsxs(H,{sx:{textAlign:"center"},children:[i.jsx(J,{variant:"h6",color:"error",children:d.filter(e=>e.statusCode&&e.statusCode>=500).length}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Server Errors (5xx)"})]})}),i.jsx(K,{size:{xs:4},children:i.jsxs(H,{sx:{textAlign:"center"},children:[i.jsx(J,{variant:"h6",color:"warning.main",children:d.filter(e=>e.statusCode&&e.statusCode>=400&&500>e.statusCode).length}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Client Errors (4xx)"})]})}),i.jsx(K,{size:{xs:4},children:i.jsxs(H,{sx:{textAlign:"center"},children:[i.jsx(J,{variant:"h6",color:"info.main",children:new Set(d.map(e=>e.endpoint)).size}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Affected Endpoints"})]})})]}),d.length>0&&i.jsxs(H,{sx:{mt:3},children:[i.jsx(J,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Most Recent Errors"}),d.slice(0,3).map(e=>i.jsxs(H,{sx:{p:1,mb:1,bgcolor:"background.default",borderRadius:1},children:[i.jsxs(J,{variant:"caption",component:"div",children:[i.jsx("strong",{children:e.type})," at ",e.endpoint]}),i.jsxs(J,{variant:"caption",color:"text.secondary",children:[new Date(e.timestamp).toLocaleString()," - ",e.message]})]},e.id))]})]})},Ks=({metrics:e,loading:s})=>{const t=a.useMemo(()=>e?.endpoints?[...e.endpoints].sort((e,s)=>s.p95-e.p95).slice(0,5):[],[e?.endpoints]),n=a.useMemo(()=>e?.endpoints?[...e.endpoints].filter(e=>e.errorRate>0).sort((e,s)=>s.errorRate-e.errorRate).slice(0,3):[],[e?.endpoints]),r=e=>100>e?"success":300>e?"primary":1e3>e?"warning":"error",l=e=>1e3>e?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`;return s&&!e?i.jsx(H,{display:"flex",justifyContent:"center",p:3,children:i.jsx(ke,{})}):e?i.jsxs(H,{children:[i.jsxs(K,{container:!0,spacing:2,sx:{mb:3},children:[i.jsx(K,{size:{xs:12,md:6},children:i.jsxs(G,{sx:{p:2},children:[i.jsxs(H,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i.jsx(as,{color:"primary"}),i.jsx(J,{variant:"subtitle2",children:"Throughput"})]}),i.jsx(J,{variant:"h4",children:e.throughput?.requestsPerMinute||0}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"requests/minute"}),i.jsxs(H,{sx:{mt:1},children:[i.jsxs(J,{variant:"caption",display:"block",children:["Peak: ",e.throughput?.peakRPM||0," RPM"]}),i.jsxs(J,{variant:"caption",display:"block",children:["Rate: ",e.throughput?.requestsPerSecond?.toFixed(2)||0," req/s"]})]})]})}),i.jsx(K,{size:{xs:12,md:6},children:i.jsxs(G,{sx:{p:2},children:[i.jsxs(H,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i.jsx(is,{color:"primary"}),i.jsx(J,{variant:"subtitle2",children:"Avg Response Time"})]}),i.jsx(J,{variant:"h4",children:l(e.throughput?.avgResponseTime||0)}),i.jsx(ee,{size:"small",label:200>e.throughput?.avgResponseTime?"Excellent":500>e.throughput?.avgResponseTime?"Good":1e3>e.throughput?.avgResponseTime?"Fair":"Poor",color:r(e.throughput?.avgResponseTime||0),sx:{mt:1}})]})}),i.jsx(K,{size:{xs:12,md:6},children:i.jsxs(G,{sx:{p:2},children:[i.jsxs(H,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i.jsx(ls,{color:"primary"}),i.jsx(J,{variant:"subtitle2",children:"Cache Hit Rate"})]}),i.jsxs(J,{variant:"h4",children:[(100*(e.cache?.hitRate||0)).toFixed(1),"%"]}),i.jsx(ye,{variant:"determinate",value:100*(e.cache?.hitRate||0),color:e.cache?.hitRate>.8?"success":e.cache?.hitRate>.6?"warning":"error",sx:{mt:1,height:6,borderRadius:3}}),i.jsxs(J,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:1},children:[e.cache?.totalHits||0," hits / ",e.cache?.totalMisses||0," misses"]})]})}),i.jsx(K,{size:{xs:12,md:6},children:i.jsxs(G,{sx:{p:2},children:[i.jsxs(H,{display:"flex",alignItems:"center",gap:1,mb:1,children:[i.jsx(cs,{color:"primary"}),i.jsx(J,{variant:"subtitle2",children:"Database"})]}),i.jsx(J,{variant:"h4",children:l(e.database?.avgQueryTime||0)}),i.jsx(J,{variant:"caption",color:"text.secondary",display:"block",children:"avg query time"}),i.jsxs(H,{sx:{mt:1},children:[i.jsxs(J,{variant:"caption",display:"block",children:["Connections: ",e.database?.activeConnections||0,"/",e.database?.maxConnections||0]}),i.jsxs(J,{variant:"caption",display:"block",color:"warning.main",children:["Slow queries: ",e.database?.slowQueries||0]})]})]})})]}),i.jsxs(H,{sx:{mb:3},children:[i.jsx(J,{variant:"subtitle2",gutterBottom:!0,children:"Response Time Percentiles (All Endpoints)"}),i.jsxs(K,{container:!0,spacing:2,children:[i.jsx(K,{size:{xs:4},children:i.jsxs(H,{sx:{textAlign:"center"},children:[i.jsx(J,{variant:"h6",color:r(150),children:l(150)}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"p50 (median)"})]})}),i.jsx(K,{size:{xs:4},children:i.jsxs(H,{sx:{textAlign:"center"},children:[i.jsx(J,{variant:"h6",color:r(450),children:l(450)}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"p95"})]})}),i.jsx(K,{size:{xs:4},children:i.jsxs(H,{sx:{textAlign:"center"},children:[i.jsx(J,{variant:"h6",color:r(800),children:l(800)}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"p99"})]})})]})]}),t.length>0&&i.jsxs(H,{sx:{mb:3},children:[i.jsx(J,{variant:"subtitle2",gutterBottom:!0,children:"Slowest Endpoints"}),i.jsx(je,{component:G,variant:"outlined",children:i.jsxs(ue,{size:"small",children:[i.jsx(pe,{children:i.jsxs(ge,{children:[i.jsx(ve,{children:"Endpoint"}),i.jsx(ve,{align:"right",children:"p50"}),i.jsx(ve,{align:"right",children:"p95"}),i.jsx(ve,{align:"right",children:"p99"}),i.jsx(ve,{align:"right",children:"Requests"})]})}),i.jsx(fe,{children:t.map((e,s)=>i.jsxs(ge,{children:[i.jsx(ve,{children:i.jsxs(J,{variant:"caption",children:[i.jsx(ee,{label:e.method,size:"small",sx:{mr:1,fontSize:"0.7rem"}}),e.path]})}),i.jsx(ve,{align:"right",children:i.jsx(ee,{label:l(e.p50),size:"small",color:r(e.p50)})}),i.jsx(ve,{align:"right",children:i.jsx(ee,{label:l(e.p95),size:"small",color:r(e.p95)})}),i.jsx(ve,{align:"right",children:i.jsx(ee,{label:l(e.p99),size:"small",color:r(e.p99)})}),i.jsx(ve,{align:"right",children:e.requestCount})]},s))})]})})]}),n.length>0&&i.jsxs(H,{children:[i.jsx(J,{variant:"subtitle2",gutterBottom:!0,color:"error",children:"Endpoints with Errors"}),n.map((e,s)=>i.jsxs(H,{sx:{p:1,mb:1,bgcolor:"rgba(255,0,0,0.1)",borderRadius:1},children:[i.jsx(J,{variant:"caption",children:i.jsxs("strong",{children:[e.method," ",e.path]})}),i.jsxs(J,{variant:"caption",display:"block",color:"error",children:["Error rate: ",(100*e.errorRate).toFixed(2),"% (",e.lastHour.errors," errors in last hour)"]})]},s))]})]}):i.jsx(J,{color:"text.secondary",sx:{p:2},children:"No performance data available"})},Gs=({health:e,loading:s})=>{const t=a.useMemo(()=>{if(!e)return i.jsx(os,{color:"disabled"});switch(e.status){case"healthy":return i.jsx(_e,{color:"success",sx:{fontSize:40}});case"degraded":return i.jsx(ds,{color:"warning",sx:{fontSize:40}});case"down":return i.jsx($e,{color:"error",sx:{fontSize:40}});default:return i.jsx(os,{color:"disabled",sx:{fontSize:40}})}},[e]),n=a.useMemo(()=>{if(!e)return"primary";switch(e.status){case"healthy":return"success";case"degraded":return"warning";case"down":return"error";default:return"primary"}},[e]);if(s&&!e)return i.jsx(G,{sx:{p:3},children:i.jsx(H,{display:"flex",justifyContent:"center",children:i.jsx(ke,{})})});if(!e)return i.jsx(G,{sx:{p:3},children:i.jsx(J,{color:"text.secondary",children:"No health data available"})});const r=(()=>{if(!e)return 0;switch(e.status){case"healthy":return 100;case"degraded":return 75;default:return 0}})();return i.jsx(G,{sx:{p:3},children:i.jsxs(K,{container:!0,spacing:3,children:[i.jsx(K,{size:{xs:12,md:3},children:i.jsxs(H,{display:"flex",flexDirection:"column",alignItems:"center",gap:2,children:[t,i.jsx(ee,{label:e.status.toUpperCase(),color:n,size:"medium",sx:{fontWeight:"bold",fontSize:"1rem",px:2,py:2.5}}),i.jsx(J,{variant:"body2",color:"text.secondary",children:"System Status"})]})}),i.jsx(K,{size:{xs:12,md:9},children:i.jsxs(K,{container:!0,spacing:2,children:[i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(H,{sx:{mb:1},children:[i.jsx(J,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Availability"}),i.jsxs(J,{variant:"h4",children:[r.toFixed(1),"%"]}),i.jsx(ye,{variant:"determinate",value:r,color:n,sx:{mt:1,height:8,borderRadius:4}})]})}),i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(H,{sx:{mb:1},children:[i.jsx(J,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Uptime"}),i.jsx(J,{variant:"h4",children:(e=>{const s=Math.floor(e/86400),t=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),r=e%60;return s>0?`${s}d ${t}h ${n}m`:t>0?`${t}h ${n}m ${r}s`:n>0?`${n}m ${r}s`:`${r}s`})(e.uptime||0)}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Since last restart"})]})}),i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(H,{sx:{mb:1},children:[i.jsx(J,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Avg Response Time"}),i.jsxs(J,{variant:"h4",children:[e.components?.api?.responseTime||0,"ms"]}),i.jsx(ee,{size:"small",label:200>e.components?.api?.responseTime?"Fast":500>e.components?.api?.responseTime?"Normal":"Slow",color:200>e.components?.api?.responseTime?"success":500>e.components?.api?.responseTime?"default":"warning",sx:{mt:1}})]})}),i.jsxs(K,{size:{xs:12},children:[i.jsx(J,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Component Status"}),i.jsxs(K,{container:!0,spacing:2,sx:{mt:1},children:[i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(G,{sx:{p:2,bgcolor:"background.default"},children:[i.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[i.jsx(J,{variant:"body2",children:"API Service"}),i.jsx(ee,{size:"small",label:e.components?.api?.status||"Unknown",color:"healthy"===e.components?.api?.status?"success":"error"})]}),i.jsxs(J,{variant:"caption",color:"text.secondary",children:["Response: ",e.components?.api?.responseTime||0,"ms"]})]})}),i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(G,{sx:{p:2,bgcolor:"background.default"},children:[i.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[i.jsx(J,{variant:"body2",children:"Emulators"}),i.jsx(ee,{size:"small",label:e.components?.emulators?.status||"Unknown",color:"healthy"===e.components?.emulators?.status?"success":"error"})]}),i.jsxs(J,{variant:"caption",color:"text.secondary",children:["Active: ",e.components?.emulators?.activeCount||0]})]})}),i.jsx(K,{size:{xs:12,md:4},children:i.jsxs(G,{sx:{p:2,bgcolor:"background.default"},children:[i.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[i.jsx(J,{variant:"body2",children:"Database"}),i.jsx(ee,{size:"small",label:e.components?.database?.status||"Unknown",color:"healthy"===e.components?.database?.status?"success":"error"})]}),i.jsxs(J,{variant:"caption",color:"text.secondary",children:["Connections: ",e.components?.database?.connectionPool||0]})]})})]})]}),i.jsx(K,{size:{xs:12},children:i.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mt:2},children:[i.jsxs(J,{variant:"caption",color:"text.secondary",children:["Version: ",e.version||"Unknown"]}),i.jsxs(J,{variant:"caption",color:"text.secondary",children:["Last Check: ",e.timestamp?new Date(e.timestamp).toLocaleTimeString():"Never"]})]})})]})})]})})},Js=()=>{const[e,s]=a.useState({health:null,metrics:null,emulators:null,errors:[],alerts:[]}),[t,n]=a.useState(!0),[r,l]=a.useState(null),[c,o]=a.useState(new Date),[d,x]=a.useState(!0),h=a.useCallback(async()=>{try{l(null);const[e,t,n,r,a]=await Promise.all([D.get("/monitoring/health"),D.get("/monitoring/metrics"),D.get("/monitoring/emulators"),D.get("/monitoring/errors"),D.get("/monitoring/alerts")]);s({health:e??null,metrics:t??null,emulators:n??null,errors:r??[],alerts:a??[]}),o(new Date)}catch(e){E.error("Failed to fetch monitoring data:",e),l("Failed to fetch monitoring data. Please try again.")}finally{n(!1)}},[]);return a.useEffect(()=>{h()},[h]),a.useEffect(()=>{if(!d)return;const e=setInterval(()=>{h()},3e4);return()=>clearInterval(e)},[d,h]),t&&!e.health?i.jsx(H,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh",children:i.jsx(ke,{size:60})}):i.jsxs(H,{sx:{p:3},children:[i.jsx(G,{sx:{p:2,mb:3},children:i.jsxs(H,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[i.jsxs(H,{display:"flex",alignItems:"center",gap:2,children:[i.jsx(xs,{fontSize:"large",color:"primary"}),i.jsxs("div",{children:[i.jsx(J,{variant:"h4",children:"System Monitoring Dashboard"}),i.jsxs(J,{variant:"body2",color:"text.secondary",children:["Last updated: ",c.toLocaleTimeString()]})]})]}),i.jsxs(H,{display:"flex",gap:2,alignItems:"center",children:[i.jsxs(J,{variant:"body2",color:"text.secondary",children:["Auto-refresh: ",d?"ON":"OFF"]}),i.jsx("button",{onClick:()=>x(!d),style:{padding:"8px 16px",cursor:"pointer"},children:"Toggle"}),i.jsxs("button",{onClick:()=>{n(!0),h()},disabled:t,style:{padding:"8px 16px",cursor:"pointer"},children:[i.jsx(Je,{})," Refresh Now"]}),i.jsx("button",{onClick:()=>{const s=`Monitoring Report - ${(new Date).toISOString()}\n\nSystem Health: ${e.health?.status||"Unknown"}\nUptime: ${e.health?.uptime||0} seconds\nAPI Response Time: ${e.health?.components?.api?.responseTime||0}ms\nActive Emulators: ${e.emulators?.instances?.filter(e=>"active"===e.status)?.length||0}\nTotal Errors: ${e.errors?.length||0}\nActive Alerts: ${e.alerts?.filter(e=>"active"===e.status)?.length||0}\n`,t=new Blob([s],{type:"text/csv"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`monitoring-report-${Date.now()}.csv`,r.click(),window.URL.revokeObjectURL(n)},style:{padding:"8px 16px",cursor:"pointer"},children:"Export CSV"})]})]})}),r&&i.jsx(de,{severity:"error",sx:{mb:3},onClose:()=>l(null),children:r}),i.jsxs(K,{container:!0,spacing:3,children:[i.jsx(K,{size:{xs:12},children:i.jsx(Gs,{health:e.health,loading:t})}),i.jsx(K,{size:{xs:12,md:6},children:i.jsx(he,{sx:{height:"100%"},children:i.jsxs(me,{children:[i.jsx(J,{variant:"h6",gutterBottom:!0,children:"Performance Metrics"}),i.jsx(Ks,{metrics:e.metrics,loading:t})]})})}),i.jsx(K,{size:{xs:12,md:6},children:i.jsx(he,{sx:{height:"100%"},children:i.jsxs(me,{children:[i.jsx(J,{variant:"h6",gutterBottom:!0,children:"Error Rate Analysis"}),i.jsx(Hs,{errors:e.errors,loading:t})]})})}),i.jsx(K,{size:{xs:12},children:i.jsx(he,{children:i.jsxs(me,{children:[i.jsx(J,{variant:"h6",gutterBottom:!0,children:"Emulator Status"}),i.jsx(_s,{emulators:e.emulators,loading:t})]})})}),i.jsx(K,{size:{xs:12},children:i.jsx(he,{children:i.jsxs(me,{children:[i.jsx(J,{variant:"h6",gutterBottom:!0,children:"Active Alerts & Warnings"}),i.jsx(Ws,{alerts:e.alerts,loading:t})]})})}),i.jsx(K,{size:{xs:12},children:i.jsxs(K,{container:!0,spacing:2,children:[i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center"},children:[i.jsx(_e,{color:"success"}),i.jsx(J,{variant:"h6",children:"healthy"===e.health?.status?"100%":"degraded"===e.health?.status?"75%":"0%"}),i.jsx(J,{variant:"body2",color:"text.secondary",children:"System Health"})]})}),i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center"},children:[i.jsx(xs,{color:"primary"}),i.jsx(J,{variant:"h6",children:e.metrics?.requestsPerMinute||0}),i.jsx(J,{variant:"body2",color:"text.secondary",children:"Requests/min"})]})}),i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center"},children:[i.jsx($e,{color:"error"}),i.jsx(J,{variant:"h6",children:e.errors?.filter(e=>e.timestamp&&e.timestamp>Date.now()-36e5).length||0}),i.jsx(J,{variant:"body2",color:"text.secondary",children:"Errors (1h)"})]})}),i.jsx(K,{size:{xs:6,md:3},children:i.jsxs(G,{sx:{p:2,textAlign:"center"},children:[i.jsx(ds,{color:"warning"}),i.jsx(J,{variant:"h6",children:e.alerts?.filter(e=>"active"===e.status).length||0}),i.jsx(J,{variant:"body2",color:"text.secondary",children:"Active Alerts"})]})})]})})]})]})},Qs=[{id:"1",name:"Admin User",email:"admin@fleet.com",role:"admin",department:"IT",status:"active",lastLogin:new Date("2025-12-31T10:00:00"),createdAt:new Date("2025-01-01")},{id:"2",name:"Fleet Manager",email:"manager@fleet.com",role:"manager",department:"Operations",status:"active",lastLogin:new Date("2025-12-31T09:30:00"),createdAt:new Date("2025-02-15")},{id:"3",name:"Operator One",email:"operator1@fleet.com",role:"operator",department:"Operations",status:"active",lastLogin:new Date("2025-12-30T16:00:00"),createdAt:new Date("2025-03-10")},{id:"4",name:"Viewer User",email:"viewer@fleet.com",role:"viewer",department:"Finance",status:"inactive",lastLogin:new Date("2025-12-20T14:00:00"),createdAt:new Date("2025-04-05")}],Ys={admin:["all"],manager:["view","edit","create","assign"],operator:["view","edit"],viewer:["view"]},Xs=[{id:"1",name:"Password Policy",status:"compliant",lastChecked:new Date("2025-12-31"),description:"Minimum 12 characters, special characters required"},{id:"2",name:"Two-Factor Authentication",status:"warning",lastChecked:new Date("2025-12-31"),description:"85% of users have 2FA enabled (target: 95%)"},{id:"3",name:"Data Encryption",status:"compliant",lastChecked:new Date("2025-12-31"),description:"All data encrypted at rest and in transit"},{id:"4",name:"Access Audit Logs",status:"compliant",lastChecked:new Date("2025-12-31"),description:"All access logged and retained for 90 days"},{id:"5",name:"Security Updates",status:"non-compliant",lastChecked:new Date("2025-12-30"),description:"3 critical updates pending installation"}],Zs=[{id:"1",severity:"critical",title:"Failed Login Attempts",description:"15 failed login attempts from IP 192.168.1.100",timestamp:new Date("2025-12-31T10:30:00"),resolved:!1},{id:"2",severity:"high",title:"Unauthorized Access Attempt",description:"User attempted to access admin panel without permissions",timestamp:new Date("2025-12-31T09:15:00"),resolved:!0},{id:"3",severity:"medium",title:"Unusual Activity Pattern",description:"User logged in from new location",timestamp:new Date("2025-12-30T16:45:00"),resolved:!0}],et=[{id:"1",user:"admin@fleet.com",action:"VIEW",resource:"User Management",timestamp:new Date("2025-12-31T11:00:00"),status:"success"},{id:"2",user:"operator@fleet.com",action:"EDIT",resource:"Vehicle #123",timestamp:new Date("2025-12-31T10:45:00"),status:"success"},{id:"3",user:"viewer@fleet.com",action:"DELETE",resource:"Driver Record",timestamp:new Date("2025-12-31T10:30:00"),status:"denied"}],st=[{key:"DATABASE_URL",value:"postgresql://localhost:5432/fleet",description:"Primary database connection string",sensitive:!0},{key:"API_BASE_URL",value:"https://api.fleet.local",description:"API endpoint base URL",sensitive:!1},{key:"JWT_SECRET",value:"",description:"JWT token signing secret",sensitive:!0},{key:"REDIS_URL",value:"redis://localhost:6379",description:"Redis cache connection",sensitive:!1},{key:"SMTP_HOST",value:"smtp.fleet.local",description:"Email server hostname",sensitive:!1}],tt=[{id:"1",name:"ENABLE_3D_GARAGE",enabled:!0,description:"Enable Virtual Garage 3D visualization",environment:"all"},{id:"2",name:"ENABLE_AI_ASSISTANT",enabled:!0,description:"Enable AI-powered fleet assistant",environment:"all"},{id:"3",name:"ENABLE_ADVANCED_ANALYTICS",enabled:!1,description:"Enable advanced analytics and predictive maintenance",environment:"production"},{id:"4",name:"ENABLE_MOBILE_APP",enabled:!1,description:"Enable mobile application features",environment:"development"},{id:"5",name:"ENABLE_RBAC_STRICT",enabled:!0,description:"Enforce strict role-based access control",environment:"all"}],nt=[{component:"Database",status:"healthy",lastCheck:new Date("2025-12-31T11:30:00"),message:"PostgreSQL 14.2 - All connections healthy"},{component:"Redis Cache",status:"healthy",lastCheck:new Date("2025-12-31T11:30:00"),message:"Redis 7.0.5 - Memory usage: 45%"},{component:"API Server",status:"healthy",lastCheck:new Date("2025-12-31T11:30:00"),message:"Node.js 20.x - CPU: 12%, Memory: 512MB"},{component:"Storage",status:"degraded",lastCheck:new Date("2025-12-31T11:30:00"),message:"Disk usage: 87% - Consider cleanup"},{component:"Email Service",status:"healthy",lastCheck:new Date("2025-12-31T11:30:00"),message:"SMTP connected - Queue: 0 pending"}],rt=()=>{const l=Vs(),{user:c,isAuthenticated:o}=_(),[d,x]=a.useState(0),[h,m]=a.useState(!1),[j,u]=a.useState(!0);return a.useEffect(()=>{if(!o)return void l("/login");const e=c?.role||localStorage.getItem("userRole"),s="Admin"===e||"Administrator"===e||"SuperAdmin"===e;m(s),u(!1),s||setTimeout(()=>{l("/")},3e3)},[o,c,l]),j?i.jsx(ze,{maxWidth:"xl",children:i.jsx(H,{sx:{mt:4,textAlign:"center"},children:i.jsx(J,{children:"Loading..."})})}):h?i.jsxs(ze,{maxWidth:!1,sx:{py:3},children:[i.jsx(G,{sx:{p:3,mb:3},children:i.jsxs(H,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[i.jsxs(H,{display:"flex",alignItems:"center",gap:2,children:[i.jsx(oe,{onClick:()=>{l("/")},edge:"start",children:i.jsx(hs,{})}),i.jsx(ms,{fontSize:"large",color:"primary"}),i.jsxs(H,{children:[i.jsx(J,{variant:"h4",children:"Admin Dashboard"}),i.jsx(J,{variant:"body2",color:"text.secondary",children:"System Administration & Monitoring"})]})]}),i.jsxs(H,{display:"flex",alignItems:"center",gap:2,children:[i.jsxs(J,{variant:"body2",color:"text.secondary",children:["Logged in as: ",c?.email||"Admin"]}),i.jsx(we,{variant:"outlined",startIcon:i.jsx(js,{}),onClick:()=>l("/settings"),children:"Settings"})]})]})}),i.jsx(G,{sx:{mb:3},children:i.jsxs(De,{value:d,onChange:(e,s)=>{x(s)},"aria-label":"admin dashboard tabs",variant:"scrollable",scrollButtons:"auto",children:[i.jsx(Ee,{icon:i.jsx(us,{}),iconPosition:"start",label:"System Monitoring",...r(0)}),i.jsx(Ee,{icon:i.jsx(ps,{}),iconPosition:"start",label:"User Management",...r(1)}),i.jsx(Ee,{icon:i.jsx(gs,{}),iconPosition:"start",label:"Security & Compliance",...r(2)}),i.jsx(Ee,{icon:i.jsx(js,{}),iconPosition:"start",label:"System Configuration",...r(3)})]})}),i.jsx(n,{value:d,index:0,children:i.jsx(Js,{})}),i.jsx(n,{value:d,index:1,children:i.jsx(e,{})}),i.jsx(n,{value:d,index:2,children:i.jsx(s,{})}),i.jsx(n,{value:d,index:3,children:i.jsx(t,{})}),i.jsx(G,{sx:{p:2,mt:3},children:i.jsxs(H,{display:"flex",justifyContent:"space-around",alignItems:"center",children:[i.jsxs(H,{textAlign:"center",children:[i.jsx(J,{variant:"h6",color:"primary",children:(new Date).toLocaleDateString()}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Current Date"})]}),i.jsxs(H,{textAlign:"center",children:[i.jsx(J,{variant:"h6",color:"success.main",children:"Active"}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"System Status"})]}),i.jsxs(H,{textAlign:"center",children:[i.jsx(J,{variant:"h6",children:"v1.0.0"}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"System Version"})]}),i.jsxs(H,{textAlign:"center",children:[i.jsx(J,{variant:"h6",children:"production"}),i.jsx(J,{variant:"caption",color:"text.secondary",children:"Environment"})]})]})})]}):i.jsx(ze,{maxWidth:"md",children:i.jsx(H,{sx:{mt:8},children:i.jsxs(de,{severity:"error",children:[i.jsx(J,{variant:"h6",children:"Access Denied"}),i.jsx(J,{children:"You do not have permission to access the Admin Dashboard. Redirecting to home page..."})]})})})};export{rt as default};
