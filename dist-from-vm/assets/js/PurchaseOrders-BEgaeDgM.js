function e(){const[e,q]=s.useState([]),[k,F]=s.useState(""),[L,R]=s.useState("all"),[T,E]=s.useState(null),[V,z]=s.useState(!1),[B,_]=s.useState(!1),[Q,G]=s.useState(!1),[M,U]=s.useState(""),[H,J]=s.useState({vendorName:"",expectedDelivery:new Date(Date.now()+6048e5).toISOString().split("T")[0],items:[{description:"",partNumber:"",quantity:1,unitPrice:0}],notes:"",shippingAddress:""}),K=(e||[]).filter(e=>(e.poNumber.toLowerCase().includes(k.toLowerCase())||e.vendorName.toLowerCase().includes(k.toLowerCase()))&&("all"===L||e.status===L)),W=(e||[]).reduce((e,s)=>e+s.total,0),X=(e||[]).filter(e=>"pending-approval"===e.status).length,Y=(e||[]).filter(e=>["approved","ordered"].includes(e.status)).length,Z=(e,s,r)=>{const t=H.items.map((t,a)=>a===e?{...t,[s]:r}:t);J({...H,items:t})},ee=e=>({draft:"bg-gray-100 text-gray-700","pending-approval":"bg-yellow-100 text-yellow-700",approved:"bg-blue-100 text-blue-700",ordered:"bg-purple-100 text-purple-700",received:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700"}[e]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Purchase Orders"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage parts and service purchase orders"})]}),r.jsxs(o,{onClick:()=>_(!0),children:[r.jsx(t,{className:"w-4 h-4 mr-2"}),"Create Purchase Order"]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs(m,{children:[r.jsx(x,{className:"pb-3",children:r.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"})}),r.jsxs(j,{children:[r.jsx("div",{className:"text-2xl font-bold",children:(e||[]).length}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[r.jsx(a,{className:"w-3 h-3"}),"All time"]})]})]}),r.jsxs(m,{children:[r.jsx(x,{className:"pb-3",children:r.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Total Spend"})}),r.jsxs(j,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:["$",W.toLocaleString()]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mt-1",children:[r.jsx(i,{className:"w-3 h-3"}),"Cumulative"]})]})]}),r.jsxs(m,{children:[r.jsx(x,{className:"pb-3",children:r.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Pending Approval"})}),r.jsxs(j,{children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:X}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[r.jsx(d,{className:"w-3 h-3"}),"Awaiting review"]})]})]}),r.jsxs(m,{children:[r.jsx(x,{className:"pb-3",children:r.jsx(h,{className:"text-sm font-medium text-muted-foreground",children:"Active Orders"})}),r.jsxs(j,{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Y}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[r.jsx(a,{className:"w-3 h-3"}),"In progress"]})]})]})]}),r.jsx("div",{className:"flex gap-4",children:r.jsxs("div",{className:"relative flex-1",children:[r.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),r.jsx(p,{placeholder:"Search purchase orders...",value:k,onChange:e=>F(e.target.value),className:"pl-10"})]})}),r.jsxs(m,{children:[r.jsxs(x,{children:[r.jsxs(h,{children:["Purchase Orders (",K.length,")"]}),r.jsx(u,{children:"Track and manage all purchase orders"})]}),r.jsx(j,{children:r.jsxs(C,{children:[r.jsx(P,{children:r.jsxs(S,{children:[r.jsx(O,{children:"PO Number"}),r.jsx(O,{children:"Vendor"}),r.jsx(O,{children:"Date"}),r.jsx(O,{children:"Expected Delivery"}),r.jsx(O,{children:"Items"}),r.jsx(O,{children:"Total"}),r.jsx(O,{children:"Status"}),r.jsx(O,{children:"Actions"})]})}),r.jsx($,{children:0===K.length?r.jsx(S,{children:r.jsx(A,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No purchase orders found. Create your first order to get started."})}):K.map(e=>r.jsxs(S,{children:[r.jsx(A,{className:"font-mono font-medium",children:e.poNumber}),r.jsx(A,{children:e.vendorName}),r.jsx(A,{children:new Date(e.date).toLocaleDateString()}),r.jsx(A,{children:new Date(e.expectedDelivery).toLocaleDateString()}),r.jsxs(A,{children:[e.items.length," items"]}),r.jsxs(A,{className:"font-semibold",children:["$",e.total.toLocaleString()]}),r.jsx(A,{children:r.jsx(v,{className:ee(e.status),variant:"secondary",children:e.status.replace("-"," ")})}),r.jsx(A,{children:r.jsx(o,{variant:"ghost",size:"sm",onClick:()=>{E(e),z(!0)},children:"View Details"})})]},e.id))})]})})]}),r.jsx(N,{open:V,onOpenChange:z,children:r.jsxs(g,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(f,{children:[r.jsx(y,{children:"Purchase Order Details"}),r.jsxs(b,{children:["Complete information for PO #",T?.poNumber]})]}),T&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Order Information"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"PO Number:"}),r.jsx("p",{className:"font-medium font-mono",children:T.poNumber})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Vendor:"}),r.jsx("p",{className:"font-medium",children:T.vendorName})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Status:"}),r.jsx("div",{className:"mt-1",children:r.jsx(v,{className:ee(T.status),variant:"secondary",children:T.status.replace("-"," ")})})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Dates"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Order Date:"}),r.jsx("p",{className:"font-medium",children:new Date(T.date).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Expected Delivery:"}),r.jsx("p",{className:"font-medium",children:new Date(T.expectedDelivery).toLocaleDateString()})]}),T.deliveryDate&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Actual Delivery:"}),r.jsx("p",{className:"font-medium",children:new Date(T.deliveryDate).toLocaleDateString()})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Order Items"}),r.jsx("div",{className:"border rounded-lg overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-2 font-medium",children:"Item"}),r.jsx("th",{className:"text-left p-2 font-medium",children:"Part #"}),r.jsx("th",{className:"text-right p-2 font-medium",children:"Qty"}),r.jsx("th",{className:"text-right p-2 font-medium",children:"Price"}),r.jsx("th",{className:"text-right p-2 font-medium",children:"Total"})]})}),r.jsxs("tbody",{children:[T.items.map((e,s)=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"p-2",children:e.description}),r.jsx("td",{className:"p-2 text-muted-foreground",children:e.partNumber||"-"}),r.jsx("td",{className:"p-2 text-right",children:e.quantity}),r.jsxs("td",{className:"p-2 text-right",children:["$",e.unitPrice.toFixed(2)]}),r.jsxs("td",{className:"p-2 text-right font-medium",children:["$",(e.quantity*e.unitPrice).toFixed(2)]})]},s)),r.jsxs("tr",{className:"border-t font-medium",children:[r.jsx("td",{className:"p-2",colSpan:4,children:"Total"}),r.jsxs("td",{className:"p-2 text-right",children:["$",T.total.toFixed(2)]})]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Request Information"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Requested By:"}),r.jsx("p",{className:"font-medium",children:T.requestedBy||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Department:"}),r.jsx("p",{className:"font-medium",children:T.department||"N/A"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Shipping Information"}),r.jsx("div",{className:"space-y-2 text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Shipping Address:"}),r.jsx("p",{className:"font-medium",children:T.shippingAddress||"N/A"})]})})]})]}),T.notes&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Notes"}),r.jsx("p",{className:"text-sm whitespace-pre-line text-muted-foreground",children:T.notes})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:["pending-approval"===T.status&&r.jsxs(r.Fragment,{children:[r.jsx(o,{variant:"outline",onClick:()=>G(!0),children:"Reject"}),r.jsx(o,{onClick:()=>{if(!T)return;const s=(e||[]).map(e=>e.id===T.id?{...e,status:"approved",approvedBy:"Current User"}:e);q(s),z(!1),c.success(`Purchase Order ${T.poNumber} approved`)},children:"Approve Order"})]}),"approved"===T.status&&r.jsx(o,{onClick:()=>{if(!T)return;const s=(e||[]).map(e=>e.id===T.id?{...e,status:"ordered"}:e);q(s),z(!1),c.success(`Purchase Order ${T.poNumber} has been placed with vendor`)},children:"Place Order with Vendor"})]})]})]})}),r.jsx(N,{open:Q,onOpenChange:G,children:r.jsxs(g,{children:[r.jsxs(f,{children:[r.jsx(y,{children:"Reject Purchase Order"}),r.jsxs(b,{children:["Provide a reason for rejecting PO #",T?.poNumber]})]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"rejectionReason",children:"Rejection Reason"}),r.jsx(I,{id:"rejectionReason",placeholder:"Explain why this purchase order is being rejected...",value:M,onChange:e=>U(e.target.value)})]})}),r.jsxs(w,{children:[r.jsx(o,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),r.jsx(o,{variant:"destructive",onClick:()=>{if(!T||!M.trim())return void c.error("Please provide a rejection reason");const s=(e||[]).map(e=>e.id===T.id?{...e,status:"cancelled",notes:`${e.notes}\n\nRejection Reason: ${M}`}:e);q(s),G(!1),z(!1),U(""),c.success(`Purchase Order ${T.poNumber} rejected`)},children:"Confirm Rejection"})]})]})}),r.jsx(N,{open:B,onOpenChange:_,children:r.jsxs(g,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(f,{children:[r.jsx(y,{children:"Create New Purchase Order"}),r.jsx(b,{children:"Enter details for a new purchase order request"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"vendorName",children:"Vendor Name"}),r.jsx(p,{id:"vendorName",placeholder:"Enter vendor name",value:H.vendorName,onChange:e=>J({...H,vendorName:e.target.value})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"expectedDelivery",children:"Expected Delivery"}),r.jsx(p,{id:"expectedDelivery",type:"date",value:H.expectedDelivery,onChange:e=>J({...H,expectedDelivery:e.target.value})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Shipping Address"}),r.jsx(I,{placeholder:"Enter shipping address for this order",value:H.shippingAddress,onChange:e=>J({...H,shippingAddress:e.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Items"}),r.jsxs("div",{className:"space-y-4",children:[H.items.map((e,s)=>r.jsx("div",{className:"border rounded-md p-3 space-y-3",children:r.jsxs("div",{className:"grid grid-cols-[2fr_1fr_1fr_1fr_0.5fr] gap-3 items-center",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:`description-${s}`,children:"Description"}),r.jsx(p,{id:`description-${s}`,placeholder:"Item description",value:e.description,onChange:e=>Z(s,"description",e.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:`partNumber-${s}`,children:"Part #"}),r.jsx(p,{id:`partNumber-${s}`,placeholder:"Part number",value:e.partNumber,onChange:e=>Z(s,"partNumber",e.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:`quantity-${s}`,children:"Qty"}),r.jsx(p,{id:`quantity-${s}`,type:"number",min:"1",value:e.quantity,onChange:e=>Z(s,"quantity",parseInt(e.target.value)||1)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:`unitPrice-${s}`,children:"Price"}),r.jsx(p,{id:`unitPrice-${s}`,type:"number",step:"0.01",min:"0",value:e.unitPrice,onChange:e=>Z(s,"unitPrice",parseFloat(e.target.value)||0)})]}),r.jsx(o,{variant:"ghost",size:"icon",onClick:()=>(e=>{H.items.length>1&&J({...H,items:H.items.filter((s,r)=>r!==e)})})(s),disabled:1===H.items.length,children:r.jsx(l,{className:"w-4 h-4 text-destructive"})})]})},s)),r.jsxs(o,{variant:"outline",size:"sm",onClick:()=>{J({...H,items:[...H.items,{description:"",partNumber:"",quantity:1,unitPrice:0}]})},children:[r.jsx(t,{className:"w-3 h-3 mr-1"}),"Add Item"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Additional Notes"}),r.jsx(I,{id:"notes",placeholder:"Any additional information for this purchase order...",value:H.notes,onChange:e=>J({...H,notes:e.target.value})})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(o,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),r.jsx(o,{onClick:()=>{if(!H.vendorName.trim()||0===H.items.length)return void c.error("Please fill in vendor name and at least one item");const s=H.items.reduce((e,s)=>e+s.quantity*s.unitPrice,0),r=`PO-${Date.now().toString().slice(-6)}`,t={id:`po-${Date.now()}`,poNumber:r,vendorId:`vendor-${Date.now()}`,vendorName:H.vendorName,date:(new Date).toISOString(),expectedDelivery:H.expectedDelivery,deliveryDate:"",items:H.items.filter(e=>e.description&&e.quantity>0),subtotal:.9*s,tax:.1*s,shipping:0,total:s,status:"pending-approval",notes:H.notes};q([...e||[],t]),_(!1),J({vendorName:"",expectedDelivery:new Date(Date.now()+6048e5).toISOString().split("T")[0],items:[{description:"",partNumber:"",quantity:1,unitPrice:0}],notes:"",shippingAddress:""}),c.success(`Purchase Order ${r} created successfully`)},children:"Create Purchase Order"})]})]})]})})]})}import{r as s,j as r,br as t,cC as a,b5 as i,D as d,b8 as n,cj as l}from"./react-core-hQu9tqS1.js";import{t as c}from"./index-savvei9t.js";import{h as o,C as m,d as x,e as h,f as j,I as p,i as u,B as v,D as N,j as g,k as f,l as y,m as b,n as w}from"./index-BDwglPMF.js";import{L as D}from"./label-C9sYRYKW.js";import{T as C,a as P,b as S,c as O,d as $,e as A}from"./table-_lE51wjz.js";import{T as I}from"./textarea-BOBjqKNu.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as PurchaseOrders};
