function e(){const[e,t]=s.useState(null),[i,l]=s.useState("messages"),[r,c]=s.useState(""),[n,d]=s.useState("all"),p=s.useMemo(()=>z.filter(e=>(!r||e.from.toLowerCase().includes(r.toLowerCase())||e.subject.toLowerCase().includes(r.toLowerCase()))&&("all"===n||e.priority===n)).map(e=>({id:e.id,number:e.from,status:"unread"===e.status?"active":"idle",make:e.subject,model:e.type,licensePlate:e.timestamp,location:e.fromLocation,fuelLevel:"high"===e.priority?100:"low"===e.priority?30:60})),[r,n]),v=s.useMemo(()=>D.map(e=>({id:e.id,name:e.name,location:e.center,type:"zone",radius:e.radius,description:"",category:"zone",status:e.active?"active":"inactive"})),[]),f=s.useCallback(e=>{const s=z.find(s=>s.id===e);s&&t({type:"message",data:s})},[]);return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h2",{className:"text-xl font-semibold",children:"Communication Hub"})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsxs(o,{defaultValue:"messages",value:i,onValueChange:l,className:"w-full h-full",children:[a.jsxs(h,{className:"grid grid-cols-3 m-4",children:[a.jsx(x,{value:"messages",children:"Messages"}),a.jsx(x,{value:"chats",children:"Chats"}),a.jsx(x,{value:"broadcast",children:"Broadcast"})]}),a.jsx(u,{value:"messages",className:"h-[calc(100%-60px)]",children:a.jsxs("div",{className:"flex h-full",children:[a.jsxs("div",{className:"w-1/3 border-r",children:[a.jsxs("div",{className:"p-4 border-b",children:[a.jsx(j,{placeholder:"Search messages...",value:r,onChange:e=>c(e.target.value)}),a.jsxs(y,{value:n,onValueChange:d,children:[a.jsx(w,{className:"w-[120px] mt-2",children:a.jsx(b,{placeholder:"Filter"})}),a.jsxs(C,{children:[a.jsx(S,{value:"all",children:"All Priorities"}),a.jsx(S,{value:"high",children:"High"}),a.jsx(S,{value:"normal",children:"Normal"}),a.jsx(S,{value:"low",children:"Low"})]})]})]}),a.jsx(k,{messages:z,onMessageSelect:e=>f(e.id)})]}),a.jsx("div",{className:"w-2/3",children:a.jsx(V,{message:"message"===e?.type?e.data:null})})]})}),a.jsx(u,{value:"chats",className:"h-[calc(100%-60px)]",children:a.jsxs("div",{className:"flex h-full",children:[a.jsx("div",{className:"w-1/3 border-r",children:a.jsx(A,{threads:L,onThreadSelect:e=>t({type:"chat",data:e})})}),a.jsx("div",{className:"w-2/3",children:a.jsx("div",{className:"p-4 text-muted-foreground",children:"Chat thread details would be shown here"})})]})}),a.jsx(u,{value:"broadcast",className:"h-[calc(100%-60px)]",children:a.jsx(P,{zones:D})})]})})]}),a.jsx("div",{className:"w-1/3 border-l",children:a.jsx(m,{vehicles:p,facilities:v})})]})}import{r as s,j as a,a6 as t,aD as i,dd as l,a4 as r,de as c,$ as n,P as d}from"./react-core-hQu9tqS1.js";import{P as m}from"./ProfessionalFleetMap-DPQoniTv.js";import{T as o,a as h,b as x,c as u,I as j,S as p,h as v,C as f,q as N,B as g}from"./index-BDwglPMF.js";import{S as y,a as w,b,c as C,d as S}from"./select-Bmd3s7f4.js";import{T as M}from"./textarea-BOBjqKNu.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./MaintenanceRequestDialog-Rxhi54iS.js";import"./index-savvei9t.js";import"./label-C9sYRYKW.js";import"./ui-radix-C-X5Qx_8.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./GoogleMap-BAYip6gy.js";import"./switch-9MiV1CpI.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";const z=[{id:"msg-1",from:"Driver 001",fromLocation:{lat:38.9072,lng:-77.0369},subject:"Route delay",content:"Traffic on I-66, ETA +15 mins",timestamp:"2 min ago",priority:"normal",status:"read",type:"direct"},{id:"msg-2",from:"Dispatcher",fromLocation:{lat:38.9369,lng:-77.0899},subject:"Weather Alert",content:"Heavy rain expected in zone 3",timestamp:"5 min ago",priority:"high",status:"unread",type:"broadcast"},{id:"msg-3",from:"Driver 007",fromLocation:{lat:38.8816,lng:-77.091},subject:"Delivery confirmed",content:"Package delivered successfully at Gate B",timestamp:"12 min ago",priority:"normal",status:"read",type:"direct"},{id:"msg-4",from:"Maintenance",fromLocation:{lat:38.9216,lng:-77.0147},subject:"Service reminder",content:"Vehicle #45 due for inspection",timestamp:"1 hour ago",priority:"low",status:"read",type:"notification"}],L=[{id:"thread-1",participant:"Fleet Supervisor",lastMessage:"Copy that, will route around",unread:0,active:!0},{id:"thread-2",participant:"Driver 005",lastMessage:"On my way to pickup",unread:2,active:!0},{id:"thread-3",participant:"Maintenance Team",lastMessage:"Scheduled for tomorrow",unread:0,active:!1},{id:"thread-4",participant:"Dispatch Center",lastMessage:"New route assigned",unread:1,active:!0}],D=[{id:"zone-1",name:"Downtown",radius:5,center:{lat:38.9072,lng:-77.0369},vehicles:12,active:!0},{id:"zone-2",name:"North District",radius:8,center:{lat:38.9369,lng:-77.0899},vehicles:8,active:!0},{id:"zone-3",name:"South District",radius:6,center:{lat:38.8816,lng:-77.091},vehicles:15,active:!1}],T=[{id:"alert-1",type:"weather",message:"Heavy rain in Zone 3",severity:"warning",activeUntil:"6:00 PM"},{id:"alert-2",type:"traffic",message:"Accident on I-495",severity:"critical",activeUntil:"4:30 PM"},{id:"alert-3",type:"maintenance",message:"Fleet inspection tomorrow",severity:"info",activeUntil:"Tomorrow"}],k=({messages:e,onMessageSelect:s})=>{const i=e=>{switch(e){case"high":return"text-red-600";case"low":return"text-blue-600";default:return"text-gray-600"}},l=e=>{switch(e){case"broadcast":return a.jsx(d,{className:"h-4 w-4 text-purple-500"});case"notification":return a.jsx(n,{className:"h-4 w-4 text-yellow-500"});default:return a.jsx(c,{className:"h-4 w-4 text-blue-500"})}};return a.jsx(p,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold",children:"Messages"}),a.jsxs(v,{size:"sm",children:[a.jsx(t,{className:"h-4 w-4 mr-2"}),"New Message"]})]}),e.map(e=>a.jsx(f,{className:N("p-3 cursor-pointer hover:bg-accent transition-colors","unread"===e.status&&"border-primary bg-primary/5"),onClick:()=>s(e),children:a.jsxs("div",{className:"flex items-start gap-2",children:[l(e.type),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-sm",children:e.from}),a.jsx("span",{className:"text-xs text-muted-foreground",children:e.timestamp})]}),a.jsx("p",{className:"text-sm font-medium mt-1",children:e.subject}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.content}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(g,{variant:"outline",className:i(e.priority),children:e.priority}),"unread"===e.status&&a.jsx(g,{variant:"default",children:"New"})]})]})]})},e.id))]})})},A=({threads:e,onThreadSelect:s})=>a.jsx(p,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Active Chats"}),e.map(e=>a.jsx(f,{className:N("p-3 cursor-pointer hover:bg-accent transition-colors",e.unread>0&&"border-primary"),onClick:()=>s(e),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",e.active?{className:"h-2 w-2 bg-green-500 rounded-full"}:{className:"h-2 w-2 bg-gray-300 rounded-full"}),a.jsx("span",{className:"font-medium",children:e.participant})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-1",children:e.lastMessage})]}),e.unread>0&&a.jsx(g,{variant:"destructive",className:"ml-2",children:e.unread})]})},e.id))]})}),P=({zones:e})=>{const[t,i]=s.useState(""),[c,n]=s.useState("");return a.jsx(p,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Broadcast Control"}),a.jsx(f,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Select Zone"}),a.jsxs(y,{value:t,onValueChange:i,children:[a.jsx(w,{className:"w-full mt-1",children:a.jsx(b,{placeholder:"Choose broadcast zone"})}),a.jsxs(C,{children:[e.map(e=>a.jsxs(S,{value:e.id,children:[e.name," (",e.vehicles," vehicles)"]},e.id)),a.jsx(S,{value:"all",children:"All Vehicles"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Message"}),a.jsx(M,{placeholder:"Enter broadcast message...",className:"mt-1",rows:4,value:c,onChange:e=>n(e.target.value)})]}),a.jsxs(v,{className:"w-full",onClick:()=>{n("")},disabled:!t||!c,children:[a.jsx(l,{className:"h-4 w-4 mr-2"}),"Send Broadcast"]})]})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:"Broadcast Zones"}),a.jsx("div",{className:"space-y-2",children:e.map(e=>a.jsx(f,{className:"p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:e.name}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.vehicles," vehicles â€¢ ",e.radius," mile radius"]})]}),a.jsx(g,{variant:e.active?"default":"secondary",children:e.active?"Active":"Inactive"})]})},e.id))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium mb-2",children:"Active Alerts"}),a.jsx("div",{className:"space-y-2",children:T.map(e=>a.jsx(f,{className:N("p-3","critical"===e.severity&&"border-red-500 bg-red-50 dark:bg-red-950/20","warning"===e.severity&&"border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20"),children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(r,{className:N("h-4 w-4 mt-0.5","critical"===e.severity&&"text-red-600","warning"===e.severity&&"text-yellow-600","info"===e.severity&&"text-blue-600")}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm",children:e.message}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Active until ",e.activeUntil]})]})]})},e.id))})]})]})})},V=({message:e})=>{const[l,r]=s.useState("");return e?a.jsx(p,{className:"h-full",children:a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:e.subject}),a.jsx(g,{variant:"outline",className:"high"===e.priority?"text-red-600":"low"===e.priority?"text-blue-600":"text-gray-600",children:e.priority})]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",e.from]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.timestamp})]}),a.jsx(f,{className:"p-4",children:a.jsx("p",{className:"text-sm",children:e.content})}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(f,{className:"p-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Type"}),a.jsx("div",{className:"font-medium capitalize",children:e.type})]}),a.jsxs(f,{className:"p-3",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"}),a.jsx("div",{className:"font-medium capitalize",children:e.status})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Reply"}),a.jsx(M,{placeholder:"Type your reply...",rows:4,value:l,onChange:e=>r(e.target.value)}),a.jsxs(v,{className:"w-full",children:[a.jsx(t,{className:"h-4 w-4 mr-2"}),"Send Reply"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(v,{variant:"outline",className:"w-full",children:[a.jsx(i,{className:"h-4 w-4 mr-2"}),"View on Map"]}),a.jsx(v,{variant:"outline",className:"w-full",children:"Mark as Unread"})]})]})}):a.jsx("div",{className:"p-4 text-muted-foreground",children:"Select a message to view thread"})};export{e as CommunicationHub};
