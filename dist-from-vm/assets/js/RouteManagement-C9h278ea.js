function e(){const e=m(),I=m(),A=I?.vehicles||[],O=I?.facilities||[],[$,P]=s.useState([]),[q,F]=s.useState("active"),[G,U]=s.useState(!1),[B,H]=s.useState(""),[J,K]=s.useState(""),[Q,W]=s.useState(""),[X,Y]=s.useState(""),[Z,_]=s.useState(""),[ee,se]=s.useState(""),te=e?.vehicles||[],ae=e?.drivers||[],ie=s.useMemo(()=>{const e=$||[],s=e.filter(e=>"active"===e.status),t=e.filter(e=>"completed"===e.status&&e.actualEnd&&new Date(e.actualEnd).toDateString()===(new Date).toDateString()),a=e.reduce((e,s)=>e+s.distance,0),i=e.length>0?e.reduce((e,s)=>e+s.efficiency,0)/e.length:0;return{active:s.length,completedToday:t.length,totalDistance:Math.round(a),avgEfficiency:Math.round(i)}},[$]),re=(e,s)=>{P(t=>(t||[]).map(t=>{if(t.id===e){const e={status:s};return"active"!==s||t.actualStart||(e.actualStart=(new Date).toISOString()),"completed"!==s||t.actualEnd||(e.actualEnd=(new Date).toISOString()),{...t,...e}}return t})),d.success(`Route ${s}`)},le=s.useMemo(()=>{const e=$||[];switch(q){case"active":return e.filter(e=>"active"===e.status);case"planned":return e.filter(e=>"planned"===e.status);case"completed":return e.filter(e=>"completed"===e.status);default:return e}},[$,q]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Route Management"}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Plan, optimize, and track delivery routes"})]}),t.jsxs(h,{open:G,onOpenChange:U,children:[t.jsx(x,{asChild:!0,children:t.jsxs(j,{children:[t.jsx(a,{className:"w-4 h-4 mr-2"}),"Create Route"]})}),t.jsxs(v,{className:"max-w-2xl",children:[t.jsx(p,{children:t.jsx(g,{children:"Create New Route"})}),t.jsxs("div",{className:"space-y-4 mt-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(E,{children:"Route Name"}),t.jsx(f,{placeholder:"e.g., Downtown Delivery Route",value:B,onChange:e=>H(e.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(E,{children:"Vehicle"}),t.jsxs(T,{value:J,onValueChange:K,children:[t.jsx(k,{children:t.jsx(L,{placeholder:"Select vehicle"})}),t.jsx(V,{children:te.map(e=>t.jsxs(z,{value:e.id,children:[e.number," - ",e.make," ",e.model]},e.id))})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(E,{children:"Driver"}),t.jsxs(T,{value:Q,onValueChange:W,children:[t.jsx(k,{children:t.jsx(L,{placeholder:"Select driver"})}),t.jsx(V,{children:ae.map(e=>t.jsx(z,{value:e.name,children:e.name},e.id))})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(E,{children:"Scheduled Start"}),t.jsx(f,{type:"datetime-local",value:ee,onChange:e=>se(e.target.value)})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(E,{children:"Start Location"}),t.jsx(f,{placeholder:"Starting address",value:X,onChange:e=>Y(e.target.value)})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(E,{children:"End Location"}),t.jsx(f,{placeholder:"Destination address",value:Z,onChange:e=>_(e.target.value)})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(j,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),t.jsx(j,{onClick:()=>{if(!(B&&J&&Q&&X&&Z&&ee))return void d.error("Please fill in all required fields");const e=te.find(e=>e.id===J);if(!e)return;const s=Math.floor(150*Math.random()+20),t=Math.floor(s/45*60),a={id:`route-${Date.now()}`,name:B,vehicleId:e.id,vehicleNumber:e.number,driver:Q,startLocation:X,endLocation:Z,waypoints:[],distance:s,estimatedTime:t,status:"planned",scheduledStart:ee,scheduledEnd:new Date(new Date(ee).getTime()+6e4*t).toISOString(),efficiency:95};P(e=>[...e||[],a]),d.success("Route created successfully"),U(!1),H(""),K(""),W(""),Y(""),_(""),se("")},children:"Create Route"})]})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(o,{title:"Active Routes",value:ie.active,subtitle:"in progress",icon:t.jsx(i,{className:"w-5 h-5"}),status:"info"}),t.jsx(o,{title:"Completed Today",value:ie.completedToday,subtitle:"routes finished",icon:t.jsx(r,{className:"w-5 h-5"}),status:"success"}),t.jsx(o,{title:"Total Distance",value:`${ie.totalDistance}mi`,subtitle:"all routes",icon:t.jsx(l,{className:"w-5 h-5"}),status:"info"}),t.jsx(o,{title:"Avg Efficiency",value:`${ie.avgEfficiency}%`,subtitle:"route completion",icon:t.jsx(c,{className:"w-5 h-5"}),status:"success"})]}),t.jsxs(N,{children:[t.jsxs(y,{children:[t.jsx(b,{children:"Route Visualization"}),t.jsx(w,{children:"View routes and vehicle locations on map"})]}),t.jsx(S,{children:t.jsx("div",{className:"h-[400px] rounded-lg overflow-hidden border",children:t.jsx(u,{vehicles:A,facilities:O,showVehicles:!0,showFacilities:!0,showRoutes:!0,mapStyle:"road",className:"w-full h-full"})})})]}),t.jsxs(N,{children:[t.jsx(y,{children:t.jsx(C,{value:q,onValueChange:F,children:t.jsxs(D,{className:"grid w-full grid-cols-4",children:[t.jsx(R,{value:"active",children:"Active"}),t.jsx(R,{value:"planned",children:"Planned"}),t.jsx(R,{value:"completed",children:"Completed"}),t.jsx(R,{value:"all",children:"All Routes"})]})})}),t.jsx(S,{children:0===(le||[]).length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(n,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),t.jsx("p",{className:"text-muted-foreground",children:"No routes found. Create your first route to get started."})]}):t.jsx("div",{className:"space-y-3",children:(le||[]).map(e=>{return t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"font-semibold",children:e.name}),t.jsx(M,{className:(s=e.status,{planned:"bg-muted text-muted-foreground",active:"bg-accent/10 text-accent border-accent/20",completed:"bg-success/10 text-success border-success/20",cancelled:"bg-destructive/10 text-destructive border-destructive/20"}[s]),children:e.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-muted-foreground",children:["Vehicle: ",e.vehicleNumber]}),t.jsxs("p",{className:"text-muted-foreground",children:["Driver: ",e.driver]})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-muted-foreground",children:["Distance: ",e.distance," mi"]}),t.jsxs("p",{className:"text-muted-foreground",children:["Est. Time: ",e.estimatedTime," min"]})]})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:[t.jsx(l,{className:"w-4 h-4 text-muted-foreground"}),t.jsxs("span",{className:"text-muted-foreground",children:[e.startLocation," â†’ ",e.endLocation]})]})]}),t.jsxs("div",{className:"flex gap-2",children:["planned"===e.status&&t.jsx(j,{size:"sm",onClick:()=>re(e.id,"active"),children:"Start Route"}),"active"===e.status&&t.jsx(j,{size:"sm",variant:"outline",onClick:()=>re(e.id,"completed"),children:"Complete"})]})]},e.id);var s})})})]})]})}import{r as s,j as t,br as a,c7 as i,ah as r,at as l,b5 as c,v as n}from"./react-core-hQu9tqS1.js";import{t as d}from"./index-savvei9t.js";import{M as o}from"./MetricCard-pRY2Qop8.js";import{U as u}from"./UniversalMap-ZyGzQ1ui.js";import{u as m,D as h,t as x,h as j,j as v,k as p,l as g,I as f,C as N,d as y,e as b,i as w,f as S,T as C,a as D,b as R,B as M}from"./index-BDwglPMF.js";import{L as E}from"./label-C9sYRYKW.js";import{S as T,a as k,b as L,c as V,d as z}from"./select-Bmd3s7f4.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./animation-vendor-Cf_i_fm0.js";import"./GoogleMap-BAYip6gy.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as RouteManagement};
