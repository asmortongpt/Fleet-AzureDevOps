function e(){const[e,N]=s.useState([]),[w,C]=s.useState("dashboard"),[S,A]=s.useState(""),[F,b]=s.useState("all"),[D,T]=s.useState("all"),[I,L]=s.useState(!1),[M,O]=s.useState(null),[B,P]=s.useState({formType:"incident",severity:"moderate",requiresMedicalAttention:!1,witnesses:[],photos:[],status:"draft"});(e||[]).filter(e=>(e.title.toLowerCase().includes(S.toLowerCase())||e.description.toLowerCase().includes(S.toLowerCase())||e.employeeName&&e.employeeName.toLowerCase().includes(S.toLowerCase()))&&("all"===F||e.formType===F)&&("all"===D||e.status===D));const q=()=>{O(null),P({formType:"incident",severity:"moderate",requiresMedicalAttention:!1,witnesses:[],photos:[],status:"draft"})};return(e||[]).filter(e=>"submitted"===e.status||"under-review"===e.status),(e||[]).filter(e=>"approved"===e.status),(e||[]).filter(e=>"critical"===e.severity||"fatal"===e.severity),t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold",children:"OSHA Safety Forms"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage workplace safety incidents, near-misses, and compliance documentation"})]}),t.jsxs(i,{open:I,onOpenChange:e=>{L(e),e||q()},children:[t.jsx(l,{asChild:!0,children:t.jsxs(o,{children:[t.jsx(a,{className:"w-4 h-4 mr-2"}),"New Form"]})}),t.jsxs(n,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[t.jsxs(d,{children:[t.jsx(c,{children:M?"Edit Form":"Create New OSHA Form"}),t.jsx(m,{children:"Document workplace incidents, injuries, and safety observations"})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"form-type",children:"Form Type *"}),t.jsxs(j,{value:B.formType,onValueChange:e=>P({...B,formType:e}),children:[t.jsx(y,{id:"form-type",children:t.jsx(v,{})}),t.jsxs(x,{children:[t.jsx(f,{value:"300",children:"OSHA 300 Log"}),t.jsx(f,{value:"300A",children:"OSHA 300A Summary"}),t.jsx(f,{value:"301",children:"OSHA 301 Injury Report"}),t.jsx(f,{value:"incident",children:"Incident Report"}),t.jsx(f,{value:"near-miss",children:"Near Miss Report"}),t.jsx(f,{value:"jsa",children:"Job Safety Analysis"}),t.jsx(f,{value:"inspection",children:"Safety Inspection"}),t.jsx(f,{value:"custom",children:"Custom Form"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"severity",children:"Severity *"}),t.jsxs(j,{value:B.severity,onValueChange:e=>P({...B,severity:e}),children:[t.jsx(y,{id:"severity",children:t.jsx(v,{})}),t.jsxs(x,{children:[t.jsx(f,{value:"minor",children:"Minor"}),t.jsx(f,{value:"moderate",children:"Moderate"}),t.jsx(f,{value:"serious",children:"Serious"}),t.jsx(f,{value:"critical",children:"Critical"}),t.jsx(f,{value:"fatal",children:"Fatal"})]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"title",children:"Title *"}),t.jsx(p,{id:"title",value:B.title||"",onChange:e=>P({...B,title:e.target.value}),placeholder:"Brief description of the incident"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"description",children:"Description"}),t.jsx(g,{id:"description",value:B.description||"",onChange:e=>P({...B,description:e.target.value}),placeholder:"Detailed description of what happened...",rows:3})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"incident-date",children:"Incident Date *"}),t.jsx(p,{id:"incident-date",type:"date",value:B.incidentDate||"",onChange:e=>P({...B,incidentDate:e.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"location",children:"Location *"}),t.jsx(p,{id:"location",value:B.location||"",onChange:e=>P({...B,location:e.target.value}),placeholder:"Warehouse A, Bay 3"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"department",children:"Department"}),t.jsx(p,{id:"department",value:B.department||"",onChange:e=>P({...B,department:e.target.value}),placeholder:"Operations"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"employee-name",children:"Employee Name"}),t.jsx(p,{id:"employee-name",value:B.employeeName||"",onChange:e=>P({...B,employeeName:e.target.value}),placeholder:"John Smith"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"employee-id",children:"Employee ID"}),t.jsx(p,{id:"employee-id",value:B.employeeId||"",onChange:e=>P({...B,employeeId:e.target.value}),placeholder:"EMP12345"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"injury-type",children:"Injury Type"}),t.jsx(p,{id:"injury-type",value:B.injuryType||"",onChange:e=>P({...B,injuryType:e.target.value}),placeholder:"Laceration, Strain, Burn..."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(u,{htmlFor:"body-part",children:"Body Part Affected"}),t.jsx(p,{id:"body-part",value:B.bodyPart||"",onChange:e=>P({...B,bodyPart:e.target.value}),placeholder:"Left hand"})]})]})]}),t.jsxs(h,{children:[t.jsx(o,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),t.jsx(o,{onClick:()=>{if(!B.title||!B.incidentDate||!B.location)return void r.error("Please fill in required fields");const e={id:M?.id||`osha-${Date.now()}`,tenantId:"tenant-demo",formType:B.formType,title:B.title,description:B.description||"",incidentDate:B.incidentDate,reportedDate:B.reportedDate||(new Date).toISOString().split("T")[0],location:B.location,department:B.department||"",employeeId:B.employeeId,employeeName:B.employeeName,injuryType:B.injuryType,bodyPart:B.bodyPart,severity:B.severity,daysAway:B.daysAway,daysRestricted:B.daysRestricted,requiresMedicalAttention:B.requiresMedicalAttention||!1,rootCause:B.rootCause,correctiveAction:B.correctiveAction,preventiveMeasures:B.preventiveMeasures,witnesses:B.witnesses||[],photos:B.photos||[],status:B.status,submittedBy:"Current User",submittedAt:M?.submittedAt||(new Date).toISOString(),reviewedBy:B.reviewedBy,reviewedAt:B.reviewedAt,approvedBy:B.approvedBy,approvedAt:B.approvedAt,notes:B.notes};M?(N(s=>(s||[]).map(s=>s.id===e.id?e:s)),r.success("Form updated successfully")):(N(s=>[...s||[],e]),r.success("Form created successfully")),L(!1),q()},children:M?"Update Form":"Create Form"})]})]})]})]})})}import{r as s,j as t,br as a}from"./react-core-hQu9tqS1.js";import{t as r}from"./index-savvei9t.js";import{D as i,t as l,h as o,j as n,k as d,l as c,m,I as p,n as h}from"./index-BDwglPMF.js";import{L as u}from"./label-C9sYRYKW.js";import{S as j,a as y,b as v,c as x,d as f}from"./select-Bmd3s7f4.js";import{T as g}from"./textarea-BOBjqKNu.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as OSHAForms};
