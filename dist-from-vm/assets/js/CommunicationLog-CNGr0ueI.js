function e(){const[e,M]=s.useState([]),[H,$]=s.useState(""),[G,K]=s.useState("all"),[J,Q]=s.useState(!1),[X,Y]=s.useState({type:"email",participants:[],subject:"",summary:"",followUpRequired:!1}),[Z,_]=s.useState(""),ee=(e||[]).filter(e=>(e.subject.toLowerCase().includes(H.toLowerCase())||e.summary.toLowerCase().includes(H.toLowerCase())||e.participants.some(e=>e.toLowerCase().includes(H.toLowerCase())))&&("all"===G||e.type===G)),se=()=>{Z.trim()&&(Y(e=>({...e,participants:[...e.participants||[],Z.trim()]})),_(""))},ae=()=>{Y({type:"email",participants:[],subject:"",summary:"",followUpRequired:!1}),_("")},le=e=>({email:a.jsx(x,{className:"w-4 h-4"}),teams:a.jsx(t,{className:"w-4 h-4"}),phone:a.jsx(m,{className:"w-4 h-4"}),sms:a.jsx(o,{className:"w-4 h-4"}),"in-person":a.jsx(c,{className:"w-4 h-4"})}[e]),te=(e||[]).filter(e=>e.followUpRequired).length,re=(e||[]).filter(e=>new Date(e.date).toDateString()===(new Date).toDateString()).length;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Communication Log"}),a.jsx("p",{className:"text-muted-foreground",children:"Track all fleet-related communications and follow-ups"})]}),a.jsxs(j,{open:J,onOpenChange:Q,children:[a.jsx(u,{asChild:!0,children:a.jsxs(p,{children:[a.jsx(l,{className:"w-4 h-4 mr-2"}),"Log Communication"]})}),a.jsxs(g,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs(v,{children:[a.jsx(f,{children:"Log New Communication"}),a.jsx(N,{children:"Record communication details for audit trail"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{htmlFor:"log-type",children:"Type *"}),a.jsxs(q,{value:X.type,onValueChange:e=>Y({...X,type:e}),children:[a.jsx(L,{id:"log-type",children:a.jsx(F,{})}),a.jsxs(V,{children:[a.jsx(T,{value:"email",children:"Email"}),a.jsx(T,{value:"teams",children:"Microsoft Teams"}),a.jsx(T,{value:"phone",children:"Phone Call"}),a.jsx(T,{value:"sms",children:"SMS/Text"}),a.jsx(T,{value:"in-person",children:"In-Person"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{htmlFor:"log-subject",children:"Subject *"}),a.jsx(w,{id:"log-subject",value:X.subject,onChange:e=>Y({...X,subject:e.target.value}),placeholder:"Communication topic"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{children:"Participants *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(w,{value:Z,onChange:e=>_(e.target.value),placeholder:"Add participant name or email",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),se())}),a.jsx(p,{type:"button",variant:"outline",onClick:se,children:"Add"})]}),(X.participants||[]).length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(X.participants||[]).map((e,s)=>a.jsxs(y,{variant:"secondary",className:"gap-1",children:[e,a.jsx("button",{onClick:()=>{return e=s,void Y(s=>({...s,participants:(s.participants||[]).filter((s,a)=>a!==e)}));var e},className:"ml-1 hover:text-destructive",children:"Ã—"})]},s))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{htmlFor:"log-summary",children:"Summary *"}),a.jsx(E,{id:"log-summary",value:X.summary,onChange:e=>Y({...X,summary:e.target.value}),placeholder:"Brief summary of the communication...",rows:4})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{htmlFor:"related-vehicle",children:"Related Vehicle"}),a.jsx(w,{id:"related-vehicle",value:X.relatedVehicleId,onChange:e=>Y({...X,relatedVehicleId:e.target.value}),placeholder:"Vehicle ID"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{htmlFor:"related-vendor",children:"Related Vendor"}),a.jsx(w,{id:"related-vendor",value:X.relatedVendorId,onChange:e=>Y({...X,relatedVendorId:e.target.value}),placeholder:"Vendor ID"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{htmlFor:"related-workorder",children:"Related Work Order"}),a.jsx(w,{id:"related-workorder",value:X.relatedWorkOrderId,onChange:e=>Y({...X,relatedWorkOrderId:e.target.value}),placeholder:"Work Order ID"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(R,{id:"follow-up",checked:X.followUpRequired,onCheckedChange:e=>Y({...X,followUpRequired:e})}),a.jsx(U,{htmlFor:"follow-up",className:"cursor-pointer",children:"Follow-up required"})]}),X.followUpRequired&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(U,{htmlFor:"follow-up-date",children:"Follow-up Date"}),a.jsx(w,{id:"follow-up-date",type:"date",value:X.followUpDate?.split("T")[0]||"",onChange:e=>Y({...X,followUpDate:e.target.value?new Date(e.target.value).toISOString():void 0})})]})]})]}),a.jsxs(b,{children:[a.jsx(p,{variant:"outline",onClick:()=>{Q(!1),ae()},children:"Cancel"}),a.jsx(p,{onClick:()=>{if(!X.subject||!X.summary||0===(X.participants||[]).length)return void h.error("Please fill in required fields");const e={id:`log-${Date.now()}`,tenantId:"tenant-demo",type:X.type,date:(new Date).toISOString(),participants:X.participants||[],subject:X.subject,summary:X.summary,relatedVehicleId:X.relatedVehicleId,relatedVendorId:X.relatedVendorId,relatedWorkOrderId:X.relatedWorkOrderId,followUpRequired:X.followUpRequired||!1,followUpDate:X.followUpDate,createdBy:"Current User"};M(s=>[...s||[],e]),h.success("Communication logged successfully"),Q(!1),ae()},children:"Save Log"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs(C,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(D,{className:"text-sm font-medium text-muted-foreground",children:"Total Communications"})}),a.jsxs(I,{children:[a.jsx("div",{className:"text-2xl font-bold",children:(e||[]).length}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(t,{className:"w-3 h-3"}),"All time"]})]})]}),a.jsxs(C,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(D,{className:"text-sm font-medium text-muted-foreground",children:"Today's Activity"})}),a.jsxs(I,{children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:re}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(r,{className:"w-3 h-3"}),"Logged today"]})]})]}),a.jsxs(C,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(D,{className:"text-sm font-medium text-muted-foreground",children:"Pending Follow-ups"})}),a.jsxs(I,{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:te}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(i,{className:"w-3 h-3"}),"Require action"]})]})]}),a.jsxs(C,{children:[a.jsx(S,{className:"pb-3",children:a.jsx(D,{className:"text-sm font-medium text-muted-foreground",children:"Completion Rate"})}),a.jsxs(I,{children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:"96%"}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[a.jsx(n,{className:"w-3 h-3"}),"Follow-ups completed"]})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(w,{placeholder:"Search communications...",value:H,onChange:e=>$(e.target.value),className:"pl-10"})]}),a.jsxs(q,{value:G,onValueChange:K,children:[a.jsx(L,{className:"w-48",children:a.jsx(F,{})}),a.jsxs(V,{children:[a.jsx(T,{value:"all",children:"All Types"}),a.jsx(T,{value:"email",children:"Email"}),a.jsx(T,{value:"teams",children:"Teams"}),a.jsx(T,{value:"phone",children:"Phone"}),a.jsx(T,{value:"sms",children:"SMS"}),a.jsx(T,{value:"in-person",children:"In-Person"})]})]})]}),a.jsxs(C,{children:[a.jsxs(S,{children:[a.jsxs(D,{children:["Communication History (",ee.length,")"]}),a.jsx(k,{children:"Complete audit trail of all fleet communications"})]}),a.jsx(I,{children:a.jsxs(O,{children:[a.jsx(P,{children:a.jsxs(A,{children:[a.jsx(W,{children:"Date"}),a.jsx(W,{children:"Type"}),a.jsx(W,{children:"Subject"}),a.jsx(W,{children:"Participants"}),a.jsx(W,{children:"Summary"}),a.jsx(W,{children:"Follow-up"}),a.jsx(W,{children:"Actions"})]})}),a.jsx(z,{children:0===ee.length?a.jsx(A,{children:a.jsx(B,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No communications logged. Start tracking conversations with vendors and team members."})}):ee.map(e=>{return a.jsxs(A,{children:[a.jsxs(B,{className:"text-sm",children:[new Date(e.date).toLocaleDateString(),a.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.date).toLocaleTimeString()})]}),a.jsx(B,{children:a.jsx(y,{className:(s=e.type,{email:"bg-blue-100 text-blue-700",teams:"bg-purple-100 text-purple-700",phone:"bg-green-100 text-green-700",sms:"bg-cyan-100 text-cyan-700","in-person":"bg-orange-100 text-orange-700"}[s]),variant:"secondary",children:a.jsxs("span",{className:"flex items-center gap-1",children:[le(e.type),e.type]})})}),a.jsx(B,{className:"font-medium",children:e.subject}),a.jsx(B,{children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.participants.slice(0,2).map((e,s)=>a.jsx(y,{variant:"outline",className:"text-xs",children:e},s)),e.participants.length>2&&a.jsxs(y,{variant:"outline",className:"text-xs",children:["+",e.participants.length-2]})]})}),a.jsx(B,{className:"max-w-xs truncate text-sm text-muted-foreground",children:e.summary}),a.jsx(B,{children:e.followUpRequired?a.jsxs(y,{variant:"secondary",className:"bg-orange-100 text-orange-700",children:[a.jsx(i,{className:"w-3 h-3 mr-1"}),e.followUpDate?new Date(e.followUpDate).toLocaleDateString():"Required"]}):a.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),a.jsx(B,{children:e.followUpRequired&&a.jsx(p,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,M(e=>(e||[]).map(e=>e.id===s?{...e,followUpRequired:!1}:e)),void h.success("Follow-up marked as complete");var s},children:a.jsx(n,{className:"w-4 h-4 text-green-600"})})})]},e.id);var s})})]})})]})]})}import{r as s,j as a,br as l,H as t,bq as r,as as i,ah as n,b8 as d,z as c,cI as o,bL as m,am as x}from"./react-core-hQu9tqS1.js";import{t as h}from"./index-savvei9t.js";import{D as j,t as u,h as p,j as g,k as v,l as f,m as N,I as w,B as y,n as b,C,d as S,e as D,f as I,i as k}from"./index-BDwglPMF.js";import{C as R}from"./checkbox-J0MWk58s.js";import{L as U}from"./label-C9sYRYKW.js";import{S as q,a as L,b as F,c as V,d as T}from"./select-Bmd3s7f4.js";import{T as O,a as P,b as A,c as W,d as z,e as B}from"./table-_lE51wjz.js";import{T as E}from"./textarea-BOBjqKNu.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./ui-radix-C-X5Qx_8.js";import"./ui-dialogs-C2yTnBPV.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{e as CommunicationLog};
