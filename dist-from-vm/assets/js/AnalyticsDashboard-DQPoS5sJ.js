function e({analyticsType:e,onVehicleSelect:s}){const{data:h=[],isLoading:j}=N(),[u,v]=a.useState(null),[F,V]=a.useState("7d"),[z,G]=a.useState("all"),D=a.useMemo(()=>"all"===z?h:h.filter(e=>e.status===z),[h,z]),I=h.find(e=>e.id===u)||h[0],R=a.useMemo(()=>({avgMPG:24.5,idleTime:12.3,speedViolations:3,fuelCost:3.45}),[D,F]),$=()=>{switch(e){case"heatmap":return"Vehicle density and activity zones";case"routes":return"Optimized route visualization and efficiency";case"performance":return"Real-time performance metrics overlay";case"fuel":return"Fuel efficiency zones and consumption patterns";default:return"Analytics overlay"}},E=t.jsxs("div",{className:"relative w-full h-full","data-testid":"analytics-map-container",children:[t.jsx(f,{onVehicleSelect:e=>{v(e),s?.(e)}}),t.jsx("div",{className:"absolute top-4 left-4 z-10",children:t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(l,{className:"h-4 w-4 text-blue-600"}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-semibold capitalize",children:[e," View"]}),t.jsx("div",{className:"text-xs text-muted-foreground",children:$()})]})]})})})}),"performance"===e&&t.jsxs("div",{className:"absolute bottom-4 left-4 z-10 space-y-2",children:[t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(i,{className:"h-5 w-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg MPG"}),t.jsx("div",{className:"text-lg font-bold",children:R.avgMPG})]})]})})}),t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(c,{className:"h-5 w-5 text-amber-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-muted-foreground",children:"Idle Time"}),t.jsxs("div",{className:"text-lg font-bold",children:[R.idleTime,"%"]})]})]})})})]}),"fuel"===e&&t.jsx("div",{className:"absolute bottom-4 left-4 z-10",children:t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(r,{className:"h-5 w-5 text-orange-600"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Fuel Cost"}),t.jsxs("div",{className:"text-lg font-bold",children:["$",R.fuelCost,"/gal"]})]})]})})})})]}),O=t.jsxs("div",{className:"space-y-4","data-testid":"analytics-filter-sidebar",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Analytics Filters"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:$()})]}),t.jsx(k,{}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Time Range"}),t.jsxs(C,{value:F,onValueChange:V,children:[t.jsx(M,{"data-testid":"analytics-time-range",children:t.jsx(L,{})}),t.jsxs(T,{children:[t.jsx(A,{value:"24h",children:"Last 24 hours"}),t.jsx(A,{value:"7d",children:"Last 7 days"}),t.jsx(A,{value:"30d",children:"Last 30 days"}),t.jsx(A,{value:"90d",children:"Last 90 days"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Vehicle Status"}),t.jsxs(C,{value:z,onValueChange:G,children:[t.jsx(M,{"data-testid":"analytics-status-filter",children:t.jsx(L,{})}),t.jsxs(T,{children:[t.jsx(A,{value:"all",children:"All Vehicles"}),t.jsx(A,{value:"active",children:"Active Only"}),t.jsx(A,{value:"inactive",children:"Inactive Only"}),t.jsx(A,{value:"maintenance",children:"In Maintenance"})]})]})]}),t.jsx(k,{}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Key Metrics"}),t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(i,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:"Avg MPG"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"font-bold",children:R.avgMPG}),t.jsx(y,{variant:"default",className:"text-xs",children:t.jsx(n,{className:"h-3 w-3"})})]})]})})}),t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(r,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:"Fuel Cost"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("span",{className:"font-bold",children:["$",R.fuelCost]}),t.jsx(y,{variant:"destructive",className:"text-xs",children:t.jsx(d,{className:"h-3 w-3"})})]})]})})}),t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(c,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:"Idle Time"})]}),t.jsxs("span",{className:"font-bold",children:[R.idleTime,"%"]})]})})}),t.jsx(g,{children:t.jsx(b,{className:"p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(l,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm",children:"Speed Violations"})]}),t.jsx(y,{variant:"secondary",children:R.speedViolations})]})})})]}),t.jsx(k,{}),I&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Selected Vehicle"}),t.jsxs(g,{children:[t.jsx(w,{className:"pb-3",children:t.jsxs(S,{className:"text-base flex items-center justify-between",children:[t.jsx("span",{children:I.vehicleNumber}),t.jsx(y,{variant:"active"===I.status?"default":"secondary",children:I.status})]})}),t.jsxs(b,{className:"space-y-2",children:[t.jsx("div",{className:"text-sm",children:t.jsxs("span",{className:"font-medium",children:[I.make," ",I.model]})}),I.latitude&&I.longitude&&t.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[t.jsx(x,{className:"h-3 w-3 mr-1"}),t.jsxs("span",{children:[I.latitude.toFixed(4),", ",I.longitude.toFixed(4)]})]})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(P,{variant:"outline",className:"w-full justify-start",size:"sm",children:[t.jsx(m,{className:"h-4 w-4 mr-2"}),"Advanced Filters"]}),t.jsxs(P,{variant:"outline",className:"w-full justify-start",size:"sm",children:[t.jsx(o,{className:"h-4 w-4 mr-2"}),"Export Data"]})]}),t.jsx("div",{className:"pt-2 border-t",children:t.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Showing ",D.length," of ",h.length," vehicles"]})})]});return j?t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading analytics..."})]})}):t.jsx(p,{mapComponent:E,sidePanel:O})}function s(){const{data:s=[],isLoading:m}=N(),[p,f]=a.useState("heatmap"),[w,S]=a.useState(null),[k,G]=a.useState("pdf"),D=s.reduce((e,s)=>e+(s.odometer||0),0),I=D/24.5*3.45,R=[{title:"Total Miles",value:D.toLocaleString(),trend:"+8.2%",isPositive:!0,icon:t.jsx(l,{className:"h-5 w-5"})},{title:"Avg MPG",value:24.5.toFixed(1),trend:"+5.3%",isPositive:!0,icon:t.jsx(i,{className:"h-5 w-5"})},{title:"Fuel Cost",value:`$${I.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,trend:"-2.1%",isPositive:!0,icon:t.jsx(h,{className:"h-5 w-5"})},{title:"Idle Time",value:"12.3%",trend:"-3.5%",isPositive:!0,icon:t.jsx(c,{className:"h-5 w-5"})}];return m?t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsxs("div",{className:"text-center space-y-2",children:[t.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading analytics dashboard..."})]})}):t.jsxs("div",{className:"h-screen flex flex-col","data-testid":"analytics-dashboard",children:[t.jsx("div",{className:"border-b bg-background",children:t.jsxs("div",{className:"px-6 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time fleet analytics with map visualization"})]}),t.jsx(P,{variant:"outline",size:"icon",children:t.jsx(j,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4","data-testid":"analytics-kpi-cards",children:R.map((e,s)=>t.jsx(g,{"data-testid":`analytics-kpi-${s}`,children:t.jsxs(b,{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:e.title}),t.jsx("div",{className:"text-muted-foreground",children:e.icon})]}),t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsx("span",{className:"text-2xl font-bold",children:e.value}),e.trend&&t.jsxs(y,{variant:e.isPositive?"default":"destructive",className:"text-xs",children:[t.jsx(e.isPositive?n:d,{className:"h-3 w-3 mr-1"}),e.trend]})]})]})},s))})]})}),t.jsx("div",{className:"border-b bg-background px-6 py-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(F,{value:p,onValueChange:e=>f(e),children:t.jsxs(V,{"data-testid":"analytics-type-tabs",children:[t.jsxs(z,{value:"heatmap","data-testid":"analytics-tab-heatmap",children:[t.jsx(x,{className:"h-4 w-4 mr-2"}),"Heatmap"]}),t.jsxs(z,{value:"routes","data-testid":"analytics-tab-routes",children:[t.jsx(u,{className:"h-4 w-4 mr-2"}),"Routes"]}),t.jsxs(z,{value:"performance","data-testid":"analytics-tab-performance",children:[t.jsx(i,{className:"h-4 w-4 mr-2"}),"Performance"]}),t.jsxs(z,{value:"fuel","data-testid":"analytics-tab-fuel",children:[t.jsx(r,{className:"h-4 w-4 mr-2"}),"Fuel"]})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(C,{value:k,onValueChange:G,children:[t.jsx(M,{className:"w-32","data-testid":"export-format-select",children:t.jsx(L,{})}),t.jsxs(T,{children:[t.jsx(A,{value:"pdf",children:"PDF"}),t.jsx(A,{value:"excel",children:"Excel"}),t.jsx(A,{value:"csv",children:"CSV"}),t.jsx(A,{value:"json",children:"JSON"})]})]}),t.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{},"data-testid":"export-report-btn",children:[t.jsx(o,{className:"h-4 w-4 mr-2"}),"Export"]}),t.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{},"data-testid":"share-report-btn",children:[t.jsx(v,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx(e,{analyticsType:p,onVehicleSelect:S})})]})}import{r as a,j as t,ax as l,aH as i,aC as c,_ as r,aw as n,aI as d,aD as x,bE as m,bF as o,aV as h,a0 as j,az as u,bG as v}from"./react-core-hQu9tqS1.js";import{M as p}from"./MapFirstLayout-DjypJrVA.js";import{P as f}from"./ProfessionalFleetMap-CXhovPIf.js";import{r as N,C as g,f as b,B as y,d as w,e as S,h as P,T as F,a as V,b as z}from"./index-BDwglPMF.js";import{S as C,a as M,b as L,c as T,d as A}from"./select-Bmd3s7f4.js";import{S as k}from"./separator-Dey2K2dP.js";import"./lazy-modules-Bs19xeuI.js";import"./form-vendor-DKCvS-hL.js";import"./chart-vendor-DWRb53_H.js";import"./utils-vendor-Bojdf5C8.js";import"./mui-core-BKffG9O1.js";import"./sheet-B4c1gADU.js";import"./ui-dialogs-C2yTnBPV.js";import"./ui-radix-C-X5Qx_8.js";import"./three-helpers-DedzJcO9.js";import"./three-core-ZrcxJ5g9.js";import"./three-react-B1s7Iy2r.js";import"./react-router-cBrq_s0x.js";import"./query-vendor--Fe2N4Al.js";import"./animation-vendor-Cf_i_fm0.js";import"./date-vendor-npJ7nI92.js";import"./ui-menus--48tEbqQ.js";export{s as AnalyticsDashboard};
