# Fleet Management Monitoring Configuration

This directory contains all monitoring configuration files and documentation.

## Contents

### Configuration Files

- **sentry-config.json** - Sentry error tracking configuration (generated by setup script)
- **posthog-config.json** - PostHog analytics configuration (generated by setup script)
- **azure-monitor-config.json** - Azure Application Insights configuration (generated by setup script)
- **unified-dashboard-config.json** - Unified monitoring dashboard configuration

### Setup Scripts

All setup scripts are located in `/scripts/`:

- **setup-sentry.sh** - Configure Sentry error tracking
- **setup-posthog.sh** - Configure PostHog analytics
- **setup-azure-monitor.sh** - Configure Azure Application Insights
- **test-monitoring.sh** - Test all monitoring services

### Documentation

- **[MONITORING_SETUP.md](../MONITORING_SETUP.md)** - Comprehensive monitoring documentation
- **[Alert Playbooks](../docs/playbooks/)** - Incident response playbooks

## Quick Start

```bash
# Run all setup scripts
cd /Users/andrewmorton/Documents/GitHub/fleet-local

./scripts/setup-sentry.sh
./scripts/setup-posthog.sh
./scripts/setup-azure-monitor.sh

# Test monitoring
./scripts/test-monitoring.sh
```

## Configuration Files Generated

After running setup scripts, the following files will be created:

1. **sentry-config.json** - Contains Sentry DSNs and project information
2. **posthog-config.json** - Contains PostHog API keys and feature flags
3. **azure-monitor-config.json** - Contains Azure resource IDs and connection strings

**⚠️ Important:** These files contain sensitive information. They are git-ignored by default.

## Environment Variables

After setup, ensure these environment variables are set:

### API (.env)
```bash
SENTRY_DSN=...
APPLICATION_INSIGHTS_CONNECTION_STRING=...
```

### Frontend (.env.local)
```bash
VITE_SENTRY_DSN=...
VITE_POSTHOG_API_KEY=...
VITE_POSTHOG_HOST=...
VITE_APP_INSIGHTS_CONNECTION_STRING=...
```

## Monitoring Services

### 1. Sentry - Error Tracking
- **Dashboard:** https://sentry.io/organizations/fleet-management/
- **Purpose:** Error tracking, performance monitoring, session replay
- **Sample Rate:** 10% in production

### 2. PostHog - Analytics
- **Dashboard:** https://app.posthog.com/
- **Purpose:** User analytics, feature flags, session recording
- **Features:** 6 feature flags configured for gradual rollout

### 3. Azure Application Insights
- **Dashboard:** https://portal.azure.com/
- **Purpose:** Infrastructure monitoring, logging, alerting
- **Alerts:** 4 critical alerts configured

## Alert Playbooks

Detailed incident response procedures:

- [High Error Rate](../docs/playbooks/high-error-rate.md)
- [Performance Degradation](../docs/playbooks/performance-degradation.md)
- [Service Outage](../docs/playbooks/service-outage.md)
- [Security Incident](../docs/playbooks/security-incident.md)

## Support

For monitoring issues or questions:
- Slack: #devops or #on-call-engineering
- Email: monitoring@fleet-management.com

---

**Last Updated:** 2025-12-31
**Owner:** Platform Engineering Team
