# Kubernetes Secrets Template
# DO NOT commit actual secrets to version control
# Use this template to create actual secrets.yaml file
# Then apply with: kubectl apply -f secrets.yaml

# Usage:
# 1. Copy this file to secrets.yaml
# 2. Replace all <PLACEHOLDER> values with actual secrets
# 3. Apply: kubectl create secret generic fleet-secrets --from-file=secrets.yaml -n ctafleet
# 4. Or use sealed-secrets for GitOps: kubeseal < secrets.yaml > sealed-secrets.yaml

apiVersion: v1
kind: Secret
metadata:
  name: fleet-secrets
  namespace: ctafleet
  labels:
    app: fleet
    component: secrets
type: Opaque
stringData:
  # Database Credentials
  POSTGRES_USER: "<POSTGRES_USER>"
  POSTGRES_PASSWORD: "<POSTGRES_PASSWORD_BASE64>"
  DATABASE_URL: "postgresql://<USER>:<PASSWORD>@postgres-service:5432/fleetdb"

  # Redis Credentials
  REDIS_PASSWORD: "<REDIS_PASSWORD>"
  REDIS_URL: "redis://:<REDIS_PASSWORD>@redis-service:6379"

  # JWT Secrets
  JWT_SECRET: "<JWT_SECRET_MIN_32_CHARS>"

  # Azure AD Authentication
  VITE_AZURE_AD_CLIENT_ID: "<AZURE_AD_CLIENT_ID>"
  VITE_AZURE_AD_TENANT_ID: "<AZURE_AD_TENANT_ID>"
  VITE_AZURE_AD_REDIRECT_URI: "https://fleet.ctafleet.com/auth/callback"

  # Azure OpenAI Service
  AZURE_OPENAI_ENDPOINT: "<AZURE_OPENAI_ENDPOINT>"
  AZURE_OPENAI_KEY: "<AZURE_OPENAI_KEY>"

  # Microsoft Graph API
  MS_GRAPH_CLIENT_ID: "<MS_GRAPH_CLIENT_ID>"
  MS_GRAPH_CLIENT_SECRET: "<MS_GRAPH_CLIENT_SECRET>"
  MS_GRAPH_TENANT_ID: "<MS_GRAPH_TENANT_ID>"

  # Azure Storage
  AZURE_STORAGE_CONNECTION_STRING: "<AZURE_STORAGE_CONNECTION_STRING>"
  AZURE_STORAGE_CONTAINER_NAME: "fleet-files"

  # Azure Maps
  VITE_AZURE_MAPS_SUBSCRIPTION_KEY: "<AZURE_MAPS_KEY>"
  AZURE_MAPS_SUBSCRIPTION_KEY: "<AZURE_MAPS_KEY>"

  # Application Insights
  APPLICATION_INSIGHTS_CONNECTION_STRING: "<APP_INSIGHTS_CONNECTION_STRING>"

  # Azure Key Vault
  AZURE_KEY_VAULT_URI: "<AZURE_KEY_VAULT_URI>"

  # SendGrid Email
  SENDGRID_API_KEY: "<SENDGRID_API_KEY>"
  SENDGRID_FROM_EMAIL: "noreply@ctafleet.com"

  # Twilio SMS
  TWILIO_ACCOUNT_SID: "<TWILIO_ACCOUNT_SID>"
  TWILIO_AUTH_TOKEN: "<TWILIO_AUTH_TOKEN>"
  TWILIO_PHONE_NUMBER: "+1234567890"

  # Azure Cosmos DB (for Testing Orchestrator)
  AZURE_COSMOS_ENDPOINT: "<AZURE_COSMOS_ENDPOINT>"
  AZURE_COSMOS_KEY: "<AZURE_COSMOS_KEY>"

  # Azure Cognitive Search (for RAG)
  AZURE_SEARCH_ENDPOINT: "<AZURE_SEARCH_ENDPOINT>"
  AZURE_SEARCH_KEY: "<AZURE_SEARCH_KEY>"

  # Grafana Admin
  GRAFANA_ADMIN_PASSWORD: "<GRAFANA_ADMIN_PASSWORD>"

---
# Alternative: Use Azure Key Vault integration with AAD Pod Identity
# This is the recommended approach for production

apiVersion: v1
kind: Secret
metadata:
  name: azure-keyvault-secrets
  namespace: ctafleet
  labels:
    app: fleet
    component: keyvault
type: Opaque
stringData:
  clientid: "<AZURE_CLIENT_ID>"
  clientsecret: "<AZURE_CLIENT_SECRET>"
  tenantid: "<AZURE_TENANT_ID>"
  keyvaultname: "<KEYVAULT_NAME>"

---
# TLS Certificate Secret (from Let's Encrypt or Azure)
apiVersion: v1
kind: Secret
metadata:
  name: fleet-tls
  namespace: ctafleet
  labels:
    app: fleet
    component: tls
type: kubernetes.io/tls
data:
  tls.crt: <BASE64_ENCODED_CERTIFICATE>
  tls.key: <BASE64_ENCODED_PRIVATE_KEY>
