apiVersion: v1
kind: ConfigMap
metadata:
  name: radio-dispatch-config
  namespace: fleet-management
  labels:
    app: radio-dispatch
data:
  # Application Configuration
  APP_NAME: "Radio Dispatch Service"
  APP_VERSION: "1.0.0"
  LOG_LEVEL: "INFO"

  # API Configuration
  API_V1_PREFIX: "/api/radio"

  # CORS Configuration
  CORS_ORIGINS: "https://fleet.capitaltechalliance.com,https://*.capitaltechalliance.com"

  # Socket.IO Configuration
  SOCKETIO_ASYNC_MODE: "asgi"
  SOCKETIO_CORS_ALLOWED_ORIGINS: "https://fleet.capitaltechalliance.com"

  # Redis Configuration
  REDIS_URL: "redis://redis-service:6379/0"
  CELERY_BROKER_URL: "redis://redis-service:6379/1"
  CELERY_RESULT_BACKEND: "redis://redis-service:6379/2"

  # Database Configuration
  DB_POOL_SIZE: "10"
  DB_MAX_OVERFLOW: "20"

  # Azure Configuration
  AZURE_SPEECH_REGION: "eastus"
  AZURE_STORAGE_ACCOUNT_NAME: "fleetappstorage"
  AZURE_STORAGE_CONTAINER_NAME: "radio-audio"

  # Fleet API Configuration
  FLEET_API_BASE_URL: "http://fleet-api-service:3000"
  FLEET_API_TIMEOUT: "30"

  # Worker Configuration
  CELERY_TASK_SOFT_TIME_LIMIT: "300"
  CELERY_TASK_TIME_LIMIT: "600"
  CELERY_TASK_ALWAYS_EAGER: "false"

  # Audio Processing Configuration
  MAX_AUDIO_SIZE_MB: "50"
  SUPPORTED_AUDIO_FORMATS: "wav,mp3,ogg,flac,m4a"

  # Transcription Configuration
  TRANSCRIPTION_ENGINE: "azure"  # azure, whisper, or assemblyai
  TRANSCRIPTION_LANGUAGE: "en-US"
  TRANSCRIPTION_CONFIDENCE_THRESHOLD: "0.7"

  # NLP Configuration
  NLP_ENGINE: "spacy"  # spacy, claude, or openai
  ENTITY_EXTRACTION_ENABLED: "true"
  KEYWORD_EXTRACTION_ENABLED: "true"

  # Policy Configuration
  POLICY_AUTO_APPROVE_LOW_PRIORITY: "false"
  POLICY_EXECUTION_TIMEOUT: "30"
