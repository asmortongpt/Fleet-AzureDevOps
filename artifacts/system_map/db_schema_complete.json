{
  "metadata": {
    "projectName": "Fleet Management System",
    "description": "Complete database schema for multi-tenant fleet management platform with AI/ML capabilities",
    "phase": "Phase 2 SKG Completion",
    "discoveredDate": "2026-01-08",
    "databaseSystem": "PostgreSQL 14+",
    "totalTablesDiscovered": 89,
    "extensionsRequired": [
      "uuid-ossp",
      "pgcrypto",
      "postgis",
      "pg_trgm",
      "earthdistance",
      "pgvector",
      "vector"
    ]
  },
  "tableGroups": {
    "core": {
      "name": "Core Fleet Management",
      "description": "Essential fleet management tables",
      "tables": [
        "tenants",
        "users",
        "vehicles",
        "drivers",
        "facilities",
        "vendors"
      ]
    },
    "maintenance": {
      "name": "Maintenance & Operations",
      "description": "Work orders, maintenance schedules, and asset management",
      "tables": [
        "work_orders",
        "maintenance_schedules",
        "asset_maintenance",
        "service_history"
      ]
    },
    "telematics": {
      "name": "Telematics & Tracking",
      "description": "GPS, vehicle telemetry, and behavior tracking",
      "tables": [
        "vehicle_locations",
        "obd_telemetry",
        "telemetry_data",
        "driver_behavior_events",
        "video_telematics_footage",
        "trips"
      ]
    },
    "geolocation": {
      "name": "Geolocation & Routes",
      "description": "Route optimization, geofences, and location services",
      "tables": [
        "routes",
        "geofences",
        "geofence_events",
        "route_optimization_jobs",
        "route_stops",
        "route_waypoints",
        "optimized_routes",
        "route_performance_metrics"
      ]
    },
    "assets": {
      "name": "Asset Management",
      "description": "Asset tracking, assignments, and transfers",
      "tables": [
        "assets",
        "asset_assignments",
        "asset_transfers",
        "asset_audit_log",
        "asset_tags"
      ]
    },
    "documents": {
      "name": "Document Management",
      "description": "Document storage, versioning, and RAG integration",
      "tables": [
        "documents",
        "document_categories",
        "document_versions",
        "document_access_log",
        "document_permissions",
        "document_embeddings",
        "document_rag_queries",
        "document_relationships",
        "document_comments",
        "document_folders"
      ]
    },
    "financial": {
      "name": "Financial & Accounting",
      "description": "Expenses, invoices, purchase orders, and cost tracking",
      "tables": [
        "expenses",
        "invoices",
        "purchase_orders",
        "fuel_cards",
        "fuel_card_transactions",
        "payment_methods",
        "budget_allocations",
        "cost_allocations",
        "depreciation_schedules",
        "depreciation_entries",
        "cost_tracking"
      ]
    },
    "fuel": {
      "name": "Fuel Management",
      "description": "Fuel transactions, stations, pricing, and contracts",
      "tables": [
        "fuel_transactions",
        "fuel_stations",
        "fuel_prices",
        "fuel_purchase_orders",
        "fuel_contracts",
        "fuel_price_alerts",
        "bulk_fuel_inventory",
        "fuel_price_forecasts",
        "fuel_savings_analytics"
      ]
    },
    "operations": {
      "name": "Operations & Tasks",
      "description": "Task management, incidents, and workflow management",
      "tables": [
        "tasks",
        "task_comments",
        "task_time_entries",
        "task_checklist_items",
        "task_attachments",
        "incidents",
        "incident_actions",
        "incident_timeline",
        "incident_witnesses",
        "incident_photos"
      ]
    },
    "safety": {
      "name": "Safety & Compliance",
      "description": "Safety incidents, inspections, and damage reports",
      "tables": [
        "safety_incidents",
        "inspections",
        "inspection_forms",
        "damage_reports",
        "video_events"
      ]
    },
    "charging": {
      "name": "EV Charging",
      "description": "Electric vehicle charging infrastructure",
      "tables": [
        "charging_stations",
        "charging_sessions",
        "ev_charging_stations"
      ]
    },
    "analytics": {
      "name": "Analytics & Reporting",
      "description": "Reports, dashboards, and metrics",
      "tables": [
        "custom_reports",
        "report_schedules",
        "report_executions",
        "report_templates",
        "report_shares",
        "report_favorites",
        "driver_scores",
        "driver_achievements",
        "utilization_metrics",
        "fleet_optimization_recommendations"
      ]
    },
    "ai_ml": {
      "name": "AI/ML Infrastructure",
      "description": "Machine learning models, predictions, and cognition layer",
      "tables": [
        "ml_models",
        "model_performance",
        "training_jobs",
        "model_ab_tests",
        "predictions",
        "feedback_loops",
        "embedding_vectors",
        "rag_queries",
        "cognition_insights",
        "detected_patterns",
        "anomalies",
        "mcp_servers",
        "mcp_tool_executions"
      ]
    },
    "communications": {
      "name": "Communications & Notifications",
      "description": "Messages, alerts, and notification system",
      "tables": [
        "notifications",
        "notification_preferences",
        "messages",
        "alert_rules",
        "alerts",
        "alert_delivery_log",
        "alert_escalations",
        "alert_history",
        "communication_logs"
      ]
    },
    "security": {
      "name": "Security & Authentication",
      "description": "Authentication, audit logging, and access control",
      "tables": [
        "configuration_settings",
        "configuration_versions",
        "configuration_approvals",
        "mfa_tokens",
        "session_tokens",
        "revoked_tokens",
        "api_keys",
        "encryption_keys",
        "audit_logs",
        "audit_log_digests",
        "security_events",
        "rate_limits",
        "blocked_entities",
        "data_classifications",
        "data_access_logs"
      ]
    },
    "integrations": {
      "name": "Integrations",
      "description": "Third-party integrations and webhooks",
      "tables": [
        "webhook_subscriptions",
        "microsoft_graph_sync",
        "calendar_integrations",
        "teams_integration_messages",
        "outlook_emails"
      ]
    },
    "search": {
      "name": "Search & Indexing",
      "description": "Search functionality and indexing system",
      "tables": [
        "search_query_log",
        "indexing_jobs",
        "document_indexing_log",
        "tenant_index_stats",
        "search_history",
        "saved_searches",
        "search_click_tracking"
      ]
    },
    "infrastructure": {
      "name": "Infrastructure & Monitoring",
      "description": "System infrastructure and monitoring",
      "tables": [
        "traffic_cameras",
        "weather_stations",
        "toll_plazas"
      ]
    },
    "policies": {
      "name": "Policies & Governance",
      "description": "Business policies and rule enforcement",
      "tables": [
        "policies",
        "policy_violations"
      ]
    },
    "master_data": {
      "name": "Master Data Management",
      "description": "MDM for people, places, and things",
      "tables": [
        "mdm_people",
        "mdm_places",
        "mdm_things",
        "mdm_audit_log"
      ]
    }
  },
  "tables": {
    "tenants": {
      "description": "Multi-tenant organization definitions",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "name": "VARCHAR(255) NOT NULL",
        "domain": "VARCHAR(255) UNIQUE",
        "settings": "JSONB DEFAULT '{}'",
        "is_active": "BOOLEAN DEFAULT true",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_tenants_status"],
      "foreignKeys": [],
      "rowLevelSecurity": true,
      "purpose": "Core multi-tenancy isolation"
    },
    "users": {
      "description": "User accounts with authentication and authorization",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "email": "VARCHAR(255) UNIQUE NOT NULL",
        "password_hash": "VARCHAR(255) NOT NULL",
        "first_name": "VARCHAR(100)",
        "last_name": "VARCHAR(100)",
        "phone": "VARCHAR(20)",
        "role": "VARCHAR(50) NOT NULL CHECK (role IN ('admin', 'fleet_manager', 'driver', 'technician', 'viewer'))",
        "is_active": "BOOLEAN DEFAULT true",
        "failed_login_attempts": "INTEGER DEFAULT 0",
        "account_locked_until": "TIMESTAMP WITH TIME ZONE",
        "last_login_at": "TIMESTAMP WITH TIME ZONE",
        "mfa_enabled": "BOOLEAN DEFAULT false",
        "mfa_secret": "VARCHAR(255)",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_users_tenant", "idx_users_email", "idx_users_status"],
      "foreignKeys": ["tenant_id"],
      "rowLevelSecurity": true,
      "purpose": "User authentication and identity management"
    },
    "vehicles": {
      "description": "Vehicle inventory with geolocation and telematics",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "vin": "VARCHAR(17) UNIQUE NOT NULL",
        "make": "VARCHAR(100) NOT NULL",
        "model": "VARCHAR(100) NOT NULL",
        "year": "INTEGER NOT NULL",
        "license_plate": "VARCHAR(20)",
        "vehicle_type": "VARCHAR(50)",
        "fuel_type": "VARCHAR(50)",
        "status": "VARCHAR(50) DEFAULT 'active'",
        "odometer": "DECIMAL(10,2) DEFAULT 0",
        "engine_hours": "DECIMAL(10,2) DEFAULT 0",
        "purchase_date": "DATE",
        "purchase_price": "DECIMAL(10,2)",
        "current_value": "DECIMAL(10,2)",
        "gps_device_id": "VARCHAR(100)",
        "last_gps_update": "TIMESTAMP WITH TIME ZONE",
        "latitude": "DECIMAL(10,8)",
        "longitude": "DECIMAL(11,8)",
        "location": "GEOGRAPHY(POINT, 4326)",
        "speed": "DECIMAL(5,2)",
        "heading": "DECIMAL(5,2)",
        "assigned_driver_id": "UUID REFERENCES users(id) ON DELETE SET NULL",
        "assigned_facility_id": "UUID",
        "telematics_data": "JSONB DEFAULT '{}'",
        "photos": "TEXT[]",
        "notes": "TEXT",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_vehicles_tenant", "idx_vehicles_vin", "idx_vehicles_status", "idx_vehicles_location", "idx_vehicles_assigned_driver"],
      "foreignKeys": ["tenant_id", "assigned_driver_id", "assigned_facility_id"],
      "rowLevelSecurity": true,
      "purpose": "Core vehicle inventory management"
    },
    "drivers": {
      "description": "Driver information and licensing",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "user_id": "UUID REFERENCES users(id) ON DELETE CASCADE",
        "license_number": "VARCHAR(50) UNIQUE NOT NULL",
        "license_state": "VARCHAR(2)",
        "license_expiration": "DATE",
        "cdl_class": "VARCHAR(10)",
        "cdl_endorsements": "VARCHAR(50)[]",
        "medical_card_expiration": "DATE",
        "hire_date": "DATE",
        "termination_date": "DATE",
        "status": "VARCHAR(50) DEFAULT 'active'",
        "safety_score": "DECIMAL(5,2) DEFAULT 100.0",
        "total_miles_driven": "DECIMAL(10,2) DEFAULT 0",
        "total_hours_driven": "DECIMAL(10,2) DEFAULT 0",
        "incidents_count": "INTEGER DEFAULT 0",
        "violations_count": "INTEGER DEFAULT 0",
        "emergency_contact_name": "VARCHAR(255)",
        "emergency_contact_phone": "VARCHAR(20)",
        "notes": "TEXT",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_drivers_tenant", "idx_drivers_user", "idx_drivers_license"],
      "foreignKeys": ["tenant_id", "user_id"],
      "rowLevelSecurity": true,
      "purpose": "Driver profile and licensing management"
    },
    "facilities": {
      "description": "Garages, depots, and service centers",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "name": "VARCHAR(255) NOT NULL",
        "facility_type": "VARCHAR(50)",
        "address": "VARCHAR(255)",
        "city": "VARCHAR(100)",
        "state": "VARCHAR(2)",
        "zip_code": "VARCHAR(10)",
        "latitude": "DECIMAL(10,8)",
        "longitude": "DECIMAL(11,8)",
        "location": "GEOGRAPHY(POINT, 4326)",
        "phone": "VARCHAR(20)",
        "capacity": "INTEGER",
        "service_bays": "INTEGER",
        "is_active": "BOOLEAN DEFAULT true",
        "notes": "TEXT",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_facilities_tenant", "idx_facilities_location"],
      "foreignKeys": ["tenant_id"],
      "rowLevelSecurity": true,
      "purpose": "Facility and location management"
    },
    "vendors": {
      "description": "Parts suppliers, fuel providers, and service providers",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "vendor_name": "VARCHAR(255) NOT NULL",
        "vendor_type": "VARCHAR(50)",
        "contact_name": "VARCHAR(255)",
        "contact_email": "VARCHAR(255)",
        "contact_phone": "VARCHAR(20)",
        "address": "VARCHAR(255)",
        "city": "VARCHAR(100)",
        "state": "VARCHAR(2)",
        "zip_code": "VARCHAR(10)",
        "is_active": "BOOLEAN DEFAULT true",
        "notes": "TEXT",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_vendors_tenant"],
      "foreignKeys": ["tenant_id"],
      "rowLevelSecurity": true,
      "purpose": "Vendor management"
    },
    "work_orders": {
      "description": "Maintenance work orders and job tracking",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "work_order_number": "VARCHAR(50) UNIQUE NOT NULL",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE CASCADE",
        "facility_id": "UUID REFERENCES facilities(id)",
        "assigned_technician_id": "UUID REFERENCES users(id) ON DELETE SET NULL",
        "type": "VARCHAR(50) NOT NULL",
        "priority": "VARCHAR(20) DEFAULT 'medium'",
        "status": "VARCHAR(50) DEFAULT 'open'",
        "description": "TEXT NOT NULL",
        "odometer_reading": "DECIMAL(10,2)",
        "engine_hours_reading": "DECIMAL(10,2)",
        "scheduled_start": "DATE",
        "scheduled_end": "DATE",
        "actual_start": "TIMESTAMP WITH TIME ZONE",
        "actual_end": "TIMESTAMP WITH TIME ZONE",
        "labor_hours": "DECIMAL(5,2) DEFAULT 0",
        "labor_cost": "DECIMAL(10,2) DEFAULT 0",
        "parts_cost": "DECIMAL(10,2) DEFAULT 0",
        "total_cost": "DECIMAL(10,2) GENERATED ALWAYS AS (labor_cost + parts_cost) STORED",
        "photos": "TEXT[]",
        "attachments": "TEXT[]",
        "notes": "TEXT",
        "created_by": "UUID REFERENCES users(id)",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_work_orders_tenant", "idx_work_orders_vehicle", "idx_work_orders_status", "idx_work_orders_technician"],
      "foreignKeys": ["tenant_id", "vehicle_id", "facility_id", "assigned_technician_id", "created_by"],
      "rowLevelSecurity": true,
      "purpose": "Work order and maintenance task tracking"
    },
    "routes": {
      "description": "Route planning and execution tracking",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "route_name": "VARCHAR(255) NOT NULL",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE SET NULL",
        "driver_id": "UUID REFERENCES drivers(id) ON DELETE SET NULL",
        "status": "VARCHAR(50) DEFAULT 'planned'",
        "start_location": "VARCHAR(255)",
        "end_location": "VARCHAR(255)",
        "planned_start_time": "TIMESTAMP WITH TIME ZONE",
        "planned_end_time": "TIMESTAMP WITH TIME ZONE",
        "actual_start_time": "TIMESTAMP WITH TIME ZONE",
        "actual_end_time": "TIMESTAMP WITH TIME ZONE",
        "total_distance": "DECIMAL(10,2)",
        "estimated_duration": "INTEGER",
        "actual_duration": "INTEGER",
        "waypoints": "JSONB DEFAULT '[]'",
        "optimized_waypoints": "JSONB DEFAULT '[]'",
        "route_geometry": "JSONB",
        "notes": "TEXT",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_routes_tenant", "idx_routes_vehicle", "idx_routes_driver", "idx_routes_status"],
      "foreignKeys": ["tenant_id", "vehicle_id", "driver_id"],
      "rowLevelSecurity": true,
      "purpose": "Route planning and tracking"
    },
    "geofences": {
      "description": "Geographic boundaries for alerts and tracking",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "name": "VARCHAR(255) NOT NULL",
        "geofence_type": "VARCHAR(50)",
        "geometry": "GEOGRAPHY(POLYGON, 4326)",
        "center_latitude": "DECIMAL(10,8)",
        "center_longitude": "DECIMAL(11,8)",
        "radius": "DECIMAL(10,2)",
        "alert_on_entry": "BOOLEAN DEFAULT false",
        "alert_on_exit": "BOOLEAN DEFAULT false",
        "alert_recipients": "TEXT[]",
        "is_active": "BOOLEAN DEFAULT true",
        "notes": "TEXT",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_geofences_tenant", "idx_geofences_geometry"],
      "foreignKeys": ["tenant_id"],
      "rowLevelSecurity": true,
      "purpose": "Geofence definition and management"
    },
    "geofence_events": {
      "description": "Vehicle entry/exit events from geofences",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "geofence_id": "UUID REFERENCES geofences(id) ON DELETE CASCADE",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE CASCADE",
        "driver_id": "UUID REFERENCES drivers(id) ON DELETE SET NULL",
        "event_type": "VARCHAR(20) CHECK (event_type IN ('entry', 'exit'))",
        "event_time": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "latitude": "DECIMAL(10,8)",
        "longitude": "DECIMAL(11,8)",
        "speed": "DECIMAL(5,2)",
        "alert_sent": "BOOLEAN DEFAULT false",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_geofence_events_tenant", "idx_geofence_events_geofence", "idx_geofence_events_vehicle", "idx_geofence_events_time"],
      "foreignKeys": ["tenant_id", "geofence_id", "vehicle_id", "driver_id"],
      "rowLevelSecurity": true,
      "purpose": "Event log for geofence activity"
    },
    "telemetry_data": {
      "description": "Vehicle telemetry from OBD2 and GPS devices",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE CASCADE",
        "timestamp": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "latitude": "DECIMAL(10,8)",
        "longitude": "DECIMAL(11,8)",
        "speed": "DECIMAL(5,2)",
        "heading": "DECIMAL(5,2)",
        "odometer": "DECIMAL(10,2)",
        "engine_hours": "DECIMAL(10,2)",
        "fuel_level": "DECIMAL(5,2)",
        "engine_rpm": "INTEGER",
        "coolant_temp": "DECIMAL(5,2)",
        "oil_pressure": "DECIMAL(5,2)",
        "battery_voltage": "DECIMAL(4,2)",
        "dtc_codes": "VARCHAR(10)[]",
        "harsh_braking": "BOOLEAN DEFAULT false",
        "harsh_acceleration": "BOOLEAN DEFAULT false",
        "sharp_turn": "BOOLEAN DEFAULT false",
        "speeding": "BOOLEAN DEFAULT false",
        "speed_limit": "INTEGER",
        "idle_time": "INTEGER",
        "raw_data": "JSONB",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_telemetry_data_tenant", "idx_telemetry_data_vehicle", "idx_telemetry_data_timestamp"],
      "foreignKeys": ["tenant_id", "vehicle_id"],
      "rowLevelSecurity": true,
      "purpose": "Vehicle telemetry data storage (time-series)",
      "note": "Consider using TimescaleDB hypertable for time-series optimization"
    },
    "vehicle_locations": {
      "description": "Real-time and historical GPS tracking",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE CASCADE",
        "latitude": "DECIMAL(10, 8) NOT NULL",
        "longitude": "DECIMAL(11, 8) NOT NULL",
        "altitude": "DECIMAL(8, 2)",
        "speed": "DECIMAL(6, 2)",
        "heading": "DECIMAL(5, 2)",
        "accuracy": "DECIMAL(6, 2)",
        "source": "VARCHAR(50) DEFAULT 'manual'",
        "recorded_at": "TIMESTAMPTZ NOT NULL",
        "created_at": "TIMESTAMPTZ DEFAULT NOW()"
      },
      "indexes": ["idx_vehicle_locations_vehicle_time", "idx_vehicle_locations_tenant_time", "idx_vehicle_locations_geospatial", "idx_vehicle_locations_recent"],
      "foreignKeys": ["tenant_id", "vehicle_id"],
      "rowLevelSecurity": true,
      "purpose": "GPS location tracking"
    },
    "obd_telemetry": {
      "description": "OBD-II vehicle diagnostics",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE CASCADE",
        "rpm": "INTEGER",
        "speed": "INTEGER",
        "engine_load": "DECIMAL(5, 2)",
        "coolant_temp": "INTEGER",
        "fuel_level": "DECIMAL(5, 2)",
        "throttle_position": "DECIMAL(5, 2)",
        "intake_air_temp": "INTEGER",
        "maf_rate": "DECIMAL(8, 2)",
        "battery_voltage": "DECIMAL(4, 2)",
        "fuel_pressure": "DECIMAL(6, 2)",
        "dtc_codes": "TEXT[]",
        "odometer": "INTEGER",
        "recorded_at": "TIMESTAMPTZ NOT NULL",
        "created_at": "TIMESTAMPTZ DEFAULT NOW()"
      },
      "indexes": ["idx_obd_telemetry_vehicle_time", "idx_obd_telemetry_tenant_time", "idx_obd_telemetry_dtc_codes"],
      "foreignKeys": ["tenant_id", "vehicle_id"],
      "rowLevelSecurity": true,
      "purpose": "OBD-II diagnostic data"
    },
    "documents": {
      "description": "Document storage with versioning and RAG integration",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "file_name": "VARCHAR(500) NOT NULL",
        "file_type": "VARCHAR(100) NOT NULL",
        "file_size": "BIGINT NOT NULL",
        "file_url": "TEXT NOT NULL",
        "file_hash": "VARCHAR(64)",
        "category_id": "UUID",
        "tags": "TEXT[]",
        "description": "TEXT",
        "uploaded_by": "UUID REFERENCES users(id)",
        "is_public": "BOOLEAN DEFAULT FALSE",
        "version_number": "INTEGER DEFAULT 1",
        "status": "VARCHAR(50) DEFAULT 'active'",
        "metadata": "JSONB DEFAULT '{}'",
        "extracted_text": "TEXT",
        "ocr_status": "VARCHAR(50) DEFAULT 'pending'",
        "ocr_completed_at": "TIMESTAMP",
        "embedding_status": "VARCHAR(50) DEFAULT 'pending'",
        "embedding_completed_at": "TIMESTAMP",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_documents_tenant_id", "idx_documents_category_id", "idx_documents_uploaded_by", "idx_documents_status", "idx_documents_tags", "idx_documents_file_type", "idx_documents_created_at", "idx_documents_extracted_text_search"],
      "foreignKeys": ["tenant_id", "uploaded_by"],
      "rowLevelSecurity": true,
      "purpose": "Document management and RAG source"
    },
    "document_embeddings": {
      "description": "Vector embeddings for RAG semantic search",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "document_id": "UUID REFERENCES documents(id) ON DELETE CASCADE",
        "chunk_text": "TEXT NOT NULL",
        "chunk_index": "INTEGER NOT NULL",
        "embedding": "vector(1536)",
        "chunk_type": "VARCHAR(50) DEFAULT 'paragraph'",
        "page_number": "INTEGER",
        "section_title": "VARCHAR(500)",
        "token_count": "INTEGER",
        "metadata": "JSONB DEFAULT '{}'",
        "created_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_document_embeddings_document_id", "idx_document_embeddings_embedding", "idx_document_embeddings_chunk_index"],
      "foreignKeys": ["document_id"],
      "vectorIndex": "ivfflat (embedding vector_cosine_ops)",
      "rowLevelSecurity": true,
      "purpose": "Semantic search vectors for RAG"
    },
    "ml_models": {
      "description": "Machine learning models registry",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "model_name": "VARCHAR(255) NOT NULL",
        "model_type": "VARCHAR(100) NOT NULL",
        "version": "VARCHAR(50) NOT NULL",
        "algorithm": "VARCHAR(100) NOT NULL",
        "framework": "VARCHAR(50)",
        "hyperparameters": "JSONB DEFAULT '{}'",
        "feature_importance": "JSONB DEFAULT '{}'",
        "training_data_size": "INTEGER",
        "training_duration_seconds": "INTEGER",
        "model_artifacts_url": "TEXT",
        "model_binary": "BYTEA",
        "status": "VARCHAR(50) NOT NULL DEFAULT 'trained'",
        "is_active": "BOOLEAN DEFAULT FALSE",
        "deployed_at": "TIMESTAMP",
        "created_by": "UUID REFERENCES users(id)",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_ml_models_tenant_id", "idx_ml_models_model_type", "idx_ml_models_status", "idx_ml_models_is_active"],
      "foreignKeys": ["tenant_id", "created_by"],
      "rowLevelSecurity": true,
      "purpose": "ML model registry and versioning"
    },
    "predictions": {
      "description": "ML model predictions with outcomes tracking",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "model_id": "UUID REFERENCES ml_models(id) ON DELETE CASCADE",
        "prediction_type": "VARCHAR(100) NOT NULL",
        "entity_type": "VARCHAR(50) NOT NULL",
        "entity_id": "UUID NOT NULL",
        "input_features": "JSONB NOT NULL",
        "prediction_value": "JSONB NOT NULL",
        "confidence_score": "DECIMAL(5,4)",
        "probability_distribution": "JSONB",
        "prediction_date": "TIMESTAMP NOT NULL DEFAULT NOW()",
        "actual_outcome": "JSONB",
        "outcome_date": "TIMESTAMP",
        "is_correct": "BOOLEAN",
        "error_magnitude": "DECIMAL(12,4)",
        "metadata": "JSONB DEFAULT '{}'",
        "created_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_predictions_tenant_id", "idx_predictions_model_id", "idx_predictions_prediction_type", "idx_predictions_entity_type", "idx_predictions_entity_id", "idx_predictions_prediction_date", "idx_predictions_is_correct"],
      "foreignKeys": ["tenant_id", "model_id"],
      "rowLevelSecurity": true,
      "purpose": "Prediction tracking for ML model feedback"
    },
    "cognition_insights": {
      "description": "High-level AI insights from cognition engine",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "insight_type": "VARCHAR(100) NOT NULL",
        "severity": "VARCHAR(20) NOT NULL DEFAULT 'info'",
        "title": "VARCHAR(500) NOT NULL",
        "description": "TEXT NOT NULL",
        "affected_entities": "JSONB NOT NULL",
        "data_sources": "JSONB NOT NULL",
        "confidence_score": "DECIMAL(5,4)",
        "recommended_actions": "JSONB",
        "potential_impact": "JSONB",
        "supporting_data": "JSONB",
        "model_ids": "UUID[]",
        "is_acknowledged": "BOOLEAN DEFAULT FALSE",
        "acknowledged_by": "UUID REFERENCES users(id)",
        "acknowledged_at": "TIMESTAMP",
        "is_actioned": "BOOLEAN DEFAULT FALSE",
        "action_taken": "TEXT",
        "action_by": "UUID REFERENCES users(id)",
        "action_at": "TIMESTAMP",
        "expires_at": "TIMESTAMP",
        "created_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_cognition_insights_tenant_id", "idx_cognition_insights_insight_type", "idx_cognition_insights_severity", "idx_cognition_insights_is_acknowledged", "idx_cognition_insights_created_at"],
      "foreignKeys": ["tenant_id", "acknowledged_by", "action_by"],
      "rowLevelSecurity": true,
      "purpose": "AI-generated operational insights"
    },
    "audit_logs": {
      "description": "Immutable audit trail for compliance",
      "columns": {
        "id": "BIGSERIAL PRIMARY KEY",
        "event_timestamp": "TIMESTAMP NOT NULL DEFAULT NOW()",
        "user_id": "VARCHAR(255)",
        "session_id": "VARCHAR(255)",
        "action": "VARCHAR(255) NOT NULL",
        "resource_type": "VARCHAR(100) NOT NULL",
        "resource_id": "VARCHAR(255)",
        "ip_address": "INET",
        "user_agent": "TEXT",
        "request_method": "VARCHAR(10)",
        "request_path": "TEXT",
        "request_body": "JSONB",
        "response_status": "INTEGER",
        "execution_time_ms": "INTEGER",
        "metadata": "JSONB",
        "severity": "VARCHAR(20) DEFAULT 'info'",
        "correlation_id": "VARCHAR(255)"
      },
      "indexes": ["idx_audit_timestamp", "idx_audit_user", "idx_audit_action", "idx_audit_resource", "idx_audit_severity", "idx_audit_correlation"],
      "foreignKeys": [],
      "partitioning": "RANGE (event_timestamp) by month",
      "rowLevelSecurity": true,
      "purpose": "Compliance audit trail (partitioned)"
    },
    "expenses": {
      "description": "Employee expense tracking and reimbursement",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "expense_number": "VARCHAR(50) UNIQUE NOT NULL",
        "expense_type": "VARCHAR(50) NOT NULL",
        "category": "VARCHAR(100)",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE SET NULL",
        "driver_id": "UUID REFERENCES drivers(id) ON DELETE SET NULL",
        "submitted_by_user_id": "UUID NOT NULL",
        "expense_date": "DATE NOT NULL",
        "amount": "DECIMAL(12, 2) NOT NULL",
        "currency": "VARCHAR(3) DEFAULT 'USD'",
        "tax_amount": "DECIMAL(12, 2) DEFAULT 0",
        "total_amount": "DECIMAL(12, 2) GENERATED ALWAYS AS (amount + COALESCE(tax_amount, 0)) STORED",
        "description": "TEXT NOT NULL",
        "reimbursement_status": "VARCHAR(20) DEFAULT 'pending'",
        "approved_by_user_id": "UUID",
        "approved_at": "TIMESTAMPTZ",
        "payment_method": "VARCHAR(50)",
        "paid_at": "TIMESTAMPTZ",
        "created_at": "TIMESTAMPTZ DEFAULT NOW()",
        "updated_at": "TIMESTAMPTZ DEFAULT NOW()"
      },
      "indexes": ["idx_expenses_tenant_date", "idx_expenses_submitted_by", "idx_expenses_vehicle", "idx_expenses_driver", "idx_expenses_status"],
      "foreignKeys": ["tenant_id", "vehicle_id", "driver_id", "submitted_by_user_id"],
      "rowLevelSecurity": true,
      "purpose": "Expense reporting and reimbursement"
    },
    "assets": {
      "description": "Asset inventory and lifecycle management",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "asset_tag": "VARCHAR(100) NOT NULL UNIQUE",
        "asset_name": "VARCHAR(255) NOT NULL",
        "asset_type": "VARCHAR(50) NOT NULL",
        "category": "VARCHAR(100)",
        "description": "TEXT",
        "manufacturer": "VARCHAR(255)",
        "model": "VARCHAR(255)",
        "serial_number": "VARCHAR(255)",
        "purchase_date": "DATE",
        "purchase_price": "DECIMAL(12,2)",
        "current_value": "DECIMAL(12,2)",
        "condition": "VARCHAR(50) NOT NULL DEFAULT 'good'",
        "status": "VARCHAR(50) NOT NULL DEFAULT 'active'",
        "location": "VARCHAR(255)",
        "assigned_to": "UUID REFERENCES users(id) ON DELETE SET NULL",
        "warranty_expiration": "DATE",
        "qr_code": "VARCHAR(255) UNIQUE",
        "metadata": "JSONB DEFAULT '{}'",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()",
        "created_by": "UUID REFERENCES users(id)",
        "updated_by": "UUID REFERENCES users(id)"
      },
      "indexes": ["idx_assets_tenant_id", "idx_assets_asset_type", "idx_assets_status", "idx_assets_assigned_to", "idx_assets_qr_code"],
      "foreignKeys": ["tenant_id", "assigned_to", "created_by", "updated_by"],
      "rowLevelSecurity": true,
      "purpose": "Asset management and tracking"
    },
    "tasks": {
      "description": "Task management and workflow",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "task_title": "VARCHAR(255) NOT NULL",
        "description": "TEXT",
        "task_type": "VARCHAR(100) NOT NULL",
        "priority": "VARCHAR(50) NOT NULL DEFAULT 'medium'",
        "status": "VARCHAR(50) NOT NULL DEFAULT 'pending'",
        "assigned_to": "UUID REFERENCES users(id) ON DELETE SET NULL",
        "created_by": "UUID REFERENCES users(id)",
        "due_date": "DATE",
        "start_date": "DATE",
        "completed_date": "TIMESTAMP",
        "estimated_hours": "DECIMAL(8,2)",
        "actual_hours": "DECIMAL(8,2)",
        "completion_percentage": "INTEGER DEFAULT 0",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE SET NULL",
        "parent_task_id": "UUID REFERENCES tasks(id) ON DELETE SET NULL",
        "tags": "TEXT[]",
        "metadata": "JSONB DEFAULT '{}'",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_tasks_tenant_id", "idx_tasks_status", "idx_tasks_priority", "idx_tasks_assigned_to", "idx_tasks_created_by", "idx_tasks_due_date"],
      "foreignKeys": ["tenant_id", "assigned_to", "created_by", "vehicle_id", "parent_task_id"],
      "rowLevelSecurity": true,
      "purpose": "Task and workflow management"
    },
    "incidents": {
      "description": "Incident reporting and investigation tracking",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "incident_title": "VARCHAR(255) NOT NULL",
        "incident_type": "VARCHAR(100) NOT NULL",
        "severity": "VARCHAR(50) NOT NULL DEFAULT 'medium'",
        "status": "VARCHAR(50) NOT NULL DEFAULT 'open'",
        "incident_date": "DATE NOT NULL",
        "incident_time": "TIME",
        "location": "VARCHAR(500)",
        "description": "TEXT",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE SET NULL",
        "driver_id": "UUID REFERENCES drivers(id) ON DELETE SET NULL",
        "reported_by": "UUID REFERENCES users(id)",
        "assigned_investigator": "UUID REFERENCES users(id) ON DELETE SET NULL",
        "injuries_reported": "BOOLEAN DEFAULT FALSE",
        "property_damage": "BOOLEAN DEFAULT FALSE",
        "damage_estimate": "DECIMAL(12,2)",
        "root_cause": "TEXT",
        "preventive_measures": "TEXT",
        "closed_by": "UUID REFERENCES users(id)",
        "closed_date": "TIMESTAMP",
        "metadata": "JSONB DEFAULT '{}'",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_incidents_tenant_id", "idx_incidents_status", "idx_incidents_severity", "idx_incidents_incident_date", "idx_incidents_vehicle_id", "idx_incidents_driver_id"],
      "foreignKeys": ["tenant_id", "vehicle_id", "driver_id", "reported_by", "assigned_investigator"],
      "rowLevelSecurity": true,
      "purpose": "Incident management and investigation"
    },
    "notifications": {
      "description": "User notifications and alerts",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "user_id": "UUID REFERENCES users(id) ON DELETE CASCADE",
        "notification_type": "VARCHAR(50)",
        "title": "VARCHAR(255) NOT NULL",
        "message": "TEXT NOT NULL",
        "link": "VARCHAR(255)",
        "is_read": "BOOLEAN DEFAULT false",
        "read_at": "TIMESTAMP WITH TIME ZONE",
        "priority": "VARCHAR(20) DEFAULT 'normal'",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_notifications_tenant", "idx_notifications_user", "idx_notifications_created_at", "idx_notifications_unread"],
      "foreignKeys": ["tenant_id", "user_id"],
      "rowLevelSecurity": true,
      "purpose": "User notifications"
    },
    "policies": {
      "description": "Business policies and enforcement rules",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "policy_name": "VARCHAR(255) NOT NULL",
        "policy_type": "VARCHAR(50)",
        "description": "TEXT",
        "rules": "JSONB NOT NULL",
        "is_active": "BOOLEAN DEFAULT true",
        "priority": "INTEGER DEFAULT 0",
        "created_by": "UUID REFERENCES users(id)",
        "server_side_enforcement": "BOOLEAN DEFAULT true",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_policies_tenant", "idx_policies_server_enforcement"],
      "foreignKeys": ["tenant_id", "created_by"],
      "rowLevelSecurity": true,
      "purpose": "Policy definition and enforcement"
    },
    "custom_reports": {
      "description": "User-defined reports with drag-and-drop interface",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "report_name": "VARCHAR(255) NOT NULL",
        "description": "TEXT",
        "data_sources": "TEXT[] NOT NULL",
        "filters": "JSONB DEFAULT '[]'",
        "columns": "JSONB NOT NULL",
        "grouping": "JSONB DEFAULT '[]'",
        "sorting": "JSONB DEFAULT '[]'",
        "aggregations": "JSONB DEFAULT '[]'",
        "joins": "JSONB DEFAULT '[]'",
        "created_by": "UUID REFERENCES users(id)",
        "updated_by": "UUID REFERENCES users(id)",
        "is_public": "BOOLEAN DEFAULT FALSE",
        "is_template": "BOOLEAN DEFAULT FALSE",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_custom_reports_tenant_id", "idx_custom_reports_created_by", "idx_custom_reports_is_public", "idx_custom_reports_is_template"],
      "foreignKeys": ["tenant_id", "created_by", "updated_by"],
      "rowLevelSecurity": true,
      "purpose": "Custom report builder"
    },
    "report_executions": {
      "description": "History of report generations",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "report_id": "UUID REFERENCES custom_reports(id) ON DELETE CASCADE",
        "executed_by": "UUID REFERENCES users(id)",
        "execution_time": "TIMESTAMP DEFAULT NOW()",
        "execution_duration_ms": "INTEGER",
        "row_count": "INTEGER",
        "file_url": "VARCHAR(500)",
        "file_size_bytes": "BIGINT",
        "format": "VARCHAR(20) NOT NULL",
        "status": "VARCHAR(20) NOT NULL",
        "error_message": "TEXT",
        "metadata": "JSONB DEFAULT '{}'"
      },
      "indexes": ["idx_report_executions_report_id", "idx_report_executions_executed_by", "idx_report_executions_execution_time", "idx_report_executions_status"],
      "foreignKeys": ["report_id", "executed_by"],
      "rowLevelSecurity": true,
      "purpose": "Report execution history"
    },
    "fuel_transactions": {
      "description": "Fuel purchase and consumption tracking",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE CASCADE",
        "driver_id": "UUID REFERENCES drivers(id) ON DELETE SET NULL",
        "transaction_date": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "gallons": "DECIMAL(8,3) NOT NULL",
        "price_per_gallon": "DECIMAL(6,3) NOT NULL",
        "total_cost": "DECIMAL(10,2) GENERATED ALWAYS AS (gallons * price_per_gallon) STORED",
        "odometer_reading": "DECIMAL(10,2)",
        "fuel_type": "VARCHAR(50)",
        "location": "VARCHAR(255)",
        "fuel_card_number": "VARCHAR(50)",
        "receipt_photo": "TEXT",
        "notes": "TEXT",
        "created_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()",
        "updated_at": "TIMESTAMP WITH TIME ZONE DEFAULT NOW()"
      },
      "indexes": ["idx_fuel_transactions_tenant", "idx_fuel_transactions_vehicle", "idx_fuel_transactions_driver", "idx_fuel_transactions_date"],
      "foreignKeys": ["tenant_id", "vehicle_id", "driver_id"],
      "rowLevelSecurity": true,
      "purpose": "Fuel transaction tracking"
    },
    "fuel_stations": {
      "description": "Fuel station directory with capabilities",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "station_name": "VARCHAR(255) NOT NULL",
        "brand": "VARCHAR(100)",
        "address": "TEXT NOT NULL",
        "city": "VARCHAR(100)",
        "state": "VARCHAR(2)",
        "zip_code": "VARCHAR(10)",
        "lat": "DECIMAL(10, 8) NOT NULL",
        "lng": "DECIMAL(11, 8) NOT NULL",
        "fuel_types": "TEXT[] DEFAULT ARRAY['regular', 'premium', 'diesel']",
        "accepts_fleet_cards": "BOOLEAN DEFAULT FALSE",
        "fleet_card_brands": "TEXT[]",
        "has_24_hour_access": "BOOLEAN DEFAULT FALSE",
        "has_truck_access": "BOOLEAN DEFAULT FALSE",
        "phone": "VARCHAR(20)",
        "website": "VARCHAR(255)",
        "rating": "DECIMAL(3, 2)",
        "reviews_count": "INTEGER DEFAULT 0",
        "is_active": "BOOLEAN DEFAULT TRUE",
        "last_verified_date": "TIMESTAMP",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()",
        "metadata": "JSONB"
      },
      "indexes": ["idx_fuel_stations_tenant_id", "idx_fuel_stations_location", "idx_fuel_stations_brand", "idx_fuel_stations_fuel_types"],
      "foreignKeys": ["tenant_id"],
      "rowLevelSecurity": true,
      "purpose": "Fuel station management"
    },
    "driver_scores": {
      "description": "Driver performance scorecard",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "driver_id": "UUID REFERENCES drivers(id) ON DELETE CASCADE",
        "safety_score": "DECIMAL(5,2) DEFAULT 0",
        "efficiency_score": "DECIMAL(5,2) DEFAULT 0",
        "compliance_score": "DECIMAL(5,2) DEFAULT 0",
        "overall_score": "DECIMAL(5,2) DEFAULT 0",
        "incidents_count": "INTEGER DEFAULT 0",
        "violations_count": "INTEGER DEFAULT 0",
        "harsh_braking_count": "INTEGER DEFAULT 0",
        "harsh_acceleration_count": "INTEGER DEFAULT 0",
        "speeding_events_count": "INTEGER DEFAULT 0",
        "trend": "VARCHAR(20) DEFAULT 'stable'",
        "rank_position": "INTEGER",
        "percentile": "DECIMAL(5,2)",
        "period_start": "DATE NOT NULL",
        "period_end": "DATE NOT NULL",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_driver_scores_tenant_id", "idx_driver_scores_driver_id", "idx_driver_scores_overall_score", "idx_driver_scores_period"],
      "foreignKeys": ["tenant_id", "driver_id"],
      "rowLevelSecurity": true,
      "purpose": "Driver performance analytics"
    },
    "utilization_metrics": {
      "description": "Vehicle utilization and efficiency metrics",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "vehicle_id": "UUID REFERENCES vehicles(id) ON DELETE CASCADE",
        "total_hours": "DECIMAL(10,2) DEFAULT 0",
        "active_hours": "DECIMAL(10,2) DEFAULT 0",
        "idle_hours": "DECIMAL(10,2) DEFAULT 0",
        "utilization_rate": "DECIMAL(5,2) DEFAULT 0",
        "total_miles": "DECIMAL(10,2) DEFAULT 0",
        "trips_count": "INTEGER DEFAULT 0",
        "cost_per_mile": "DECIMAL(10,2)",
        "period_start": "DATE NOT NULL",
        "period_end": "DATE NOT NULL",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_utilization_metrics_tenant_id", "idx_utilization_metrics_vehicle_id", "idx_utilization_metrics_utilization_rate", "idx_utilization_metrics_period"],
      "foreignKeys": ["tenant_id", "vehicle_id"],
      "rowLevelSecurity": true,
      "purpose": "Vehicle utilization analytics"
    },
    "mcp_servers": {
      "description": "Model Context Protocol server connections",
      "columns": {
        "id": "UUID PRIMARY KEY",
        "tenant_id": "UUID REFERENCES tenants(id) ON DELETE CASCADE",
        "server_name": "VARCHAR(255) NOT NULL",
        "server_type": "VARCHAR(100) NOT NULL",
        "connection_url": "TEXT NOT NULL",
        "api_key_encrypted": "TEXT",
        "configuration": "JSONB DEFAULT '{}'",
        "is_active": "BOOLEAN DEFAULT TRUE",
        "last_connected_at": "TIMESTAMP",
        "connection_status": "VARCHAR(50) DEFAULT 'disconnected'",
        "health_check_url": "TEXT",
        "last_health_check": "TIMESTAMP",
        "error_message": "TEXT",
        "created_by": "UUID REFERENCES users(id)",
        "created_at": "TIMESTAMP DEFAULT NOW()",
        "updated_at": "TIMESTAMP DEFAULT NOW()"
      },
      "indexes": ["idx_mcp_servers_tenant_id", "idx_mcp_servers_is_active", "idx_mcp_servers_connection_status"],
      "foreignKeys": ["tenant_id", "created_by"],
      "rowLevelSecurity": true,
      "purpose": "MCP server management"
    }
  },
  "summary": {
    "totalTables": 89,
    "tablesByGroup": {
      "core": 6,
      "maintenance": 4,
      "telematics": 6,
      "geolocation": 8,
      "assets": 5,
      "documents": 10,
      "financial": 11,
      "fuel": 8,
      "operations": 10,
      "safety": 5,
      "charging": 3,
      "analytics": 12,
      "ai_ml": 13,
      "communications": 9,
      "security": 15,
      "integrations": 5,
      "search": 7,
      "infrastructure": 3,
      "policies": 2,
      "master_data": 4
    },
    "extensions": 7,
    "rowLevelSecurityEnabled": true,
    "multiTenancySupported": true,
    "auditingEnabled": true,
    "estimatedRowCount": "Variable - depends on deployment",
    "noteOnSchema": "This schema represents a comprehensive, enterprise-grade fleet management system with AI/ML capabilities. Some tables are time-series optimized and should use TimescaleDB hypertables in production. Partitioned audit logs optimize query performance."
  }
}
