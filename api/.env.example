# Fleet Management API - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env files with real secrets to Git!

# ============================================================================
# Database Configuration
# ============================================================================
DATABASE_URL=postgresql://YOUR_DB_USER:YOUR_DB_PASSWORD@localhost:5432/fleet_db
DB_HOST=localhost
DB_PORT=5432
DB_NAME=fleet_db
DB_USER=YOUR_DB_USER
DB_PASSWORD=YOUR_DB_PASSWORD

# ============================================================================
# Server Configuration
# ============================================================================
PORT=3000
NODE_ENV=development
API_BASE_URL=http://localhost:3000

# ============================================================================
# Security - Generate with: openssl rand -base64 48
# ============================================================================
CSRF_SECRET=YOUR_CSRF_SECRET_HERE_GENERATE_WITH_OPENSSL_RAND_BASE64_48
JWT_SECRET=YOUR_JWT_SECRET_HERE_GENERATE_WITH_OPENSSL_RAND_BASE64_48
SESSION_SECRET=YOUR_SESSION_SECRET_HERE_GENERATE_WITH_OPENSSL_RAND_BASE64_48

# ============================================================================
# Azure AD Authentication
# Get these from Azure Portal â†’ App Registrations
# ============================================================================
AZURE_AD_CLIENT_ID=YOUR_AZURE_AD_CLIENT_ID
AZURE_AD_TENANT_ID=YOUR_AZURE_AD_TENANT_ID
AZURE_AD_CLIENT_SECRET=YOUR_AZURE_AD_CLIENT_SECRET

# ============================================================================
# Frontend Configuration
# ============================================================================
FRONTEND_URL=http://localhost:5175

# ============================================================================
# CORS Configuration
# ============================================================================
# Development: Comma-separated list of allowed origins (http:// allowed)
# Production: MUST use HTTPS origins only (enforced by corsConfig.ts)
# Examples:
#   Development: http://localhost:5173,http://localhost:5174,http://localhost:5175
#   Production: https://fleet.capitaltechalliance.com,https://proud-bay-0fdc8040f.3.azurestaticapps.net
CORS_ORIGIN=http://localhost:5175,http://localhost:5173,http://localhost:5174

# Production example (uncomment and update for production):
# CORS_ORIGIN=https://proud-bay-0fdc8040f.3.azurestaticapps.net,https://fleet.capitaltechalliance.com

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_TELEMETRY=false
ENABLE_WEBHOOKS=false
ENABLE_ML_FEATURES=false

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL=info

# ============================================================================
# AI Assistant Services
# ============================================================================
# Azure OpenAI (Primary AI Provider)
AZURE_OPENAI_ENDPOINT=https://YOUR-RESOURCE-NAME.openai.azure.com/
AZURE_OPENAI_KEY=YOUR_AZURE_OPENAI_KEY
AZURE_OPENAI_DEPLOYMENT=gpt-4
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# Azure Computer Vision (OCR Service)
AZURE_COMPUTER_VISION_ENDPOINT=https://YOUR-REGION.api.cognitive.microsoft.com/
AZURE_COMPUTER_VISION_KEY=YOUR_COMPUTER_VISION_KEY

# Azure Blob Storage (OCR File Storage)
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=YOUR_ACCOUNT;AccountKey=YOUR_KEY;EndpointSuffix=core.windows.net

# OpenAI (Fallback/Alternative)
OPENAI_API_KEY=YOUR_OPENAI_API_KEY

# Redis (For Rate Limiting and Queue Management)
REDIS_URL=redis://localhost:6379

# Content Safety
ENABLE_CONTENT_SAFETY=false
AZURE_CONTENT_SAFETY_ENDPOINT=https://YOUR-REGION.api.cognitive.microsoft.com/
AZURE_CONTENT_SAFETY_KEY=YOUR_CONTENT_SAFETY_KEY

# ============================================================================
# PRODUCTION ONLY - Azure Key Vault (Recommended)
# ============================================================================
# Uncomment and configure for production deployments
# AZURE_KEY_VAULT_URL=https://YOUR-KEYVAULT-NAME.vault.azure.net
# USE_AZURE_KEY_VAULT=true

# ============================================================================
# Database Connection Pool Settings
# ============================================================================
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_IDLE_TIMEOUT_MS=30000
DB_CONNECTION_TIMEOUT_MS=2000
DB_EAGER_INIT=false
DB_MONITOR_ENABLED=true

# ============================================================================
# Azure Blob Storage (for photo uploads)
# ============================================================================
AZURE_STORAGE_ACCOUNT=your_storage_account
AZURE_STORAGE_KEY=your_storage_key
AZURE_STORAGE_CONTAINER=asset-photos

# ============================================================================
# WebSocket Configuration
# ============================================================================
WEBSOCKET_PATH=/socket.io
WEBSOCKET_PING_INTERVAL=25000
WEBSOCKET_PING_TIMEOUT=60000

# ============================================================================
# Background Jobs & Workers
# ============================================================================
ENABLE_MAINTENANCE_SCHEDULER=true
ENABLE_TELEMATICS_SYNC=true
ENABLE_TEAMS_SYNC=false
ENABLE_OUTLOOK_SYNC=false

# Job Intervals (in milliseconds)
MAINTENANCE_CHECK_INTERVAL=3600000
TELEMATICS_SYNC_INTERVAL=300000

# ============================================================================
# Development/Testing
# ============================================================================
# SECURITY WARNING: Never enable USE_MOCK_DATA in production!
# This bypasses authentication and is for local development only
USE_MOCK_DATA=false

# ============================================================================
# Shutdown & Graceful Termination
# ============================================================================
SHUTDOWN_TIMEOUT_MS=30000

# ============================================================================
# Additional AI Services
# ============================================================================
# Anthropic Claude API
ANTHROPIC_API_KEY=your-anthropic-api-key

# Google Maps API
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# SmartCar API (for vehicle telematics)
SMARTCAR_CLIENT_ID=your-smartcar-client-id
SMARTCAR_CLIENT_SECRET=your-smartcar-client-secret
SMARTCAR_REDIRECT_URI=http://localhost:3000/api/smartcar/callback

# ============================================================================
# Email Configuration
# ============================================================================
EMAIL_HOST=smtp.office365.com
EMAIL_PORT=587
EMAIL_USER=your-email@example.com
EMAIL_PASSWORD=your-email-password
EMAIL_FROM=noreply@fleetmanagement.com
EMAIL_USE_TLS=true

# ============================================================================
# Microsoft Graph API
# ============================================================================
MICROSOFT_GRAPH_API_ENDPOINT=https://graph.microsoft.com/v1.0

# ============================================================================
# Additional Feature Flags
# ============================================================================
ENABLE_DOCUMENT_OCR=true
ENABLE_3D_MODELS=true

# ============================================================================
# Security Headers & FIPS
# ============================================================================
ENFORCE_FIPS=false
STRICT_TRANSPORT_SECURITY_MAX_AGE=31536000

# ============================================================================
# Global Rate Limiter
# ============================================================================
GLOBAL_RATE_LIMIT=30

# ============================================================================
# SECURITY NOTES
# ============================================================================
# 1. NEVER commit this file with real values to Git
# 2. Generate strong secrets: openssl rand -base64 48
# 3. Use Azure Key Vault for production secrets
# 4. Rotate secrets every 90 days
# 5. Use different secrets for dev/staging/production
# ============================================================================
