# ============================================================================
# Fleet Management API - Production Environment Variables
# ============================================================================

# Node Environment
NODE_ENV=production

# Server Configuration
PORT=3000
HOST=0.0.0.0

# Database Configuration (PostgreSQL)
DATABASE_URL=postgresql://username:password@hostname:5432/database_name
POSTGRES_HOST=your-postgres-host.azure.com
POSTGRES_PORT=5432
POSTGRES_USER=fleet_user
POSTGRES_PASSWORD=<CHANGE-ME-STRONG-PASSWORD>
POSTGRES_DB=fleet_production

# JWT Authentication
JWT_SECRET=<CHANGE-ME-GENERATE-STRONG-RANDOM-SECRET>
JWT_EXPIRES_IN=24h

# CORS Origins (comma-separated)
CORS_ORIGIN=https://your-production-domain.com,https://www.your-production-domain.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5

# Security
BCRYPT_ROUNDS=12
SESSION_SECRET=<CHANGE-ME-GENERATE-STRONG-RANDOM-SECRET>

# Monitoring & Logging
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true

# Azure Services (if using Azure)
AZURE_STORAGE_CONNECTION_STRING=<your-azure-storage-connection>
AZURE_KEY_VAULT_URL=<your-key-vault-url>

# Optional: External Services
SENTRY_DSN=<your-sentry-dsn-for-error-tracking>
NEW_RELIC_LICENSE_KEY=<your-new-relic-key>

# ============================================================================
# CSRF & Session Security - Generate with: openssl rand -base64 48
# ============================================================================
CSRF_SECRET=<CHANGE-ME-GENERATE-STRONG-RANDOM-SECRET>

# ============================================================================
# Azure AD Authentication
# Get these from Azure Portal -> App Registrations
# ============================================================================
AZURE_AD_CLIENT_ID=your-azure-ad-client-id
AZURE_AD_TENANT_ID=your-azure-ad-tenant-id
AZURE_AD_CLIENT_SECRET=your-azure-ad-client-secret

# ============================================================================
# Frontend URL (for CORS and redirects)
# ============================================================================
FRONTEND_URL=https://your-production-domain.com

# ============================================================================
# Redis Configuration (for rate limiting, caching, and queue management)
# ============================================================================
REDIS_URL=rediss://your-redis-host:6380
REDIS_HOST=your-redis-host.redis.cache.windows.net
REDIS_PORT=6380
REDIS_PASSWORD=your-redis-access-key-here
REDIS_TLS=true

# ============================================================================
# Azure Blob Storage (for photo uploads, documents, and OCR files)
# ============================================================================
AZURE_STORAGE_ACCOUNT=your-storage-account-name
AZURE_STORAGE_KEY=your-storage-account-key-here
AZURE_STORAGE_CONTAINER=asset-photos

# ============================================================================
# WebSocket Configuration
# ============================================================================
WEBSOCKET_PATH=/socket.io
WEBSOCKET_PING_INTERVAL=25000
WEBSOCKET_PING_TIMEOUT=60000

# ============================================================================
# Background Jobs & Workers
# ============================================================================
ENABLE_MAINTENANCE_SCHEDULER=true
ENABLE_TELEMATICS_SYNC=true
ENABLE_TEAMS_SYNC=false
ENABLE_OUTLOOK_SYNC=false

# Job Intervals (in milliseconds)
MAINTENANCE_CHECK_INTERVAL=3600000
TELEMATICS_SYNC_INTERVAL=300000

# ============================================================================
# Database Connection Pool Settings
# ============================================================================
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_WEBAPP_POOL_SIZE=20
DB_READONLY_POOL_SIZE=10
DB_ADMIN_POOL_SIZE=5
DB_IDLE_TIMEOUT_MS=30000
DB_CONNECTION_TIMEOUT_MS=10000
DB_EAGER_INIT=true
DB_MONITOR_ENABLED=true
DB_HEALTH_CHECK_INTERVAL=60000

# ============================================================================
# Database SSL Configuration
# ============================================================================
DATABASE_SSL=true
DB_SSL_CA=

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_SWAGGER_DOCS=false
ENABLE_DEBUG_MODE=false
ENABLE_TELEMETRY=true
ENABLE_WEBHOOKS=false
ENABLE_ML_FEATURES=false
ENABLE_DOCUMENT_OCR=true
ENABLE_3D_MODELS=false
ENABLE_CONTENT_SAFETY=false

# ============================================================================
# Azure OpenAI (Primary AI Provider)
# ============================================================================
AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com/
AZURE_OPENAI_KEY=your-azure-openai-key-here
AZURE_OPENAI_DEPLOYMENT=gpt-4
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# ============================================================================
# Azure Computer Vision (OCR Service)
# ============================================================================
AZURE_COMPUTER_VISION_ENDPOINT=https://your-region.api.cognitive.microsoft.com/
AZURE_COMPUTER_VISION_KEY=your-computer-vision-key-here

# ============================================================================
# Email Configuration
# ============================================================================
EMAIL_HOST=smtp.office365.com
EMAIL_PORT=587
EMAIL_USER=your-email@your-domain.com
EMAIL_PASSWORD=your-email-password-here
EMAIL_FROM=noreply@your-domain.com
EMAIL_USE_TLS=true

# ============================================================================
# Microsoft Graph API
# ============================================================================
MICROSOFT_GRAPH_API_ENDPOINT=https://graph.microsoft.com/v1.0

# ============================================================================
# SmartCar API (for vehicle telematics)
# ============================================================================
SMARTCAR_CLIENT_ID=your-smartcar-client-id
SMARTCAR_CLIENT_SECRET=your-smartcar-client-secret
SMARTCAR_REDIRECT_URI=https://your-production-domain.com/api/smartcar/callback

# ============================================================================
# Google Maps API
# ============================================================================
GOOGLE_MAPS_API_KEY=your-google-maps-api-key-here

# ============================================================================
# Security Headers & FIPS
# ============================================================================
ENFORCE_FIPS=false
STRICT_TRANSPORT_SECURITY_MAX_AGE=31536000

# ============================================================================
# Global Rate Limiter
# ============================================================================
GLOBAL_RATE_LIMIT=30

# ============================================================================
# Shutdown & Graceful Termination
# ============================================================================
SHUTDOWN_TIMEOUT_MS=30000

# ============================================================================
# IMPORTANT SECURITY NOTES:
# 1. NEVER commit this file with actual secrets to version control
# 2. Use Azure Key Vault or similar for secret management in production
# 3. Rotate all secrets regularly
# 4. Use strong, randomly generated values for all SECRET fields
# 5. Use different secrets for dev/staging/production
# 6. Set DATABASE_SSL=true and provide DB_SSL_CA for production
# ============================================================================
