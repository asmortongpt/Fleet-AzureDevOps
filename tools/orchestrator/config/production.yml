# Fleet Security Orchestrator - Production Configuration

# Project settings
project:
  name: "Fleet Management System"
  root: "/Users/andrewmorton/Documents/GitHub/Fleet"
  output_dir: "tools/orchestrator/artifacts"

# Scanner configuration
scanners:
  semgrep:
    enabled: true
    rules:
      - "p/security-audit"
      - "p/typescript"
      - "p/react"
      - "p/owasp-top-ten"
    exclude:
      - "node_modules"
      - "dist"
      - "build"
      - "*.test.ts"
      - "*.spec.ts"

  trivy:
    enabled: true
    severity:
      - "CRITICAL"
      - "HIGH"
      - "MEDIUM"
    scanners:
      - "vuln"
      - "secret"
      - "config"
    ignore_unfixed: false

  osv:
    enabled: true
    lockfile_paths:
      - "package-lock.json"
      - "api/package-lock.json"

  gitleaks:
    enabled: true
    config: ".gitleaks.toml"
    baseline: ".gitleaks-baseline.json"

  eslint:
    enabled: true
    config: "eslint.config.js"
    ext: [".ts", ".tsx", ".js", ".jsx"]

  typescript:
    enabled: true
    project: "tsconfig.json"

  tests:
    enabled: true
    frameworks:
      - "playwright"
      - "vitest"
    coverage_threshold: 80

  zap:
    enabled: false  # Requires running app
    target: "http://localhost:5173"
    scan_type: "baseline"

# Verification gates
gates:
  security:
    enabled: true
    max_critical: 0
    max_high: 0
    max_medium: 5
    allow_suppressed: true

  quality:
    enabled: true
    max_eslint_errors: 0
    max_ts_errors: 0
    max_code_smells: 10

  tests:
    enabled: true
    min_coverage: 80
    must_pass: true

  build:
    enabled: true
    must_succeed: true
    timeout_minutes: 10

# Remediation settings
remediation:
  auto_fix: true
  max_iterations: 10
  verify_each_iteration: true
  create_backup: true
  rollback_on_failure: true
  strategies:
    - "dependency_update"
    - "eslint_auto_fix"
    - "typescript_strict_mode"
    - "security_patch"

# Repository sync
repo_sync:
  github:
    enabled: true
    owner: "andrewmorton"
    repo: "Fleet"
    branch: "main"

  azure_devops:
    enabled: true
    organization: "capitaltechalliance"
    project: "FleetOps"
    repository: "Fleet"
    branch: "main"

# LangChain orchestration
ai:
  enabled: true
  providers:
    openai:
      enabled: true
      model: "gpt-4"
      temperature: 0.1

    anthropic:
      enabled: true
      model: "claude-3-5-sonnet-20241022"
      temperature: 0

    google:
      enabled: false
      model: "gemini-pro"

  features:
    code_analysis: true
    remediation_suggestions: true
    architecture_review: true
    risk_assessment: true

  caching:
    enabled: true
    ttl_seconds: 3600

  rate_limiting:
    enabled: true
    requests_per_minute: 60

  fallback:
    enabled: true
    order: ["anthropic", "openai", "google"]

# Reporting
reporting:
  formats:
    - "markdown"
    - "json"
    - "html"

  outputs:
    chief_architect: "artifacts/chief_architect_report.md"
    remediation_backlog: "artifacts/remediation_backlog.json"
    risk_clusters: "artifacts/risk_clusters.json"
    evidence_manifest: "artifacts/evidence_manifest.json"
    dependency_graph: "artifacts/dependency_graph.json"

  email:
    enabled: false
    recipients: []

  slack:
    enabled: false
    webhook_url: ""

# Logging
logging:
  level: "info"
  file: "logs/orchestrator.log"
  console: true
  rotation:
    enabled: true
    max_files: 10
    max_size: "10m"
