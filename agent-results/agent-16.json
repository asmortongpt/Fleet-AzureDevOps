{
  "agent_id": 16,
  "name": "FuelCardIntegration Repo",
  "file": "api/src/repositories/fuelcardintegration.repository.ts",
  "status": "success",
  "content": "import { Pool } from 'pg';\nimport { pool } from '../config/database';\n\nexport interface FuelCardIntegration {\n  id: string;\n  tenant_id: string;\n  provider: string;\n  card_number?: string;\n  status?: string;\n  created_at?: Date;\n  updated_at?: Date;\n}\n\nexport class FuelCardIntegrationRepository {\n  private pool: Pool;\n\n  constructor() {\n    this.pool = pool;\n  }\n\n  async create(data: Partial<FuelCardIntegration>, tenant_id: string): Promise<FuelCardIntegration> {\n    const result = await this.pool.query(\n      `INSERT INTO fuel_card_integrations (provider, card_number, status, tenant_id)\n       VALUES ($1, $2, $3, $4)\n       RETURNING *`,\n      [data.provider, data.card_number, data.status || 'active', tenant_id]\n    );\n    return result.rows[0];\n  }\n\n  async read(id: string, tenant_id: string): Promise<FuelCardIntegration | null> {\n    const result = await this.pool.query(\n      `SELECT * FROM fuel_card_integrations WHERE id = $1 AND tenant_id = $2`,\n      [id, tenant_id]\n    );\n    return result.rows[0] || null;\n  }\n\n  async update(id: string, data: Partial<FuelCardIntegration>, tenant_id: string): Promise<FuelCardIntegration | null> {\n    const result = await this.pool.query(\n      `UPDATE fuel_card_integrations\n       SET provider = COALESCE($1, provider),\n           card_number = COALESCE($2, card_number),\n           status = COALESCE($3, status),\n           updated_at = NOW()\n       WHERE id = $4 AND tenant_id = $5\n       RETURNING *`,\n      [data.provider, data.card_number, data.status, id, tenant_id]\n    );\n    return result.rows[0] || null;\n  }\n\n  async delete(id: string, tenant_id: string): Promise<boolean> {\n    const result = await this.pool.query(\n      `DELETE FROM fuel_card_integrations WHERE id = $1 AND tenant_id = $2`,\n      [id, tenant_id]\n    );\n    return (result.rowCount || 0) > 0;\n  }\n\n  async list(filters: any, tenant_id: string): Promise<FuelCardIntegration[]> {\n    let query = `SELECT * FROM fuel_card_integrations WHERE tenant_id = $1`;\n    const params: any[] = [tenant_id];\n    let paramIndex = 2;\n\n    if (filters?.provider) {\n      query += ` AND provider = $${paramIndex}`;\n      params.push(filters.provider);\n      paramIndex++;\n    }\n\n    if (filters?.status) {\n      query += ` AND status = $${paramIndex}`;\n      params.push(filters.status);\n      paramIndex++;\n    }\n\n    if (filters?.card_number) {\n      query += ` AND card_number = $${paramIndex}`;\n      params.push(filters.card_number);\n      paramIndex++;\n    }\n\n    query += ` ORDER BY created_at DESC`;\n\n    const result = await this.pool.query(query, params);\n    return result.rows;\n  }\n}",
  "timestamp": "2026-01-18T16:21:48.532627"
}