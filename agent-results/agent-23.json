{
  "agent_id": 23,
  "name": "ComplianceReportingHub",
  "file": "src/pages/ComplianceReportingHub.tsx",
  "status": "success",
  "content": "```typescript\n/**\n * ComplianceReportingHub - Enterprise Compliance Management Dashboard\n *\n * Features:\n * - Real-time compliance metrics with 10s refresh\n * - Violation tracking and resolution workflow\n * - Audit scheduling and management\n * - Regulatory update tracking\n * - Automated report generation\n * - WCAG 2.1 AA compliant\n * - XSS/CSRF protection\n *\n * @module pages/ComplianceReportingHub\n */\n\nimport React, { useState, useMemo, useCallback } from 'react';\nimport {\n  Shield,\n  CheckCircle,\n  Warning,\n  XCircle,\n  Clock,\n  TrendUp,\n  TrendDown,\n  FileText,\n  Calendar,\n  Gavel,\n  ChartBar,\n  Download,\n  Plus,\n  MagnifyingGlass,\n  Funnel,\n  CaretDown,\n} from '@phosphor-icons/react';\nimport { HubPage } from '@/components/ui/hub-page';\nimport {\n  useReactiveComplianceReportingData,\n  getComplianceStatusColor,\n  getSeverityBadgeClass,\n  formatCompliancePercentage,\n  type ComplianceFilters,\n  type Violation,\n  type AuditRecord,\n} from '@/hooks/use-reactive-compliancereporting-data';\n\n// ============================================================================\n// Types\n// ============================================================================\n\ninterface MetricCardProps {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  trend?: 'up' | 'down' | 'stable';\n  status?: 'success' | 'warning' | 'error' | 'info';\n  icon: React.ReactNode;\n}\n\ninterface ViolationRowProps {\n  violation: Violation;\n  onResolve: (id: string) => void;\n}\n\ninterface AuditRowProps {\n  audit: AuditRecord;\n}\n\n// ============================================================================\n// Metric Card Component\n// ============================================================================\n\nconst MetricCard = React.memo<MetricCardProps>(({\n  title,\n  value,\n  subtitle,\n  trend,\n  status = 'info',\n  icon,\n}) => {\n  const statusColors = {\n    success: 'text-green-600 dark:text-green-400',\n    warning: 'text-yellow-600 dark:text-yellow-400',\n    error: 'text-red-600 dark:text-red-400',\n    info: 'text-blue-600 dark:text-blue-400',\n  };\n\n  const trendIcons = {\n    up: <TrendUp className=\"w-4 h-4\" />,\n    down: <TrendDown className=\"w-4 h-4\" />,\n    stable: null,\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700\">\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex-1\">\n          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">\n            {title}\n          </p>\n          <p className={`text-3xl font-bold mt-2 ${statusColors[status]}`}>\n            {value}\n          </p>\n          {subtitle && (\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n              {subtitle}\n            </p>\n          )}\n        </div>\n        <div className={`p-3 rounded-lg ${statusColors[status]} bg-opacity-10`}>\n          {icon}\n        </div>\n      </div>\n      {trend && trend !== 'stable' && (\n        <div className=\"flex items-center mt-4 text-sm\">\n          {trendIcons[trend]}\n          <span className={`ml-1 ${trend === 'up' ? 'text-green-600' : 'text-red-600'}`}>\n            {trend === 'up' ? 'Improving' : 'Declining'}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n});\n\nMetricCard.displayName = 'MetricCard';\n\n// ============================================================================\n// Violation Row Component\n// ============================================================================\n\nconst ViolationRow = React.memo<ViolationRowProps>(({ violation, onResolve }) => {\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      onResolve(violation.id);\n    }\n  }, [onResolve, violation.id]);\n\n  return (\n    <tr className=\"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n      <td className=\"px-4 py-3\">\n        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getSeverityBadgeClass(violation.severity)}`}>\n          {violation.severity}\n        </span>\n      </td>\n      <td className=\"px-4 py-3\">\n        <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n          {violation.type}\n        </span>\n      </td>\n      <td className=\"px-4 py-3\">\n        <p className=\"text-sm text-gray-600 dark:text-gray-400 line-clamp-2\">\n          {violation.description}\n        </p>\n      </td>\n      <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-400\">\n        {new Date(violation.occurredAt).toLocaleDateString()}\n      </td>\n      <td className=\"px-4 py-3\">\n        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n          violation.status === 'OPEN' ? 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400' :\n          violation.status === 'IN_PROGRESS' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400' :\n          'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400'\n        }`}>\n          {violation.status}\n        </span>\n      </td>\n      <td className=\"px-4 py-3\">\n        {violation.status !== 'RESOLVED' && violation.status !== 'CLOSED' && (\n          <button\n            onClick={() => onResolve(violation.id)}\n            onKeyDown={handleKeyDown}\n            className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1\"\n            aria-label={`Resolve violation: ${violation.description}`}\n          >\n            Resolve\n          </button>\n        )}\n      </td>\n    </tr>\n  );\n});\n\nViolationRow.displayName = 'ViolationRow';\n\n// ============================================================================\n// Audit Row Component\n// ============================================================================\n\nconst AuditRow = React.memo<AuditRowProps>(({ audit }) => {\n  return (\n    <tr className=\"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50\">\n      <td className=\"px-4 py-3\">\n        <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n          {audit.type}\n        </span>\n      </td>\n      <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-400\">\n        {audit.auditor}\n      </td>\n      <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-400\">\n        {audit.department}\n      </td>\n      <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-400\">\n        {new Date(audit.scheduledDate).toLocaleDateString()}\n      </td>\n      <td className=\"px-4 py-3\">\n        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n          audit.status === 'SCHEDULED' ? 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400' :\n          audit.status === 'IN_PROGRESS' ? 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400' :\n          audit.status === 'COMPLETED' ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400' :\n          'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\n        }`}>\n          {audit.status}\n        </span>\n      </td>\n      <td className=\"px-4 py-3 text-sm text-gray-600 dark:text-gray-400\">\n        {audit.score !== undefined ? `${audit.score}%` : 'N/A'}\n      </td>\n      <td className=\"px-4 py-3\">\n        {audit.reportUrl && (\n          <a\n            href={audit.reportUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1\"\n            aria-label={`View report for ${audit.type} audit`}\n          >\n            <FileText className=\"w-4 h-4\" />\n          </a>\n        )}\n      </td>\n    </tr>\n  );\n});\n\nAuditRow.displayName = 'AuditRow';\n\n// ============================================================================\n// Dashboard Tab Component\n// ============================================================================\n\nconst DashboardTab = React.memo<{\n  data: ReturnType<typeof useReactiveComplianceReportingData>;\n}>(({ data }) => {\n  if (data.isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\" role=\"status\" aria-live=\"polite\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\" />\n        <span className=\"sr-only\">Loading compliance data...</span>\n      </div>\n    );\n  }\n\n  if (data.error) {\n    return (\n      <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6\" role=\"alert\">\n        <div className=\"flex items-center\">\n          <XCircle className=\"w-6 h-6 text-red-600 dark:text-red-400 mr-3\" />\n          <div>\n            <h3 className=\"text-lg font-semibold text-red-900 dark:text-red-100\">\n              Error Loading Data\n            </h3>\n            <p className=\"text-sm text-red-700 dark:text-red-300 mt-1\">\n              {data.error}\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!data.data || !data.calculations) {\n    return null;\n  }\n\n  const { summary } = data.data;\n  const { criticalViolations, upcomingAudits, totalCostImpact, avgResolutionTime } = data.calculations;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Key Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <MetricCard\n          title=\"Overall Compliance\"\n          value={formatCompliancePercentage(summary.overallCompliance)}\n          status={summary.overallCompliance >= 90 ? 'success' : summary.overallCompliance >= 75 ? 'warning' : 'error'}\n          icon={<Shield className=\"w-6 h-6\" />}\n        />\n        <MetricCard\n          title=\"Active Violations\"\n          value={summary.activeViolations}\n          subtitle={`${criticalViolations.length} critical`}\n          status={summary.activeViolations === 0 ? 'success' : summary.activeViolations < 5 ? 'warning' : 'error'}\n          icon={<Warning className=\"w-6 h-6\" />}\n        />\n        <MetricCard\n          title=\"Pending Audits\"\n          value={summary.pendingAudits}\n          subtitle={`${upcomingAudits.length} upcoming`}\n          status=\"info\"\n          icon={<Calendar className=\"w-6 h-6\" />}\n        />\n        <MetricCard\n          title=\"Risk Score\"\n          value={summary.riskScore}\n          status={summary.riskScore < 30 ? 'success' : summary.riskScore < 60 ? 'warning' : 'error'}\n          icon={<ChartBar className=\"w-6 h-6\" />}\n        />\n      </div>\n\n      {/* Additional Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n            Cost Impact\n          </h3>\n          <p className=\"text-3xl font-bold text-red-600 dark:text-red-400\">\n            ${totalCostImpact.toLocaleString()}\n          </p>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\n            Total violation costs\n          </p>\n        </div>\n\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n            Avg. Resolution Time\n          </h3>\n          <p className=\"text-3xl font-bold text-blue-600 dark:text-blue-400\">\n            {Math.round(avgResolutionTime)} days\n          </p>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\n            Time to resolve violations\n          </p>\n        </div>\n      </div>\n\n      {/* Compliance by Category */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 border border-gray-200 dark:border-gray-700\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n          Compliance by Category\n        </h3>\n        <div className=\"space-y-4\">\n          {Object.entries(data.calculations.complianceByCategory).map(([category, stats]) => {\n            const percentage = (stats.compliant / stats.total) * 100;\n            return (\n              <div key={category}>\n                <div className=\"flex items-center justify-between",
  "timestamp": "2026-01-18T16:21:48.535955"
}