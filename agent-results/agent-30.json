{
  "agent_id": 30,
  "name": "GitHub Workflow",
  "file": ".github/workflows/azure-static-web-apps-production.yml",
  "status": "success",
  "content": "name: Azure Static Web Apps CI/CD - Production\n\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    types: [opened, synchronize, reopened, closed]\n    branches:\n      - main\n  workflow_dispatch:\n\njobs:\n  build_and_deploy_job:\n    if: github.event_name == 'push' || github.event_name == 'workflow_dispatch' || (github.event_name == 'pull_request' && github.event.action != 'closed')\n    runs-on: ubuntu-latest\n    name: Build and Deploy Job\n    steps:\n      - name: Check for deployment token\n        run: |\n          if [ -z \"${{ secrets.AZURE_STATIC_WEB_APPS_API_TOKEN }}\" ]; then\n            echo \"::error::AZURE_STATIC_WEB_APPS_API_TOKEN secret is not configured. Please add it in GitHub Settings > Secrets and variables > Actions.\"\n            exit 1\n          fi\n\n      - uses: actions/checkout@v3\n        with:\n          submodules: true\n          lfs: false\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '20'\n          cache: 'npm'\n\n      - name: Install dependencies\n        run: npm ci --legacy-peer-deps\n\n      - name: Build application with environment variables\n        env:\n          VITE_GOOGLE_MAPS_API_KEY: ${{ secrets.GOOGLE_MAPS_API_KEY }}\n          VITE_AZURE_AD_CLIENT_ID: ${{ secrets.AZURE_AD_CLIENT_ID }}\n          VITE_AZURE_AD_TENANT_ID: ${{ secrets.AZURE_AD_TENANT_ID }}\n          VITE_AZURE_AD_REDIRECT_URI: https://fleet.capitaltechalliance.com/auth/callback\n          VITE_API_BASE_URL: https://fleet.capitaltechalliance.com/api\n          VITE_USE_MOCK_DATA: false\n        run: npm run build\n\n      - name: Build And Deploy\n        id: builddeploy\n        uses: Azure/static-web-apps-deploy@v1\n        with:\n          azure_static_web_apps_api_token: ${{ secrets.AZURE_STATIC_WEB_APPS_API_TOKEN }}\n          repo_token: ${{ secrets.GITHUB_TOKEN }}\n          action: \"upload\"\n          app_location: \"/\"\n          api_location: \"api\"\n          output_location: \"dist\"\n          skip_app_build: true\n\n  close_pull_request_job:\n    if: github.event_name == 'pull_request' && github.event.action == 'closed'\n    runs-on: ubuntu-latest\n    name: Close Pull Request Job\n    steps:\n      - name: Close Pull Request\n        id: closepullrequest\n        uses: Azure/static-web-apps-deploy@v1\n        with:\n          azure_static_web_apps_api_token: ${{ secrets.AZURE_STATIC_WEB_APPS_API_TOKEN }}\n          action: \"close\"",
  "timestamp": "2026-01-18T16:21:48.538748"
}