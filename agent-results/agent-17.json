{
  "agent_id": 17,
  "name": "LeaseTracking Repo",
  "file": "api/src/repositories/leasetracking.repository.ts",
  "status": "success",
  "content": "import { Pool } from 'pg';\nimport { pool } from '../config/database';\n\nexport interface LeaseTracking {\n  id: string;\n  tenant_id: string;\n  vehicle_id?: string;\n  lease_provider?: string;\n  start_date?: Date;\n  end_date?: Date;\n  monthly_payment?: number;\n  status?: string;\n  created_at?: Date;\n  updated_at?: Date;\n}\n\nexport class LeaseTrackingRepository {\n  private pool: Pool;\n\n  constructor() {\n    this.pool = pool;\n  }\n\n  async create(leaseTracking: Partial<LeaseTracking>): Promise<LeaseTracking> {\n    const result = await this.pool.query(\n      `INSERT INTO lease_tracking\n       (vehicle_id, lease_provider, start_date, end_date, monthly_payment, status, tenant_id)\n       VALUES ($1, $2, $3, $4, $5, $6, $7)\n       RETURNING *`,\n      [\n        leaseTracking.vehicle_id,\n        leaseTracking.lease_provider,\n        leaseTracking.start_date,\n        leaseTracking.end_date,\n        leaseTracking.monthly_payment,\n        leaseTracking.status || 'active',\n        leaseTracking.tenant_id\n      ]\n    );\n    return result.rows[0];\n  }\n\n  async readAll(tenant_id: string): Promise<LeaseTracking[]> {\n    const result = await this.pool.query(\n      `SELECT * FROM lease_tracking WHERE tenant_id = $1 ORDER BY created_at DESC`,\n      [tenant_id]\n    );\n    return result.rows;\n  }\n\n  async readById(id: string, tenant_id: string): Promise<LeaseTracking | null> {\n    const result = await this.pool.query(\n      `SELECT * FROM lease_tracking WHERE id = $1 AND tenant_id = $2`,\n      [id, tenant_id]\n    );\n    return result.rows[0] || null;\n  }\n\n  async update(id: string, leaseTracking: Partial<LeaseTracking>, tenant_id: string): Promise<LeaseTracking | null> {\n    const result = await this.pool.query(\n      `UPDATE lease_tracking\n       SET vehicle_id = COALESCE($1, vehicle_id),\n           lease_provider = COALESCE($2, lease_provider),\n           start_date = COALESCE($3, start_date),\n           end_date = COALESCE($4, end_date),\n           monthly_payment = COALESCE($5, monthly_payment),\n           status = COALESCE($6, status),\n           updated_at = NOW()\n       WHERE id = $7 AND tenant_id = $8\n       RETURNING *`,\n      [\n        leaseTracking.vehicle_id,\n        leaseTracking.lease_provider,\n        leaseTracking.start_date,\n        leaseTracking.end_date,\n        leaseTracking.monthly_payment,\n        leaseTracking.status,\n        id,\n        tenant_id\n      ]\n    );\n    return result.rows[0] || null;\n  }\n\n  async delete(id: string, tenant_id: string): Promise<boolean> {\n    const result = await this.pool.query(\n      `DELETE FROM lease_tracking WHERE id = $1 AND tenant_id = $2`,\n      [id, tenant_id]\n    );\n    return (result.rowCount || 0) > 0;\n  }\n\n  async query1(param1: string, tenant_id: string): Promise<LeaseTracking[]> {\n    const result = await this.pool.query(\n      `SELECT * FROM lease_tracking WHERE tenant_id = $1 AND status = $2`,\n      [tenant_id, param1]\n    );\n    return result.rows;\n  }\n\n  async query2(param1: string, param2: string, tenant_id: string): Promise<LeaseTracking[]> {\n    const result = await this.pool.query(\n      `SELECT * FROM lease_tracking\n       WHERE tenant_id = $1 AND status = $2 AND lease_provider = $3`,\n      [tenant_id, param1, param2]\n    );\n    return result.rows;\n  }\n\n  async query3(param1: string, param2: string, param3: string, tenant_id: string): Promise<LeaseTracking[]> {\n    const result = await this.pool.query(\n      `SELECT * FROM lease_tracking\n       WHERE tenant_id = $1 AND status = $2 AND lease_provider = $3 AND vehicle_id = $4`,\n      [tenant_id, param1, param2, param3]\n    );\n    return result.rows;\n  }\n}",
  "timestamp": "2026-01-18T16:21:48.532765"
}