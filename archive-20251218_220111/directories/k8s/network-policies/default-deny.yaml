# Default Deny All Network Policy
# This policy blocks all ingress and egress traffic by default
# Specific policies must explicitly allow necessary traffic
#
# SECURITY NOTE: This implements zero-trust networking by default
# All pods in the fleet-management namespace will be isolated until
# specific allow policies are applied.

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-all
  namespace: fleet-management
  labels:
    app: fleet
    policy-type: default-deny
    security-level: critical
  annotations:
    description: "Default deny all ingress and egress traffic for network segmentation"
    compliance: "SOC2, NIST-800-53"
spec:
  podSelector: {}
  policyTypes:
    - Ingress
    - Egress
---
# Also apply to ctafleet namespace for backward compatibility
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-all
  namespace: ctafleet
  labels:
    app: fleet
    policy-type: default-deny
    security-level: critical
  annotations:
    description: "Default deny all ingress and egress traffic for network segmentation"
    compliance: "SOC2, NIST-800-53"
spec:
  podSelector: {}
  policyTypes:
    - Ingress
    - Egress
---
# Also apply to staging namespace
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-deny-all
  namespace: ctafleet-staging
  labels:
    app: fleet
    policy-type: default-deny
    security-level: critical
  annotations:
    description: "Default deny all ingress and egress traffic for network segmentation"
    compliance: "SOC2, NIST-800-53"
spec:
  podSelector: {}
  policyTypes:
    - Ingress
    - Egress
