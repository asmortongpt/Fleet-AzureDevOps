apiVersion: v1
kind: ConfigMap
metadata:
  name: fleet-api-config
  namespace: fleet-management
  labels:
    app: fleet-api
    tier: backend
    environment: production
data:
  NODE_ENV: "production"
  PORT: "3000"

  # Database Configuration
  DB_HOST: "fleet-postgres-service.fleet-management.svc.cluster.local"
  DB_PORT: "5432"
  DB_NAME: "fleet_production"
  DB_USER: "fleetadmin"
  DB_MAX_POOL_SIZE: "20"
  DB_MIN_POOL_SIZE: "5"
  DB_IDLE_TIMEOUT: "30000"
  DB_CONNECTION_TIMEOUT: "5000"

  # Redis Configuration
  REDIS_HOST: "fleet-redis-service.fleet-management.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_KEY_PREFIX: "fleet:"

  # CORS Configuration
  CORS_ORIGIN: "https://fleet.capitaltechalliance.com"
  CORS_CREDENTIALS: "true"

  # API Configuration
  API_BASE_URL: "https://fleet.capitaltechalliance.com/api"
  FRONTEND_URL: "https://fleet.capitaltechalliance.com"

  # Azure AD Configuration
  AZURE_AD_TENANT_ID: "0ec14b81-7b82-45ee-8f3d-cbc31ced5347"
  AZURE_AD_CLIENT_ID: "baae0851-0c24-4214-8587-e3fabc46bd4a"
  AZURE_AD_REDIRECT_URI: "https://fleet.capitaltechalliance.com/auth/callback"

  # Feature Flags
  ENABLE_TELEMETRY: "true"
  ENABLE_RATE_LIMITING: "true"
  ENABLE_CSRF_PROTECTION: "true"
  ENABLE_FIPS_MODE: "false"

  # Logging
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"

  # OpenTelemetry
  OTEL_SERVICE_NAME: "fleet-api"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector:4318"
