# ============================================================================
# Radio Fleet Dispatch - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
DATABASE_URL=postgresql://radio_fleet:your_password@localhost:5432/radio_fleet
# Production: Use Azure Postgres Flexible Server connection string
# DATABASE_URL=postgresql://username@servername:password@servername.postgres.database.azure.com:5432/radio_fleet?sslmode=require

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
# Production: Use Azure Cache for Redis
# REDIS_URL=rediss://:password@your-cache.redis.cache.windows.net:6380/0

# ----------------------------------------------------------------------------
# Message Broker Configuration
# ----------------------------------------------------------------------------
# Development: Local Redpanda/Kafka
KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# Production: Azure Event Hubs
# EVENT_HUB_CONNECTION_STRING=Endpoint=sb://your-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=your-key
# SERVICE_BUS_CONNECTION_STRING=Endpoint=sb://your-namespace.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=your-key

# ----------------------------------------------------------------------------
# Azure Authentication (OIDC)
# ----------------------------------------------------------------------------
OIDC_AUTHORITY=https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0
OIDC_CLIENT_ID=your-app-client-id
OIDC_CLIENT_SECRET=your-app-client-secret
OIDC_AUDIENCE=api://your-app-client-id

# For NextAuth.js (Frontend)
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=generate-a-random-secret-here
AZURE_AD_CLIENT_ID=your-app-client-id
AZURE_AD_CLIENT_SECRET=your-app-client-secret
AZURE_AD_TENANT_ID=your-tenant-id

# ----------------------------------------------------------------------------
# Azure Services
# ----------------------------------------------------------------------------
# Azure Storage (for audio files, attachments)
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=yourname;AccountKey=yourkey;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER=radio-transmissions

# Azure Speech Service (for transcription)
AZURE_SPEECH_KEY=your-speech-service-key
AZURE_SPEECH_REGION=eastus

# Azure Key Vault (for secrets management)
AZURE_KEY_VAULT_URI=https://your-keyvault.vault.azure.net/

# Azure Application Insights (for observability)
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/;LiveEndpoint=https://eastus.livediagnostics.monitor.azure.com/

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------
MODE=development  # development | staging | production
LOG_LEVEL=INFO    # DEBUG | INFO | WARNING | ERROR | CRITICAL
API_PORT=8000
WEBSOCKET_PORT=8001

# Feature Flags (comma-separated)
FEATURE_FLAGS=monitor_only,hitl,autonomous_assist

# Default operating mode per organization (can override in DB)
DEFAULT_OP_MODE=hitl  # monitor_only | hitl | autonomous_assist

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------
# JWT Settings
JWT_SECRET=your-jwt-secret-change-me
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60

# CORS Settings (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,https://your-domain.com

# Webhook signing secret
WEBHOOK_SIGNING_SECRET=your-webhook-secret-change-me

# ----------------------------------------------------------------------------
# Frontend Configuration (NEXT_PUBLIC_ vars are exposed to browser)
# ----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8001
NEXT_PUBLIC_MAPBOX_TOKEN=your-mapbox-token-here
NEXT_PUBLIC_MAP_CENTER_LAT=39.8283
NEXT_PUBLIC_MAP_CENTER_LNG=-98.5795
NEXT_PUBLIC_MAP_ZOOM=4

# ----------------------------------------------------------------------------
# Worker Configuration
# ----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=300

# ----------------------------------------------------------------------------
# Rate Limiting
# ----------------------------------------------------------------------------
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=200

# ----------------------------------------------------------------------------
# Retention Policies (days)
# ----------------------------------------------------------------------------
AUDIO_RETENTION_DAYS=90
TRANSCRIPT_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years

# ----------------------------------------------------------------------------
# External Integrations
# ----------------------------------------------------------------------------
# Samsara-like fleet adapter (example)
SAMSARA_API_KEY=your-samsara-api-key
SAMSARA_API_URL=https://api.samsara.com

# Email/SMS notifications
SENDGRID_API_KEY=your-sendgrid-key
TWILIO_ACCOUNT_SID=your-twilio-sid
TWILIO_AUTH_TOKEN=your-twilio-token
TWILIO_FROM_NUMBER=+15551234567

# ----------------------------------------------------------------------------
# Observability
# ----------------------------------------------------------------------------
OTEL_EXPORTER_OTLP_ENDPOINT=https://your-collector:4318
OTEL_SERVICE_NAME=radio-fleet-dispatch
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# ----------------------------------------------------------------------------
# Development/Testing
# ----------------------------------------------------------------------------
# Set to 'true' to enable simulators
ENABLE_RADIO_SIMULATOR=false
ENABLE_GPS_SIMULATOR=false

# Simulator configuration
SIMULATOR_TRANSMISSION_INTERVAL_SECONDS=30
SIMULATOR_GPS_UPDATE_INTERVAL_SECONDS=10
SIMULATOR_NUM_VEHICLES=10

# ----------------------------------------------------------------------------
# PMO-Tool Integration
# ----------------------------------------------------------------------------
# Enable/disable PMO-Tool integration
PMO_TOOL_ENABLED=true

# PMO-Tool API Configuration
PMO_TOOL_API_URL=http://localhost:3001
PMO_TOOL_API_KEY=your-pmo-tool-api-key-change-me

# Webhook Configuration (for receiving updates from PMO-Tool)
PMO_TOOL_WEBHOOK_SECRET=your-pmo-webhook-secret-change-me

# Feature Flags
PMO_TOOL_AUTO_CREATE_PROJECTS=true
PMO_TOOL_AUTO_CREATE_TASKS=true
PMO_TOOL_AUTO_UPDATE_RESOURCES=false
