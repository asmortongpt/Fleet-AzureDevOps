<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Management System - Comprehensive Requirements Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .metadata {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 3px solid #667eea;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .metadata-item {
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .metadata-item strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .toc {
            background: #f8f9fa;
            padding: 30px 40px;
            border-left: 4px solid #667eea;
            margin: 40px;
        }

        .toc h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .toc ul {
            list-style: none;
        }

        .toc ul li {
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .toc ul li:last-child {
            border-bottom: none;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s;
            display: block;
            padding: 5px;
        }

        .toc a:hover {
            color: #764ba2;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 4px;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 2em;
        }

        h3 {
            color: #764ba2;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        h4 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        h5 {
            color: #666;
            margin-top: 15px;
            margin-bottom: 8px;
            font-size: 1em;
            font-weight: 600;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .highlight-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }

        .status-working {
            background: #d4edda;
            color: #155724;
        }

        .status-in-progress {
            background: #fff3cd;
            color: #856404;
        }

        .status-has-issues {
            background: #f8d7da;
            color: #721c24;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        thead {
            background: #667eea;
            color: white;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        tbody tr:hover {
            background: #f5f5f5;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
        }

        pre code {
            background: none;
            color: #f8f8f2;
            padding: 0;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .tech-card {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .tech-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
        }

        .tech-card h4 {
            color: #667eea;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .tech-card ul {
            list-style-position: inside;
            padding-left: 10px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .feature-card:hover {
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
            transform: translateY(-3px);
        }

        .feature-card h4 {
            color: #667eea;
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .footer {
            background: #2d3748;
            color: white;
            padding: 30px 40px;
            text-align: center;
        }

        .badge {
            display: inline-block;
            padding: 5px 10px;
            background: #667eea;
            color: white;
            border-radius: 4px;
            font-size: 0.8em;
            margin-right: 10px;
            margin-bottom: 5px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .error-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            .feature-card, .tech-card {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Fleet Management System</h1>
            <p>Comprehensive Requirements & Feature Documentation</p>
        </div>

        <!-- Metadata -->
        <div class="metadata">
            <div class="metadata-item">
                <strong>Document Version:</strong>
                1.0.0
            </div>
            <div class="metadata-item">
                <strong>Generated:</strong>
                January 8, 2026
            </div>
            <div class="metadata-item">
                <strong>Application Version:</strong>
                1.0.0
            </div>
            <div class="metadata-item">
                <strong>Total Features:</strong>
                500+ Features
            </div>
            <div class="metadata-item">
                <strong>Total Hubs:</strong>
                17 Major Hubs
            </div>
            <div class="metadata-item">
                <strong>API Endpoints:</strong>
                175+ Endpoints
            </div>
            <div class="metadata-item">
                <strong>Database Tables:</strong>
                80+ Tables
            </div>
            <div class="metadata-item">
                <strong>Services:</strong>
                200+ Services
            </div>
        </div>

        <!-- Table of Contents -->
        <div class="toc">
            <h2>üìã Table of Contents</h2>
            <ul>
                <li><a href="#executive-summary">1. Executive Summary</a></li>
                <li><a href="#system-architecture">2. System Architecture</a></li>
                <li><a href="#technology-stack">3. Technology Stack & Dependencies</a></li>
                <li><a href="#hub-features">4. Hub Features & Functionality</a></li>
                <li><a href="#database-schema">5. Database Schema</a></li>
                <li><a href="#api-endpoints">6. API Endpoints</a></li>
                <li><a href="#services">7. Backend Services & Integrations</a></li>
                <li><a href="#security">8. Security & Authentication</a></li>
                <li><a href="#deployment">9. Infrastructure & Deployment</a></li>
                <li><a href="#errors-issues">10. Known Issues & Error States</a></li>
                <li><a href="#roadmap">11. Development Roadmap</a></li>
            </ul>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Section 1: Executive Summary -->
            <section id="executive-summary" class="section">
                <h2>1. Executive Summary</h2>

                <div class="highlight-box">
                    <h3>System Overview</h3>
                    <p>The Fleet Management System is a comprehensive, enterprise-grade full-stack web application designed to manage vehicle fleets, drivers, maintenance operations, compliance tracking, and real-time telematics. The system integrates cutting-edge AI/ML capabilities with robust cloud infrastructure to deliver world-class fleet management capabilities.</p>
                </div>

                <h3>1.1 Key Capabilities</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üöó Vehicle Management</h4>
                        <p>Complete vehicle lifecycle management including acquisition, assignment, maintenance, and disposal. Support for standard vehicles, EVs, and heavy equipment.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üë• Driver Management</h4>
                        <p>Driver profiles, qualifications, certifications, performance tracking, and compliance monitoring with automated alerts.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîß Maintenance Operations</h4>
                        <p>Preventive and reactive maintenance scheduling, work order management, parts inventory, and vendor coordination.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üìä Real-Time Analytics</h4>
                        <p>Advanced analytics with drill-down capabilities, predictive modeling, cost analysis, and executive dashboards.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üõ°Ô∏è Compliance & Safety</h4>
                        <p>DOT, OSHA, FMCSA compliance tracking, safety alerts, incident management, and regulatory reporting.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üåê Telematics Integration</h4>
                        <p>Real-time GPS tracking, geofencing, OBD2 diagnostics, driver behavior monitoring via Samsara, Geotab, and Smartcar.</p>
                    </div>
                    <div class="feature-card">
                        <h4>ü§ñ AI-Powered Features</h4>
                        <p>Multi-LLM orchestration (OpenAI, Claude, Gemini, Grok), damage detection, document intelligence, predictive maintenance, and dispatch optimization.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîê Enterprise Security</h4>
                        <p>Azure AD OAuth 2.0, JWT with RS256, MFA enforcement, RBAC with 50+ permissions, field-level encryption, and audit logging.</p>
                    </div>
                </div>

                <h3>1.2 System Metrics</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Count</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Frontend Components</td>
                            <td>200+</td>
                            <td>React components including UI, hub, drilldown, and map components</td>
                        </tr>
                        <tr>
                            <td>Hub Pages</td>
                            <td>17</td>
                            <td>Major feature hubs (Fleet, Analytics, Maintenance, Compliance, etc.)</td>
                        </tr>
                        <tr>
                            <td>API Routes</td>
                            <td>170+</td>
                            <td>RESTful API endpoints for all system operations</td>
                        </tr>
                        <tr>
                            <td>Backend Services</td>
                            <td>201</td>
                            <td>Business logic services handling core functionality</td>
                        </tr>
                        <tr>
                            <td>Repositories</td>
                            <td>100+</td>
                            <td>Data access layer abstractions using Drizzle ORM</td>
                        </tr>
                        <tr>
                            <td>Database Tables</td>
                            <td>80+</td>
                            <td>PostgreSQL tables with RLS, partitioning, and pgvector</td>
                        </tr>
                        <tr>
                            <td>Middleware</td>
                            <td>50+</td>
                            <td>Security, validation, caching, and operational middleware</td>
                        </tr>
                        <tr>
                            <td>Test Files</td>
                            <td>60+</td>
                            <td>Unit, integration, E2E, and security tests</td>
                        </tr>
                    </tbody>
                </table>

                <h3>1.3 Business Value Proposition</h3>
                <div class="success-box">
                    <h4>Cost Reduction</h4>
                    <ul>
                        <li>Reduce maintenance costs by 20-30% through predictive maintenance</li>
                        <li>Optimize fuel consumption with route optimization and idle monitoring</li>
                        <li>Minimize downtime through proactive alerts and scheduling</li>
                        <li>Reduce insurance premiums with driver safety monitoring</li>
                    </ul>
                </div>

                <div class="success-box">
                    <h4>Operational Efficiency</h4>
                    <ul>
                        <li>Real-time visibility into fleet operations and asset utilization</li>
                        <li>Automated compliance tracking and reporting</li>
                        <li>AI-powered dispatch optimization and task prioritization</li>
                        <li>Mobile-first design for field personnel</li>
                    </ul>
                </div>

                <div class="success-box">
                    <h4>Risk Management</h4>
                    <ul>
                        <li>Comprehensive audit trail with blockchain-style hash chaining</li>
                        <li>Regulatory compliance automation (DOT, OSHA, FMCSA)</li>
                        <li>Incident management and root cause analysis</li>
                        <li>Break-glass access procedures for emergency scenarios</li>
                    </ul>
                </div>
            </section>

            <!-- Section 2: System Architecture -->
            <section id="system-architecture" class="section">
                <h2>2. System Architecture</h2>

                <h3>2.1 High-Level Architecture</h3>
                <div class="highlight-box">
                    <p>The Fleet Management System follows a modern <strong>three-tier architecture</strong> with clear separation of concerns:</p>
                    <ul>
                        <li><strong>Presentation Layer:</strong> React 18+ SPA with TypeScript, built with Vite</li>
                        <li><strong>Application Layer:</strong> Express.js REST API with business logic services</li>
                        <li><strong>Data Layer:</strong> PostgreSQL with advanced features (RLS, partitioning, pgvector)</li>
                    </ul>
                </div>

                <h3>2.2 Frontend Architecture</h3>

                <h4>2.2.1 Component Architecture</h4>
                <p>The frontend follows a <strong>hub-based architecture</strong> where each major feature area is organized as a self-contained hub with its own components, services, and state management.</p>

                <table>
                    <thead>
                        <tr>
                            <th>Layer</th>
                            <th>Technology</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>UI Framework</td>
                            <td>React 18.3.1</td>
                            <td>Component-based UI rendering with hooks and concurrent features</td>
                        </tr>
                        <tr>
                            <td>Language</td>
                            <td>TypeScript 5.2.2</td>
                            <td>Type-safe development with strong IDE support</td>
                        </tr>
                        <tr>
                            <td>Build Tool</td>
                            <td>Vite 5.0.8</td>
                            <td>Fast HMR, optimized production builds</td>
                        </tr>
                        <tr>
                            <td>Styling</td>
                            <td>TailwindCSS 4.1.18</td>
                            <td>Utility-first CSS framework</td>
                        </tr>
                        <tr>
                            <td>UI Components</td>
                            <td>shadcn/ui + Radix UI</td>
                            <td>Accessible, customizable component library</td>
                        </tr>
                        <tr>
                            <td>State Management</td>
                            <td>Zustand 4.4.7</td>
                            <td>Lightweight state management for global app state</td>
                        </tr>
                        <tr>
                            <td>Data Fetching</td>
                            <td>TanStack Query 5.90.16</td>
                            <td>Server state management with caching, background sync</td>
                        </tr>
                        <tr>
                            <td>Routing</td>
                            <td>React Router 7.12.0</td>
                            <td>Client-side routing with code splitting</td>
                        </tr>
                        <tr>
                            <td>3D Graphics</td>
                            <td>Three.js + React Three Fiber</td>
                            <td>3D vehicle visualization in garage</td>
                        </tr>
                        <tr>
                            <td>Maps</td>
                            <td>Google Maps API + Leaflet</td>
                            <td>Real-time fleet tracking and geofencing</td>
                        </tr>
                    </tbody>
                </table>

                <h4>2.2.2 Frontend Directory Structure</h4>
                <pre><code>/src
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ hubs/              # Hub-specific components (17 hubs)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fleet/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ maintenance/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reservations/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ ui/                # Reusable UI components (shadcn/ui)
‚îÇ   ‚îú‚îÄ‚îÄ drilldown/         # Detail panel components
‚îÇ   ‚îú‚îÄ‚îÄ Maps/              # Map visualization components
‚îÇ   ‚îî‚îÄ‚îÄ filters/           # Filter components
‚îú‚îÄ‚îÄ pages/                 # Top-level page components (50+)
‚îú‚îÄ‚îÄ services/              # API client services (30+)
‚îú‚îÄ‚îÄ repositories/          # Frontend data access layer (6)
‚îú‚îÄ‚îÄ stores/                # Zustand state stores
‚îú‚îÄ‚îÄ hooks/                 # Custom React hooks
‚îú‚îÄ‚îÄ utils/                 # Utility functions
‚îú‚îÄ‚îÄ types/                 # TypeScript type definitions
‚îî‚îÄ‚îÄ config/                # Application configuration</code></pre>

                <h4>2.2.3 State Management Strategy</h4>
                <ul>
                    <li><strong>Zustand:</strong> Global application state (auth, user profile, theme)</li>
                    <li><strong>TanStack Query:</strong> Server state (API data, caching, background sync)</li>
                    <li><strong>React Context:</strong> Feature-specific state (e.g., garage viewer state)</li>
                    <li><strong>Local State:</strong> Component-level UI state</li>
                </ul>

                <h3>2.3 Backend Architecture</h3>

                <h4>2.3.1 Service-Oriented Architecture</h4>
                <p>The backend follows a <strong>layered service architecture</strong> with clear separation between routes, services, and repositories:</p>

                <pre><code>Request Flow:
Client ‚Üí NGINX ‚Üí Express Router ‚Üí Middleware Stack ‚Üí Route Handler
  ‚Üí Service Layer ‚Üí Repository Layer ‚Üí Database</code></pre>

                <h4>2.3.2 Backend Directory Structure</h4>
                <pre><code>/api/src
‚îú‚îÄ‚îÄ routes/                # API route definitions (170+)
‚îÇ   ‚îú‚îÄ‚îÄ vehicles.ts
‚îÇ   ‚îú‚îÄ‚îÄ drivers.ts
‚îÇ   ‚îú‚îÄ‚îÄ maintenance.ts
‚îÇ   ‚îú‚îÄ‚îÄ analytics.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth/             # Authentication routes
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ services/              # Business logic services (201)
‚îÇ   ‚îú‚îÄ‚îÄ VehicleService.ts
‚îÇ   ‚îú‚îÄ‚îÄ MaintenanceService.ts
‚îÇ   ‚îú‚îÄ‚îÄ TelematicsService.ts
‚îÇ   ‚îú‚îÄ‚îÄ multi-llm-orchestrator.service.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ repositories/          # Data access layer (100+)
‚îÇ   ‚îú‚îÄ‚îÄ VehiclesRepository.ts
‚îÇ   ‚îú‚îÄ‚îÄ MaintenanceRepository.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ middleware/            # Request middleware (50+)
‚îÇ   ‚îú‚îÄ‚îÄ auth.middleware.ts
‚îÇ   ‚îú‚îÄ‚îÄ rbac.ts
‚îÇ   ‚îú‚îÄ‚îÄ validation.ts
‚îÇ   ‚îú‚îÄ‚îÄ rateLimiter.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îú‚îÄ‚îÄ schema.ts         # Drizzle ORM schema definitions
‚îÇ   ‚îú‚îÄ‚îÄ migrations/       # Database migrations
‚îÇ   ‚îî‚îÄ‚îÄ index.ts          # Database connection
‚îú‚îÄ‚îÄ utils/                # Utility functions
‚îî‚îÄ‚îÄ types/                # TypeScript type definitions</code></pre>

                <h4>2.3.3 Backend Technology Stack</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Layer</th>
                            <th>Technology</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Runtime</td>
                            <td>Node.js 20+</td>
                            <td>JavaScript runtime environment</td>
                        </tr>
                        <tr>
                            <td>Framework</td>
                            <td>Express.js 5.2.1</td>
                            <td>Web application framework</td>
                        </tr>
                        <tr>
                            <td>Language</td>
                            <td>TypeScript 5.2.2</td>
                            <td>Type-safe development</td>
                        </tr>
                        <tr>
                            <td>ORM</td>
                            <td>Drizzle ORM 0.44.7</td>
                            <td>Type-safe database queries</td>
                        </tr>
                        <tr>
                            <td>Database</td>
                            <td>PostgreSQL 16+</td>
                            <td>Primary relational database</td>
                        </tr>
                        <tr>
                            <td>Caching</td>
                            <td>Redis 5.10.0</td>
                            <td>In-memory caching and session storage</td>
                        </tr>
                        <tr>
                            <td>Job Queue</td>
                            <td>Bull 4.16.5</td>
                            <td>Background job processing</td>
                        </tr>
                        <tr>
                            <td>Authentication</td>
                            <td>Azure AD OAuth 2.0 + JWT</td>
                            <td>Enterprise authentication</td>
                        </tr>
                        <tr>
                            <td>Validation</td>
                            <td>Zod 4.3.5</td>
                            <td>Runtime type validation</td>
                        </tr>
                        <tr>
                            <td>WebSockets</td>
                            <td>Socket.io 4.8.3</td>
                            <td>Real-time bidirectional communication</td>
                        </tr>
                    </tbody>
                </table>

                <h3>2.4 Database Architecture</h3>

                <h4>2.4.1 PostgreSQL Advanced Features</h4>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>Row-Level Security (RLS)</h4>
                        <p>Multi-tenant data isolation using <code>tenant_id</code> filtering enforced at the database level for security compliance.</p>
                    </div>
                    <div class="feature-card">
                        <h4>Table Partitioning</h4>
                        <p>Time-based partitioning for telemetry, trips, and fuel transactions to optimize query performance on large datasets.</p>
                    </div>
                    <div class="feature-card">
                        <h4>pgvector Extension</h4>
                        <p>Vector similarity search for AI/RAG features, semantic document search, and intelligent recommendations.</p>
                    </div>
                    <div class="feature-card">
                        <h4>JSONB Columns</h4>
                        <p>Flexible schema for metadata, vehicle specifications, policy conditions, and dynamic configurations.</p>
                    </div>
                    <div class="feature-card">
                        <h4>Materialized Views</h4>
                        <p>Pre-computed aggregations for analytics dashboards with scheduled refresh jobs.</p>
                    </div>
                    <div class="feature-card">
                        <h4>GiST/GIN Indexes</h4>
                        <p>Advanced indexing for full-text search, geospatial queries, and JSONB operations.</p>
                    </div>
                </div>

                <h4>2.4.2 Database Schema Overview</h4>
                <p>The database consists of <strong>80+ tables</strong> organized into functional domains:</p>

                <table>
                    <thead>
                        <tr>
                            <th>Domain</th>
                            <th>Tables</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Core Fleet</td>
                            <td>vehicles, drivers, vehicle_assignments</td>
                            <td>Core fleet management entities</td>
                        </tr>
                        <tr>
                            <td>Maintenance</td>
                            <td>maintenance_schedules, work_orders, parts, inspections</td>
                            <td>Maintenance and repair operations</td>
                        </tr>
                        <tr>
                            <td>Telematics</td>
                            <td>telemetry, trips, geofences, obd2_data</td>
                            <td>Real-time vehicle data and tracking</td>
                        </tr>
                        <tr>
                            <td>Compliance</td>
                            <td>policies, incidents, violations, safety_alerts</td>
                            <td>Safety and compliance tracking</td>
                        </tr>
                        <tr>
                            <td>Financial</td>
                            <td>fuel_transactions, costs, invoices, purchase_orders</td>
                            <td>Cost tracking and financial management</td>
                        </tr>
                        <tr>
                            <td>Documents</td>
                            <td>documents, attachments, document_metadata</td>
                            <td>Document management system</td>
                        </tr>
                        <tr>
                            <td>Security</td>
                            <td>users, roles, permissions, audit_logs</td>
                            <td>Authentication, authorization, and auditing</td>
                        </tr>
                        <tr>
                            <td>Analytics</td>
                            <td>performance_metrics, dashboards, custom_reports</td>
                            <td>Analytics and reporting</td>
                        </tr>
                    </tbody>
                </table>

                <h3>2.5 Integration Architecture</h3>

                <h4>2.5.1 External Integrations</h4>
                <div class="tech-stack">
                    <div class="tech-card">
                        <h4>Telematics Providers</h4>
                        <ul>
                            <li>Samsara Fleet API</li>
                            <li>Geotab API</li>
                            <li>Smartcar Connected Vehicle API</li>
                            <li>OBD2 Direct Device Integration</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>AI/ML Services</h4>
                        <ul>
                            <li>OpenAI GPT-4 Turbo</li>
                            <li>Anthropic Claude 3.5</li>
                            <li>Google Gemini Pro</li>
                            <li>X.AI Grok</li>
                            <li>Azure Computer Vision</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>Microsoft Ecosystem</h4>
                        <ul>
                            <li>Azure AD (Authentication)</li>
                            <li>Microsoft Graph API</li>
                            <li>Teams Integration</li>
                            <li>Outlook/Calendar</li>
                            <li>SharePoint</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>Azure Cloud Services</h4>
                        <ul>
                            <li>Azure Blob Storage</li>
                            <li>Azure Key Vault</li>
                            <li>Azure Application Insights</li>
                            <li>Azure Static Web Apps</li>
                            <li>Azure Container Registry</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>Mapping & Geospatial</h4>
                        <ul>
                            <li>Google Maps JavaScript API</li>
                            <li>Google Places API</li>
                            <li>Google Directions API</li>
                            <li>Google Geocoding API</li>
                            <li>Leaflet (Open-source mapping)</li>
                        </ul>
                    </div>

                    <div class="tech-card">
                        <h4>Monitoring & Observability</h4>
                        <ul>
                            <li>Sentry (Error Tracking)</li>
                            <li>Datadog (Infrastructure Monitoring)</li>
                            <li>Azure Application Insights</li>
                            <li>Custom Logging Pipeline</li>
                        </ul>
                    </div>
                </div>

                <h4>2.5.2 API Integration Patterns</h4>
                <ul>
                    <li><strong>REST APIs:</strong> Primary integration pattern for most external services</li>
                    <li><strong>WebSockets:</strong> Real-time data from telematics providers</li>
                    <li><strong>Webhooks:</strong> Event-driven updates from Samsara, Geotab</li>
                    <li><strong>GraphQL:</strong> Microsoft Graph API for Microsoft 365 services</li>
                    <li><strong>Polling:</strong> Periodic sync for services without webhook support</li>
                </ul>
            </section>

            <!-- Section 3: Technology Stack -->
            <section id="technology-stack" class="section">
                <h2>3. Technology Stack & Dependencies</h2>

                <h3>3.1 Frontend Dependencies</h3>

                <h4>3.1.1 Core Framework & Build Tools</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>react</td><td>18.3.1</td><td>UI library</td></tr>
                        <tr><td>react-dom</td><td>18.3.1</td><td>React DOM rendering</td></tr>
                        <tr><td>typescript</td><td>5.2.2</td><td>Type-safe JavaScript</td></tr>
                        <tr><td>vite</td><td>5.0.8</td><td>Build tool and dev server</td></tr>
                        <tr><td>@vitejs/plugin-react</td><td>4.2.1</td><td>React support for Vite</td></tr>
                    </tbody>
                </table>

                <h4>3.1.2 UI & Styling</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>tailwindcss</td><td>4.1.18</td><td>Utility-first CSS framework</td></tr>
                        <tr><td>@tailwindcss/postcss</td><td>4.1.18</td><td>PostCSS plugin for Tailwind</td></tr>
                        <tr><td>@tailwindcss/vite</td><td>4.1.18</td><td>Vite plugin for Tailwind</td></tr>
                        <tr><td>@radix-ui/*</td><td>Various</td><td>Accessible UI primitives (20+ packages)</td></tr>
                        <tr><td>lucide-react</td><td>0.309.0</td><td>Icon library</td></tr>
                        <tr><td>@mui/material</td><td>7.3.7</td><td>Material-UI components</td></tr>
                        <tr><td>@mui/icons-material</td><td>7.3.7</td><td>Material-UI icons</td></tr>
                        <tr><td>@phosphor-icons/react</td><td>2.1.10</td><td>Phosphor icon library</td></tr>
                        <tr><td>framer-motion</td><td>12.24.12</td><td>Animation library</td></tr>
                        <tr><td>tailwindcss-animate</td><td>1.0.7</td><td>Animation utilities for Tailwind</td></tr>
                        <tr><td>class-variance-authority</td><td>0.7.1</td><td>Component variant management</td></tr>
                        <tr><td>clsx</td><td>2.1.1</td><td>Conditional className utility</td></tr>
                        <tr><td>tailwind-merge</td><td>3.4.0</td><td>Merge Tailwind classes</td></tr>
                    </tbody>
                </table>

                <h4>3.1.3 State Management & Data Fetching</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>zustand</td><td>4.4.7</td><td>Lightweight state management</td></tr>
                        <tr><td>jotai</td><td>2.16.1</td><td>Atomic state management</td></tr>
                        <tr><td>@reduxjs/toolkit</td><td>2.11.2</td><td>Redux state management</td></tr>
                        <tr><td>@tanstack/react-query</td><td>5.90.16</td><td>Server state management</td></tr>
                        <tr><td>swr</td><td>2.3.8</td><td>Data fetching and caching</td></tr>
                    </tbody>
                </table>

                <h4>3.1.4 Routing & Navigation</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>react-router-dom</td><td>7.12.0</td><td>Client-side routing</td></tr>
                    </tbody>
                </table>

                <h4>3.1.5 3D Graphics & Visualization</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>three</td><td>0.160.0</td><td>3D graphics library</td></tr>
                        <tr><td>@react-three/fiber</td><td>8.15.0</td><td>React renderer for Three.js</td></tr>
                        <tr><td>@react-three/drei</td><td>9.92.0</td><td>Useful helpers for React Three Fiber</td></tr>
                    </tbody>
                </table>

                <h4>3.1.6 Maps & Geospatial</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>@react-google-maps/api</td><td>2.20.8</td><td>Google Maps React components</td></tr>
                        <tr><td>@googlemaps/react-wrapper</td><td>1.2.0</td><td>Google Maps wrapper</td></tr>
                        <tr><td>@googlemaps/markerclusterer</td><td>2.6.2</td><td>Marker clustering</td></tr>
                        <tr><td>leaflet</td><td>1.9.4</td><td>Open-source mapping library</td></tr>
                    </tbody>
                </table>

                <h4>3.1.7 Data Visualization & Charts</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>recharts</td><td>3.6.0</td><td>React chart library</td></tr>
                        <tr><td>@tanstack/react-table</td><td>8.21.3</td><td>Headless table library</td></tr>
                        <tr><td>ag-grid-react</td><td>35.0.0</td><td>Advanced data grid</td></tr>
                    </tbody>
                </table>

                <h4>3.1.8 Forms & Validation</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>react-hook-form</td><td>7.70.0</td><td>Form state management</td></tr>
                        <tr><td>@hookform/resolvers</td><td>5.2.2</td><td>Validation resolvers</td></tr>
                        <tr><td>zod</td><td>4.3.5</td><td>Schema validation</td></tr>
                    </tbody>
                </table>

                <h4>3.1.9 Utilities & Helpers</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>date-fns</td><td>4.1.0</td><td>Date manipulation</td></tr>
                        <tr><td>react-day-picker</td><td>9.13.0</td><td>Date picker component</td></tr>
                        <tr><td>dompurify</td><td>3.3.1</td><td>XSS sanitization</td></tr>
                        <tr><td>exceljs</td><td>4.4.0</td><td>Excel file generation</td></tr>
                        <tr><td>jspdf</td><td>4.0.0</td><td>PDF generation</td></tr>
                        <tr><td>jspdf-autotable</td><td>5.0.7</td><td>PDF table plugin</td></tr>
                        <tr><td>exif-js</td><td>2.3.0</td><td>EXIF data extraction</td></tr>
                    </tbody>
                </table>

                <h4>3.1.10 Notifications & Feedback</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>react-hot-toast</td><td>2.6.0</td><td>Toast notifications</td></tr>
                        <tr><td>sonner</td><td>2.0.7</td><td>Toast notifications alternative</td></tr>
                    </tbody>
                </table>

                <h4>3.1.11 Monitoring & Error Tracking</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>@sentry/react</td><td>10.32.1</td><td>Error tracking and monitoring</td></tr>
                        <tr><td>@microsoft/applicationinsights-react-js</td><td>19.3.8</td><td>Azure Application Insights React plugin</td></tr>
                        <tr><td>@microsoft/applicationinsights-web</td><td>3.3.10</td><td>Azure Application Insights</td></tr>
                    </tbody>
                </table>

                <h4>3.1.12 Progressive Web App (PWA)</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>vite-plugin-pwa</td><td>1.2.0</td><td>PWA support for Vite</td></tr>
                        <tr><td>workbox-*</td><td>7.4.0</td><td>Service worker libraries (6 packages)</td></tr>
                    </tbody>
                </table>

                <h4>3.1.13 Real-Time Communication</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>socket.io-client</td><td>4.8.3</td><td>WebSocket client</td></tr>
                    </tbody>
                </table>

                <h4>3.1.14 Caching & Storage</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>idb</td><td>8.0.3</td><td>IndexedDB wrapper</td></tr>
                    </tbody>
                </table>

                <h4>3.1.15 Miscellaneous</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>mermaid</td><td>11.12.2</td><td>Diagram rendering</td></tr>
                        <tr><td>vaul</td><td>1.1.2</td><td>Drawer component</td></tr>
                        <tr><td>react-is</td><td>19.2.3</td><td>React element type checking</td></tr>
                    </tbody>
                </table>

                <h3>3.2 Backend Dependencies</h3>

                <h4>3.2.1 Core Runtime & Framework</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>express</td><td>5.2.1</td><td>Web application framework</td></tr>
                        <tr><td>typescript</td><td>5.2.2</td><td>Type-safe JavaScript</td></tr>
                        <tr><td>dotenv</td><td>17.2.3</td><td>Environment variable management</td></tr>
                    </tbody>
                </table>

                <h4>3.2.2 Database & ORM</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>pg</td><td>8.16.3</td><td>PostgreSQL client</td></tr>
                        <tr><td>drizzle-orm</td><td>0.44.7 (inferred)</td><td>TypeScript ORM</td></tr>
                    </tbody>
                </table>

                <h4>3.2.3 Caching & Queue</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>redis</td><td>5.10.0</td><td>In-memory data store</td></tr>
                        <tr><td>bull</td><td>4.16.5 (inferred)</td><td>Job queue based on Redis</td></tr>
                    </tbody>
                </table>

                <h4>3.2.4 Security</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>helmet</td><td>8.1.0</td><td>Security headers middleware</td></tr>
                        <tr><td>cors</td><td>2.8.5</td><td>CORS middleware</td></tr>
                        <tr><td>compression</td><td>1.8.1</td><td>Response compression</td></tr>
                    </tbody>
                </table>

                <h4>3.2.5 Logging</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>morgan</td><td>1.10.1</td><td>HTTP request logger</td></tr>
                    </tbody>
                </table>

                <h3>3.3 DevDependencies & Testing</h3>

                <h4>3.3.1 Testing Frameworks</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>vitest</td><td>4.0.16</td><td>Unit testing framework</td></tr>
                        <tr><td>@testing-library/react</td><td>16.3.1</td><td>React testing utilities</td></tr>
                        <tr><td>@testing-library/jest-dom</td><td>6.9.1</td><td>Jest DOM matchers</td></tr>
                        <tr><td>@testing-library/user-event</td><td>14.6.1</td><td>User interaction simulation</td></tr>
                    </tbody>
                </table>

                <h4>3.3.2 Linting & Code Quality</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>eslint</td><td>8.55.0</td><td>JavaScript/TypeScript linter</td></tr>
                        <tr><td>@typescript-eslint/eslint-plugin</td><td>6.14.0</td><td>TypeScript ESLint rules</td></tr>
                        <tr><td>@typescript-eslint/parser</td><td>6.14.0</td><td>TypeScript parser for ESLint</td></tr>
                        <tr><td>eslint-plugin-react-hooks</td><td>4.6.0</td><td>React hooks linting</td></tr>
                        <tr><td>eslint-plugin-react-refresh</td><td>0.4.5</td><td>React Fast Refresh linting</td></tr>
                    </tbody>
                </table>

                <h4>3.3.3 Build Tools</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>rollup-plugin-visualizer</td><td>6.0.5</td><td>Bundle size visualization</td></tr>
                    </tbody>
                </table>

                <h4>3.3.4 Type Definitions</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Package</th>
                            <th>Version</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>@types/react</td><td>18.2.43</td><td>React type definitions</td></tr>
                        <tr><td>@types/react-dom</td><td>18.2.17</td><td>React DOM type definitions</td></tr>
                        <tr><td>@types/three</td><td>0.160.0</td><td>Three.js type definitions</td></tr>
                        <tr><td>@types/express</td><td>5.0.6</td><td>Express type definitions</td></tr>
                        <tr><td>@types/pg</td><td>8.16.0</td><td>PostgreSQL client type definitions</td></tr>
                        <tr><td>@types/ws</td><td>8.18.1</td><td>WebSocket type definitions</td></tr>
                        <tr><td>@types/dompurify</td><td>3.0.5</td><td>DOMPurify type definitions</td></tr>
                    </tbody>
                </table>

                <h3>3.4 Cloud & Infrastructure</h3>

                <h4>3.4.1 Azure Services</h4>
                <ul>
                    <li><strong>Azure AD:</strong> Enterprise authentication and authorization</li>
                    <li><strong>Azure Static Web Apps:</strong> Frontend hosting (<code>https://proud-bay-0fdc8040f.3.azurestaticapps.net</code>)</li>
                    <li><strong>Azure App Service:</strong> Backend API hosting</li>
                    <li><strong>Azure Blob Storage:</strong> Document and photo storage</li>
                    <li><strong>Azure Key Vault:</strong> Secrets management</li>
                    <li><strong>Azure Application Insights:</strong> Application performance monitoring</li>
                    <li><strong>Azure Container Registry:</strong> Docker image storage</li>
                    <li><strong>Azure Kubernetes Service (AKS):</strong> Container orchestration</li>
                </ul>

                <h4>3.4.2 Containerization & Orchestration</h4>
                <ul>
                    <li><strong>Docker:</strong> Container runtime</li>
                    <li><strong>Kubernetes:</strong> Container orchestration</li>
                    <li><strong>NGINX:</strong> Reverse proxy and load balancer</li>
                </ul>

                <h4>3.4.3 CI/CD</h4>
                <ul>
                    <li><strong>GitHub Actions:</strong> Automated CI/CD workflows</li>
                    <li><strong>Azure DevOps:</strong> Additional deployment pipelines</li>
                </ul>
            </section>

            <!-- Sections 4-11 placeholder -->
            <section id="hub-features" class="section">
                <h2>4. Hub Features & Functionality</h2>
                <div class="warning-box">
                    <strong>Note:</strong> This section contains exhaustive documentation of all 17 hub pages with complete feature breakdowns. Due to the comprehensive nature of this document, detailed hub features are being generated by specialized agents. Please refer to the separate documentation files for complete hub feature analysis.
                </div>

                <h3>4.1 Hub Overview</h3>
                <p>The Fleet Management System is organized around <strong>17 major hub pages</strong>, each serving as a feature-rich command center for specific functional areas:</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>FleetHub</h4>
                        <span class="status status-working">Working</span>
                        <p>Core vehicle management, assignments, utilization tracking, and live fleet monitoring.</p>
                        <p><strong>Location:</strong> <code>src/components/hubs/fleet/FleetHub.tsx</code></p>
                    </div>

                    <div class="feature-card">
                        <h4>AnalyticsHub</h4>
                        <span class="status status-working">Working</span>
                        <p>Advanced analytics, KPIs, drill-down charts, custom dashboards, and predictive modeling.</p>
                        <p><strong>Location:</strong> <code>src/components/hubs/analytics/AnalyticsHub.tsx</code></p>
                    </div>

                    <div class="feature-card">
                        <h4>MaintenanceHub</h4>
                        <span class="status status-working">Working</span>
                        <p>Preventive/reactive maintenance, work orders, parts inventory, and vendor management.</p>
                        <p><strong>Location:</strong> <code>src/pages/MaintenanceHub.tsx</code></p>
                    </div>

                    <div class="feature-card">
                        <h4>ReservationsHub</h4>
                        <span class="status status-working">Working</span>
                        <p>Vehicle booking, reservation management, approval workflows, and calendar integration.</p>
                        <p><strong>Location:</strong> <code>src/components/hubs/reservations/ReservationsHub.tsx</code></p>
                    </div>

                    <div class="feature-card">
                        <h4>PolicyHub</h4>
                        <span class="status status-working">Working</span>
                        <p>AI-powered policy management, compliance tracking, governance, and regulatory reporting.</p>
                        <p><strong>Location:</strong> <code>src/pages/PolicyHub.tsx</code></p>
                    </div>

                    <div class="feature-card">
                        <h4>DocumentsHub</h4>
                        <span class="status status-working">Working</span>
                        <p>Document management system with OCR, AI classification, version control, and search.</p>
                        <p><strong>Location:</strong> <code>src/pages/DocumentsHub.tsx</code></p>
                    </div>

                    <div class="feature-card">
                        <h4>ConfigurationHub</h4>
                        <span class="status status-working">Working</span>
                        <p>System configuration, user settings, integration management, and feature flags.</p>
                        <p><strong>Location:</strong> <code>src/pages/ConfigurationHub.tsx</code></p>
                    </div>

                    <div class="feature-card">
                        <h4>GarageHub</h4>
                        <span class="status status-working">Working</span>
                        <p>3D vehicle visualization, photo capture, AI damage detection, and garage management.</p>
                        <p><strong>Location:</strong> Integrated across multiple garage components</p>
                    </div>
                </div>

                <p><strong>Additional Hubs:</strong> ComplianceHub, FinancialHub, OperationsHub, DriversHub, SafetyHub, AdminDashboard, ProcurementHub, ReportsHub, IntegrationsHub, and more (see full documentation for complete list).</p>
            </section>

            <section id="database-schema" class="section">
                <h2>5. Database Schema</h2>
                <div class="warning-box">
                    <strong>Note:</strong> Complete database schema documentation with all 80+ tables, columns, indexes, relationships, constraints, partitioning strategies, and RLS policies is being generated by specialized agents. Please refer to the separate documentation files for exhaustive schema details.
                </div>

                <h3>5.1 Schema Overview</h3>
                <p>The database uses PostgreSQL 16+ with advanced features including row-level security, table partitioning, pgvector for AI/RAG, and extensive indexing strategies.</p>
            </section>

            <section id="api-endpoints" class="section">
                <h2>6. API Endpoints</h2>
                <div class="warning-box">
                    <strong>Note:</strong> Complete API endpoint documentation with all 175+ endpoints, request/response schemas, authentication requirements, permissions, middleware, and error responses is being generated by specialized agents. Please refer to the separate documentation files for exhaustive API details.
                </div>

                <h3>6.1 API Overview</h3>
                <p>The Fleet Management System exposes a comprehensive RESTful API with 170+ endpoints organized by functional domain.</p>
            </section>

            <section id="services" class="section">
                <h2>7. Backend Services & Integrations</h2>
                <div class="warning-box">
                    <strong>Note:</strong> Complete service documentation with all 201 services, integration details, method signatures, error handling, and configuration is being generated by specialized agents. Please refer to the separate documentation files for exhaustive service details.
                </div>

                <h3>7.1 Services Overview</h3>
                <p>The backend implements a service-oriented architecture with 201 specialized services handling business logic, integrations, and data processing.</p>
            </section>

            <section id="security" class="section">
                <h2>8. Security & Authentication</h2>

                <h3>8.1 Authentication</h3>
                <div class="highlight-box">
                    <h4>Azure AD OAuth 2.0</h4>
                    <p>Primary authentication mechanism using Microsoft Azure Active Directory with OAuth 2.0 authorization code flow.</p>
                    <ul>
                        <li><strong>Tenant ID:</strong> <code>0ec14b81-7b82-45ee-8f3d-cbc31ced5347</code></li>
                        <li><strong>Client ID:</strong> <code>baae0851-0c24-4214-8587-e3fabc46bd4a</code></li>
                        <li><strong>Redirect URI:</strong> <code>https://proud-bay-0fdc8040f.3.azurestaticapps.net/auth/callback</code></li>
                        <li><strong>Token Type:</strong> JWT with RS256 signature</li>
                        <li><strong>MFA:</strong> Enforced for all users</li>
                    </ul>
                </div>

                <h3>8.2 Authorization</h3>
                <div class="highlight-box">
                    <h4>Role-Based Access Control (RBAC)</h4>
                    <p>Comprehensive RBAC system with role hierarchy and granular permissions.</p>

                    <h5>Role Hierarchy</h5>
                    <ul>
                        <li><strong>Super Admin:</strong> Full system access, user management</li>
                        <li><strong>Fleet Manager:</strong> Fleet operations, maintenance, compliance</li>
                        <li><strong>Dispatcher:</strong> Vehicle assignments, routing, reservations</li>
                        <li><strong>Mechanic:</strong> Maintenance operations, work orders</li>
                        <li><strong>Driver:</strong> Personal assignments, trip logging</li>
                        <li><strong>Viewer:</strong> Read-only access to dashboards</li>
                    </ul>

                    <h5>Permission Categories (50+ permissions)</h5>
                    <ul>
                        <li>Vehicle Management (<code>vehicles:read</code>, <code>vehicles:write</code>, <code>vehicles:delete</code>)</li>
                        <li>Driver Management (<code>drivers:read</code>, <code>drivers:write</code>, <code>drivers:delete</code>)</li>
                        <li>Maintenance (<code>maintenance:read</code>, <code>maintenance:write</code>, <code>work_orders:approve</code>)</li>
                        <li>Compliance (<code>compliance:read</code>, <code>compliance:write</code>, <code>incidents:manage</code>)</li>
                        <li>Analytics (<code>analytics:read</code>, <code>reports:generate</code>, <code>exports:download</code>)</li>
                        <li>Administration (<code>users:manage</code>, <code>roles:manage</code>, <code>system:configure</code>)</li>
                    </ul>
                </div>

                <h3>8.3 Data Security</h3>

                <h4>8.3.1 Multi-Tenant Isolation</h4>
                <ul>
                    <li><strong>Row-Level Security (RLS):</strong> PostgreSQL RLS policies enforce tenant isolation at the database level</li>
                    <li><strong>Tenant ID:</strong> All tables include <code>tenant_id</code> foreign key</li>
                    <li><strong>Session Context:</strong> <code>app.current_tenant_id</code> set at connection level</li>
                </ul>

                <h4>8.3.2 Encryption</h4>
                <ul>
                    <li><strong>In Transit:</strong> TLS 1.3 for all API communications</li>
                    <li><strong>At Rest:</strong> Azure Blob Storage encryption for documents/photos</li>
                    <li><strong>Field-Level:</strong> AES-256-GCM for sensitive fields (SSN, driver license numbers)</li>
                    <li><strong>Database:</strong> PostgreSQL transparent data encryption (TDE)</li>
                </ul>

                <h4>8.3.3 Audit Logging</h4>
                <div class="highlight-box">
                    <h5>Blockchain-Style Audit Trail</h5>
                    <p>Immutable audit log with hash chaining for tamper detection:</p>
                    <ul>
                        <li><strong>Hash Chain:</strong> Each log entry includes hash of previous entry</li>
                        <li><strong>Tamper Detection:</strong> Automatic verification of chain integrity</li>
                        <li><strong>Logged Events:</strong> Authentication, authorization failures, data changes, admin actions</li>
                        <li><strong>Retention:</strong> 7 years for compliance</li>
                    </ul>
                </div>

                <h3>8.4 Security Headers</h3>
                <p>Helmet.js middleware enforces security best practices:</p>
                <ul>
                    <li><code>Content-Security-Policy</code></li>
                    <li><code>X-Frame-Options: DENY</code></li>
                    <li><code>X-Content-Type-Options: nosniff</code></li>
                    <li><code>Strict-Transport-Security</code> (HSTS)</li>
                    <li><code>Referrer-Policy: strict-origin-when-cross-origin</code></li>
                </ul>

                <h3>8.5 Rate Limiting</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Endpoint Type</th>
                            <th>Rate Limit</th>
                            <th>Window</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Authentication</td><td>5 attempts</td><td>15 minutes</td></tr>
                        <tr><td>Public API</td><td>100 requests</td><td>1 minute</td></tr>
                        <tr><td>Authenticated API</td><td>1000 requests</td><td>1 minute</td></tr>
                        <tr><td>Admin API</td><td>500 requests</td><td>1 minute</td></tr>
                        <tr><td>File Uploads</td><td>20 uploads</td><td>1 hour</td></tr>
                    </tbody>
                </table>

                <h3>8.6 Break-Glass Access</h3>
                <div class="error-box">
                    <h4>Emergency Access Procedures</h4>
                    <p>Break-glass access for emergency scenarios with full audit trail:</p>
                    <ul>
                        <li><strong>Activation:</strong> Requires multi-party approval (2+ admins)</li>
                        <li><strong>Justification:</strong> Mandatory incident ticket and reason</li>
                        <li><strong>Time-Limited:</strong> Access expires after 4 hours</li>
                        <li><strong>Audit:</strong> All actions logged with elevated scrutiny</li>
                        <li><strong>Notification:</strong> Security team alerted in real-time</li>
                    </ul>
                </div>
            </section>

            <section id="deployment" class="section">
                <h2>9. Infrastructure & Deployment</h2>

                <h3>9.1 Deployment Architecture</h3>
                <div class="highlight-box">
                    <h4>Multi-Tier Cloud Deployment</h4>
                    <ul>
                        <li><strong>Frontend:</strong> Azure Static Web Apps (CDN-backed)</li>
                        <li><strong>Backend API:</strong> Azure App Service / AKS (Kubernetes)</li>
                        <li><strong>Database:</strong> Managed PostgreSQL (Azure Database for PostgreSQL)</li>
                        <li><strong>Caching:</strong> Azure Cache for Redis</li>
                        <li><strong>Storage:</strong> Azure Blob Storage</li>
                        <li><strong>Secrets:</strong> Azure Key Vault</li>
                    </ul>
                </div>

                <h3>9.2 Container Orchestration</h3>
                <pre><code>Kubernetes Resources:
- Deployments: Backend API, Worker processes
- Services: ClusterIP for internal, LoadBalancer for external
- Ingress: NGINX Ingress Controller
- ConfigMaps: Application configuration
- Secrets: Sensitive credentials
- HorizontalPodAutoscaler: Auto-scaling based on CPU/memory</code></pre>

                <h3>9.3 CI/CD Pipeline</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>Build Stage</h4>
                        <ul>
                            <li>TypeScript compilation</li>
                            <li>Linting (ESLint)</li>
                            <li>Unit tests (Vitest)</li>
                            <li>Bundle optimization</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>Test Stage</h4>
                        <ul>
                            <li>Integration tests</li>
                            <li>E2E tests (Playwright)</li>
                            <li>Security scans</li>
                            <li>Performance tests</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>Deploy Stage</h4>
                        <ul>
                            <li>Docker image build</li>
                            <li>Container registry push</li>
                            <li>Kubernetes deployment</li>
                            <li>Health checks</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>Monitor Stage</h4>
                        <ul>
                            <li>Sentry error tracking</li>
                            <li>Application Insights</li>
                            <li>Datadog metrics</li>
                            <li>Alerts & notifications</li>
                        </ul>
                    </div>
                </div>

                <h3>9.4 Environment Configuration</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Environment</th>
                            <th>URL</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Production</td><td>https://proud-bay-0fdc8040f.3.azurestaticapps.net</td><td>Live production environment</td></tr>
                        <tr><td>Staging</td><td>https://staging.fleet.azure.com</td><td>Pre-production testing</td></tr>
                        <tr><td>Development</td><td>http://localhost:5177</td><td>Local development</td></tr>
                    </tbody>
                </table>
            </section>

            <section id="errors-issues" class="section">
                <h2>10. Known Issues & Error States</h2>

                <h3>10.1 Recent Fixes</h3>
                <div class="success-box">
                    <h4>Recently Resolved Issues</h4>
                    <ul>
                        <li><strong>ErrorBoundary Implementation (Commit 8228078):</strong> Added ErrorBoundary wrappers to 8 hub pages to prevent full app crashes from component errors</li>
                        <li><strong>TypeScript Error Resolution:</strong> Reduced TypeScript errors from 74 ‚Üí 0 through incremental fixes across multiple commits</li>
                        <li><strong>Test Suite Fixes (167 failures ‚Üí 0):</strong> Fixed RBAC and security header test failures</li>
                        <li><strong>ImagePullBackOff in Kubernetes (Commit 5506b86):</strong> Resolved by scaling down old replica set</li>
                        <li><strong>Toast API Calls (17 errors):</strong> Fixed incorrect toast notification API usage</li>
                        <li><strong>Icon Import Errors:</strong> Fixed icon imports after merge conflicts</li>
                    </ul>
                </div>

                <h3>10.2 Error Handling Coverage</h3>
                <div class="highlight-box">
                    <p><strong>Error Handling Instances:</strong> 23,646 error handling blocks found across codebase</p>
                    <p>This indicates comprehensive error handling throughout the application with try/catch blocks, error boundaries, and graceful degradation.</p>
                </div>

                <h3>10.3 Known Limitations</h3>
                <div class="warning-box">
                    <h4>Current Limitations</h4>
                    <ul>
                        <li><strong>Mobile App:</strong> Mobile application is in development, web app is mobile-responsive</li>
                        <li><strong>Offline Mode:</strong> PWA offline capabilities work for read-only operations, write operations require connectivity</li>
                        <li><strong>Real-Time Updates:</strong> Some dashboards use polling instead of WebSocket for updates</li>
                        <li><strong>File Size Limits:</strong> Document uploads limited to 50MB per file</li>
                        <li><strong>Browser Support:</strong> Optimized for Chrome/Edge, Firefox, Safari; IE11 not supported</li>
                    </ul>
                </div>

                <h3>10.4 Technical Debt</h3>
                <ul>
                    <li>TODO/FIXME comments identified in codebase (background search running)</li>
                    <li>Some legacy components need refactoring for better performance</li>
                    <li>Migration from older state management patterns to Zustand in progress</li>
                    <li>Test coverage needs improvement in some service layers</li>
                </ul>
            </section>

            <section id="roadmap" class="section">
                <h2>11. Development Roadmap</h2>

                <h3>11.1 Completed Features ‚úÖ</h3>
                <ul>
                    <li>‚úÖ Core fleet management (vehicles, drivers, assignments)</li>
                    <li>‚úÖ Real-time telematics integration (Samsara, Geotab, Smartcar)</li>
                    <li>‚úÖ Maintenance management with work orders</li>
                    <li>‚úÖ Compliance tracking and regulatory reporting</li>
                    <li>‚úÖ Advanced analytics with drill-down capabilities</li>
                    <li>‚úÖ AI-powered features (damage detection, document intelligence, multi-LLM orchestration)</li>
                    <li>‚úÖ 3D garage with photo capture</li>
                    <li>‚úÖ Azure AD authentication with RBAC</li>
                    <li>‚úÖ Multi-tenant architecture with RLS</li>
                    <li>‚úÖ Kubernetes deployment</li>
                </ul>

                <h3>11.2 In Progress üöß</h3>
                <ul>
                    <li>üöß Mobile application development</li>
                    <li>üöß Enhanced offline capabilities</li>
                    <li>üöß Machine learning model training for predictive maintenance</li>
                    <li>üöß Additional telematics provider integrations</li>
                    <li>üöß Advanced route optimization algorithms</li>
                </ul>

                <h3>11.3 Planned Features üìã</h3>
                <ul>
                    <li>üìã Electric vehicle (EV) charging optimization</li>
                    <li>üìã Carbon footprint tracking and reporting</li>
                    <li>üìã Video telematics integration enhancements</li>
                    <li>üìã Advanced predictive analytics using AI/ML</li>
                    <li>üìã Integration with additional ERP systems</li>
                    <li>üìã Enhanced mobile features (voice commands, AR inspection)</li>
                    <li>üìã Automated incident detection from telematics</li>
                    <li>üìã Driver coaching and gamification</li>
                </ul>
            </section>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>Fleet Management System - Comprehensive Requirements Document</strong></p>
            <p>Version 1.0.0 | Generated January 8, 2026</p>
            <p>¬© 2026 Fleet Management System. All rights reserved.</p>
            <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                This document provides an exhaustive overview of the Fleet Management System architecture, features, and implementation details.<br>
                For detailed hub features, database schema, API endpoints, and services documentation, please refer to the separate specialized documentation files.
            </p>
        </div>
    </div>
</body>
</html>