/**
 * AdminConfigurationHub - Consolidated Administration & Configuration Dashboard
 *
 * Consolidates:
 * - AdminHub (user management, system administration)
 * - CTAConfigurationHub (CTA-specific settings)
 * - DataGovernanceHub (data management, compliance)
 * - IntegrationsHub (third-party integrations, APIs)
 * - DocumentsHub (document management, templates)
 *
 * Features:
 * - System administration and user management
 * - Application configuration and settings
 * - Data governance and compliance
 * - Integration management
 * - Document repository and templates
 * - WCAG 2.1 AA accessibility
 * - Performance optimized
 */

import { useState, Suspense, lazy, memo } from 'react'
import { motion, AnimatePresence } from 'framer-motion'
import {
  Settings,
  Users,
  Shield,
  Database,
  Plug,
  FileText,
  Key,
  Lock,
  Server,
  HardDrive,
  Globe,
  Code,
  Webhook,
  Link,
  CloudCog,
  UserCog,
  Sliders,
  ToggleLeft,
  Bell,
  Mail,
  Palette,
  Languages,
  Clock,
  Activity,
  FileCheck,
  FolderOpen,
  Upload,
  Download,
  Archive,
  Bookmark,
  Tag,
  Search
} from 'lucide-react'
import HubPage from '@/components/ui/hub-page'
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import { Skeleton } from '@/components/ui/skeleton'
import { Alert, AlertDescription } from '@/components/ui/alert'
import { Button } from '@/components/ui/button'
import ErrorBoundary from '@/components/common/ErrorBoundary'
import { useAuth } from '@/contexts/AuthContext'
import toast from 'react-hot-toast'
import logger from '@/utils/logger';
import {
  StatCard,
  ResponsiveBarChart,
  ResponsiveLineChart,
  ResponsivePieChart,
} from '@/components/visualizations'

// ============================================================================
// ANIMATION VARIANTS
// ============================================================================

const fadeInVariant = {
  hidden: { opacity: 0, y: 20 },
  visible: { opacity: 1, y: 0, transition: { duration: 0.3 } },
}

const staggerContainerVariant = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: { staggerChildren: 0.05 },
  },
}

// ============================================================================
// TAB CONTENT COMPONENTS
// ============================================================================

/**
 * Admin Tab - System administration and user management
 */
const AdminTabContent = memo(function AdminTabContent() {
  // Handler for managing user groups
  const handleManageUsers = (role: string) => {
    toast.success(`Managing users: ${role}`)
    logger.info('Manage users clicked:', role)
    // TODO: Navigate to user management page or open modal
  }

  return (
    <motion.div
      variants={staggerContainerVariant}
      initial="hidden"
      animate="visible"
      className="space-y-6"
    >
      {/* Admin Statistics */}
      <motion.div variants={fadeInVariant} className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Total Users"
          value={127}
          icon={Users}
          change={8}
  trend="up"
          description="Active accounts"
        />
        <StatCard
          title="System Health"
          value="98%"
          icon={Activity}
          change={1}
  trend="up"
          description="Uptime this month"
        />
        <StatCard
          title="Active Sessions"
          value={42}
          icon={Server}
          description="Current users"
        />
        <StatCard
          title="Storage Used"
          value="68%"
          icon={HardDrive}
          description="Of allocated space"
          variant="warning"
        />
      </motion.div>

      {/* User Management */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <UserCog className="h-5 w-5" />
              User Management
            </CardTitle>
            <CardDescription>Manage user accounts and permissions</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { role: 'Fleet Manager', count: 5, permissions: 'Full Access' },
                { role: 'Operations Manager', count: 12, permissions: 'Operations + Fleet' },
                { role: 'Dispatcher', count: 18, permissions: 'Operations Only' },
                { role: 'Driver', count: 75, permissions: 'Mobile App Only' },
                { role: 'Maintenance Tech', count: 15, permissions: 'Maintenance Module' },
                { role: 'Administrator', count: 2, permissions: 'System Admin' },
              ].map((userGroup) => (
                <div key={userGroup.role} className="flex items-center justify-between p-4 border rounded-lg">
                  <div className="flex items-center gap-3">
                    <Users className="h-5 w-5 text-blue-500" />
                    <div>
                      <p className="font-semibold">{userGroup.role}</p>
                      <p className="text-sm text-muted-foreground">
                        {userGroup.count} users · {userGroup.permissions}
                      </p>
                    </div>
                  </div>
                  <div className="flex gap-2">
                    <Button variant="outline" size="sm" onClick={() => handleManageUsers(userGroup.role)}>Manage</Button>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </motion.div>

      {/* System Status */}
      <motion.div variants={fadeInVariant} className="grid gap-6 md:grid-cols-2">
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Server className="h-5 w-5" />
              System Status
            </CardTitle>
            <CardDescription>Infrastructure health metrics</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {[
                { service: 'API Server', status: 'Healthy', uptime: '99.8%' },
                { service: 'Database', status: 'Healthy', uptime: '100%' },
                { service: 'Redis Cache', status: 'Healthy', uptime: '99.9%' },
                { service: 'Background Jobs', status: 'Healthy', uptime: '98.5%' },
              ].map((service) => (
                <div key={service.service} className="flex items-center justify-between">
                  <div>
                    <p className="font-medium">{service.service}</p>
                    <p className="text-sm text-muted-foreground">Uptime: {service.uptime}</p>
                  </div>
                  <Badge variant="default">{service.status}</Badge>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Activity className="h-5 w-5" />
              Recent Activity
            </CardTitle>
            <CardDescription>System audit log</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { action: 'User created: Sarah Connor', user: 'Admin', time: '10 min ago' },
                { action: 'Permission updated: Operations Team', user: 'John Smith', time: '1 hour ago' },
                { action: 'System backup completed', user: 'System', time: '3 hours ago' },
                { action: 'Configuration changed: API Settings', user: 'Admin', time: 'Yesterday' },
              ].map((log, index) => (
                <div key={index} className="flex items-start gap-3 p-3 border rounded-lg">
                  <Clock className="h-4 w-4 text-muted-foreground mt-0.5" />
                  <div className="flex-1">
                    <p className="text-sm font-medium">{log.action}</p>
                    <p className="text-xs text-muted-foreground">
                      {log.user} · {log.time}
                    </p>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </motion.div>
    </motion.div>
  )
})

/**
 * Configuration Tab - Application settings and preferences
 */
const ConfigurationTabContent = memo(function ConfigurationTabContent() {
  // Handler for configuring settings
  const handleConfigureSettings = (category: string) => {
    toast.success(`Configuring settings: ${category}`)
    logger.info('Configure settings clicked:', category)
    // TODO: Navigate to settings page or open configuration modal
  }

  // Handler for toggling feature flags
  const handleToggleFeature = (feature: string) => {
    toast.success(`Toggling feature: ${feature}`)
    logger.info('Toggle feature clicked:', feature)
    // TODO: Add real API call to toggle feature flag
  }

  return (
    <motion.div
      variants={staggerContainerVariant}
      initial="hidden"
      animate="visible"
      className="space-y-6"
    >
      {/* Configuration Categories */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Sliders className="h-5 w-5" />
              System Settings
            </CardTitle>
            <CardDescription>Configure application behavior and preferences</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {[
                { category: 'General', settings: 8, icon: Settings },
                { category: 'Security', settings: 12, icon: Shield },
                { category: 'Notifications', settings: 6, icon: Bell },
                { category: 'Email', settings: 4, icon: Mail },
                { category: 'Appearance', settings: 5, icon: Palette },
                { category: 'Regional', settings: 3, icon: Languages },
              ].map((item) => {
                const Icon = item.icon
                return (
                  <div key={item.category} className="flex items-center justify-between p-4 border rounded-lg">
                    <div className="flex items-center gap-3">
                      <Icon className="h-5 w-5 text-blue-500" />
                      <div>
                        <p className="font-semibold">{item.category}</p>
                        <p className="text-sm text-muted-foreground">{item.settings} settings available</p>
                      </div>
                    </div>
                    <Button variant="outline" size="sm" onClick={() => handleConfigureSettings(item.category)}>Configure</Button>
                  </div>
                )
              })}
            </div>
          </CardContent>
        </Card>
      </motion.div>

      {/* Feature Flags */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <ToggleLeft className="h-5 w-5" />
              Feature Flags
            </CardTitle>
            <CardDescription>Enable or disable system features</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { feature: 'Real-time GPS Tracking', enabled: true, description: 'Live vehicle location updates' },
                { feature: 'AI-Powered Route Optimization', enabled: true, description: 'Smart route planning' },
                { feature: 'Predictive Maintenance', enabled: false, description: 'ML-based maintenance predictions' },
                { feature: '3D Vehicle Showroom', enabled: true, description: 'Virtual garage with 3D models' },
                { feature: 'Video Telematics', enabled: false, description: 'In-cab camera integration' },
              ].map((flag) => (
                <div key={flag.feature} className="flex items-center justify-between p-4 border rounded-lg">
                  <div className="flex-1">
                    <div className="flex items-center gap-2">
                      <p className="font-semibold">{flag.feature}</p>
                      <Badge variant={flag.enabled ? 'default' : 'secondary'}>
                        {flag.enabled ? 'Enabled' : 'Disabled'}
                      </Badge>
                    </div>
                    <p className="text-sm text-muted-foreground mt-1">{flag.description}</p>
                  </div>
                  <Button variant="outline" size="sm" onClick={() => handleToggleFeature(flag.feature)}>Toggle</Button>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </motion.div>
    </motion.div>
  )
})

/**
 * Data Governance Tab - Data management and compliance
 */
const DataGovernanceTabContent = memo(function DataGovernanceTabContent() {
  // Handler for running backups
  const handleRunBackup = (backupType: string) => {
    toast.success(`Running backup: ${backupType}`)
    logger.info('Run backup clicked:', backupType)
    // TODO: Add real API call to trigger backup
  }

  return (
    <motion.div
      variants={staggerContainerVariant}
      initial="hidden"
      animate="visible"
      className="space-y-6"
    >
      {/* Data Governance Statistics */}
      <motion.div variants={fadeInVariant} className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Data Quality"
          value="96%"
          icon={Database}
          change={2}
  trend="up"
          description="Validated records"
        />
        <StatCard
          title="Storage Used"
          value="2.4 TB"
          icon={HardDrive}
          description="Of 5 TB capacity"
        />
        <StatCard
          title="Backup Status"
          value="Current"
          icon={Archive}
          description="Last backup: 2 hrs ago"
        />
        <StatCard
          title="Compliance Score"
          value="100%"
          icon={Shield}
          description="GDPR/SOC2 compliant"
        />
      </motion.div>

      {/* Data Sources */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Database className="h-5 w-5" />
              Data Sources & Quality
            </CardTitle>
            <CardDescription>Monitoring data quality across all sources</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { source: 'Vehicle Telemetry', records: '1.2M', quality: 98, lastUpdated: '2 min ago' },
                { source: 'Driver Performance', records: '450K', quality: 96, lastUpdated: '5 min ago' },
                { source: 'Maintenance Records', records: '85K', quality: 94, lastUpdated: '1 hour ago' },
                { source: 'Fuel Transactions', records: '320K', quality: 99, lastUpdated: '15 min ago' },
              ].map((source) => (
                <div key={source.source} className="p-4 border rounded-lg">
                  <div className="flex items-center justify-between mb-2">
                    <p className="font-semibold">{source.source}</p>
                    <Badge variant={source.quality >= 95 ? 'default' : 'secondary'}>
                      {source.quality}% Quality
                    </Badge>
                  </div>
                  <p className="text-sm text-muted-foreground">
                    {source.records} records · Last updated: {source.lastUpdated}
                  </p>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </motion.div>

      {/* Backup & Recovery */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Archive className="h-5 w-5" />
              Backup & Recovery
            </CardTitle>
            <CardDescription>Automated backup schedule and recovery points</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { type: 'Full Backup', schedule: 'Daily @ 2:00 AM', retention: '30 days', lastRun: '2026-01-29 02:00' },
                { type: 'Incremental Backup', schedule: 'Every 6 hours', retention: '7 days', lastRun: '2026-01-29 08:00' },
                { type: 'Transaction Logs', schedule: 'Continuous', retention: '14 days', lastRun: 'Real-time' },
              ].map((backup, index) => (
                <div key={index} className="flex items-center justify-between p-4 border rounded-lg">
                  <div>
                    <p className="font-semibold">{backup.type}</p>
                    <p className="text-sm text-muted-foreground">
                      {backup.schedule} · Retention: {backup.retention}
                    </p>
                    <p className="text-xs text-muted-foreground mt-1">Last run: {backup.lastRun}</p>
                  </div>
                  <Button variant="outline" size="sm" onClick={() => handleRunBackup(backup.type)}>Run Now</Button>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </motion.div>
    </motion.div>
  )
})

/**
 * Integrations Tab - Third-party integrations and APIs
 */
const IntegrationsTabContent = memo(function IntegrationsTabContent() {
  // Handler for configuring integrations
  const handleConfigureIntegration = (integrationName: string) => {
    toast.success(`Configuring integration: ${integrationName}`)
    logger.info('Configure integration clicked:', integrationName)
    // TODO: Navigate to integration configuration page or open modal
  }

  return (
    <motion.div
      variants={staggerContainerVariant}
      initial="hidden"
      animate="visible"
      className="space-y-6"
    >
      {/* Integration Statistics */}
      <motion.div variants={fadeInVariant} className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Active Integrations"
          value={12}
          icon={Plug}
          change={2}
  trend="up"
          description="Connected services"
        />
        <StatCard
          title="API Calls Today"
          value="147K"
          icon={CloudCog}
          change={8}
  trend="up"
          description="Across all endpoints"
        />
        <StatCard
          title="Webhook Events"
          value="2.4K"
          icon={Webhook}
          description="Last 24 hours"
        />
        <StatCard
          title="Integration Health"
          value="98%"
          icon={Activity}
          change={1}
  trend="up"
          description="All systems operational"
        />
      </motion.div>

      {/* Connected Integrations */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Plug className="h-5 w-5" />
              Connected Integrations
            </CardTitle>
            <CardDescription>Third-party services and APIs</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { name: 'SmartCar API', type: 'Telematics', status: 'Connected', calls: '45K/day' },
                { name: 'Google Maps Platform', type: 'Mapping', status: 'Connected', calls: '38K/day' },
                { name: 'Azure OpenAI', type: 'AI Services', status: 'Connected', calls: '12K/day' },
                { name: 'Microsoft Graph', type: 'Email/Calendar', status: 'Connected', calls: '8K/day' },
                { name: 'Sentry', type: 'Error Tracking', status: 'Connected', calls: '2K/day' },
                { name: 'Stripe', type: 'Payments', status: 'Configured', calls: '0.5K/day' },
              ].map((integration) => (
                <div key={integration.name} className="flex items-center justify-between p-4 border rounded-lg">
                  <div className="flex items-center gap-3">
                    <Plug className="h-5 w-5 text-green-500" />
                    <div>
                      <p className="font-semibold">{integration.name}</p>
                      <p className="text-sm text-muted-foreground">
                        {integration.type} · {integration.calls}
                      </p>
                    </div>
                  </div>
                  <div className="flex items-center gap-2">
                    <Badge variant={integration.status === 'Connected' ? 'default' : 'secondary'}>
                      {integration.status}
                    </Badge>
                    <Button variant="outline" size="sm" onClick={() => handleConfigureIntegration(integration.name)}>Configure</Button>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </motion.div>

      {/* API Usage */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Code className="h-5 w-5" />
              API Usage Trends
            </CardTitle>
            <CardDescription>API call volume over time</CardDescription>
          </CardHeader>
          <CardContent>
            <ResponsiveLineChart
              title="API Usage Trends"
              data={[
                { name: 'Mon', day: 'Mon', calls: 125000 },
                { name: 'Tue', day: 'Tue', calls: 138000 },
                { name: 'Wed', day: 'Wed', calls: 142000 },
                { name: 'Thu', day: 'Thu', calls: 135000 },
                { name: 'Fri', day: 'Fri', calls: 147000 },
                { name: 'Sat', day: 'Sat', calls: 98000 },
                { name: 'Sun', day: 'Sun', calls: 85000 },
              ]}
              dataKeys={['calls']}
              colors={['#3b82f6']}
              height={250}
            />
          </CardContent>
        </Card>
      </motion.div>
    </motion.div>
  )
})

/**
 * Documents Tab - Document management and templates
 */
const DocumentsTabContent = memo(function DocumentsTabContent() {
  // Handler for browsing document categories
  const handleBrowseDocuments = (category: string) => {
    toast.success(`Browsing documents: ${category}`)
    logger.info('Browse documents clicked:', category)
    // TODO: Navigate to document browser or open file explorer
  }

  // Handler for downloading documents
  const handleDownloadDocument = (documentName: string) => {
    toast.success(`Downloading document: ${documentName}`)
    logger.info('Download document clicked:', documentName)
    // TODO: Add real API call to download document
  }

  return (
    <motion.div
      variants={staggerContainerVariant}
      initial="hidden"
      animate="visible"
      className="space-y-6"
    >
      {/* Document Statistics */}
      <motion.div variants={fadeInVariant} className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <StatCard
          title="Total Documents"
          value={1248}
          icon={FileText}
          change={45}
  trend="up"
          description="In repository"
        />
        <StatCard
          title="Templates"
          value={32}
          icon={FileCheck}
          description="Ready to use"
        />
        <StatCard
          title="Shared This Week"
          value={87}
          icon={Upload}
          change={12}
  trend="up"
          description="Uploaded documents"
        />
        <StatCard
          title="Storage Used"
          value="4.2 GB"
          icon={HardDrive}
          description="Document storage"
        />
      </motion.div>

      {/* Document Categories */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <FolderOpen className="h-5 w-5" />
              Document Library
            </CardTitle>
            <CardDescription>Organized by category</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { category: 'Policies & Procedures', count: 248, icon: FileText },
                { category: 'Compliance Documents', count: 184, icon: Shield },
                { category: 'Training Materials', count: 326, icon: Bookmark },
                { category: 'Maintenance Records', count: 412, icon: Tag },
                { category: 'Financial Reports', count: 78, icon: Download },
              ].map((cat) => {
                const Icon = cat.icon
                return (
                  <div key={cat.category} className="flex items-center justify-between p-4 border rounded-lg">
                    <div className="flex items-center gap-3">
                      <Icon className="h-5 w-5 text-blue-500" />
                      <div>
                        <p className="font-semibold">{cat.category}</p>
                        <p className="text-sm text-muted-foreground">{cat.count} documents</p>
                      </div>
                    </div>
                    <Button variant="outline" size="sm" onClick={() => handleBrowseDocuments(cat.category)}>Browse</Button>
                  </div>
                )
              })}
            </div>
          </CardContent>
        </Card>
      </motion.div>

      {/* Recent Documents */}
      <motion.div variants={fadeInVariant}>
        <Card>
          <CardHeader>
            <CardTitle className="flex items-center gap-2">
              <Clock className="h-5 w-5" />
              Recently Added
            </CardTitle>
            <CardDescription>Latest uploaded documents</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {[
                { name: 'Fleet Safety Policy 2026.pdf', uploadedBy: 'John Smith', date: '2026-01-29', size: '2.4 MB' },
                { name: 'Monthly Maintenance Report - Jan.xlsx', uploadedBy: 'Jane Doe', date: '2026-01-28', size: '1.2 MB' },
                { name: 'Driver Training Manual v2.pdf', uploadedBy: 'Bob Johnson', date: '2026-01-27', size: '5.8 MB' },
              ].map((doc, index) => (
                <div key={index} className="flex items-center justify-between p-4 border rounded-lg">
                  <div className="flex items-center gap-3">
                    <FileText className="h-5 w-5 text-blue-500" />
                    <div>
                      <p className="font-semibold">{doc.name}</p>
                      <p className="text-sm text-muted-foreground">
                        Uploaded by {doc.uploadedBy} · {doc.date} · {doc.size}
                      </p>
                    </div>
                  </div>
                  <Button variant="outline" size="sm" onClick={() => handleDownloadDocument(doc.name)}>
                    <Download className="h-4 w-4" />
                  </Button>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </motion.div>
    </motion.div>
  )
})

// ============================================================================
// MAIN COMPONENT
// ============================================================================

export default function AdminConfigurationHub() {
  const [activeTab, setActiveTab] = useState('admin')
  const { user } = useAuth()

  return (
    <HubPage
      title="Administration & Configuration"
      description="System administration, configuration, data governance, integrations, and document management"
      icon={Settings}
    >
      <div className="space-y-6">
        <Tabs value={activeTab} onValueChange={setActiveTab} className="w-full">
          <TabsList className="grid w-full grid-cols-5">
            <TabsTrigger value="admin" className="flex items-center gap-2" data-testid="hub-tab-admin">
              <UserCog className="h-4 w-4" />
              <span className="hidden sm:inline">Admin</span>
            </TabsTrigger>
            <TabsTrigger value="config" className="flex items-center gap-2" data-testid="hub-tab-config">
              <Settings className="h-4 w-4" />
              <span className="hidden sm:inline">Config</span>
            </TabsTrigger>
            <TabsTrigger value="data" className="flex items-center gap-2" data-testid="hub-tab-data">
              <Database className="h-4 w-4" />
              <span className="hidden sm:inline">Data</span>
            </TabsTrigger>
            <TabsTrigger value="integrations" className="flex items-center gap-2" data-testid="hub-tab-integrations">
              <Plug className="h-4 w-4" />
              <span className="hidden sm:inline">Integrations</span>
            </TabsTrigger>
            <TabsTrigger value="documents" className="flex items-center gap-2" data-testid="hub-tab-documents">
              <FileText className="h-4 w-4" />
              <span className="hidden sm:inline">Documents</span>
            </TabsTrigger>
          </TabsList>

          <AnimatePresence mode="wait">
            <motion.div
              key={activeTab}
              initial={{ opacity: 0, y: 10 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -10 }}
              transition={{ duration: 0.2 }}
            >
              <TabsContent value="admin" className="mt-6">
                <ErrorBoundary>
                  <AdminTabContent />
                </ErrorBoundary>
              </TabsContent>

              <TabsContent value="config" className="mt-6">
                <ErrorBoundary>
                  <ConfigurationTabContent />
                </ErrorBoundary>
              </TabsContent>

              <TabsContent value="data" className="mt-6">
                <ErrorBoundary>
                  <DataGovernanceTabContent />
                </ErrorBoundary>
              </TabsContent>

              <TabsContent value="integrations" className="mt-6">
                <ErrorBoundary>
                  <IntegrationsTabContent />
                </ErrorBoundary>
              </TabsContent>

              <TabsContent value="documents" className="mt-6">
                <ErrorBoundary>
                  <DocumentsTabContent />
                </ErrorBoundary>
              </TabsContent>
            </motion.div>
          </AnimatePresence>
        </Tabs>
      </div>
    </HubPage>
  )
}
